{"version":3,"sources":["components/Member.tsx","constants.ts","utils.ts","components/TimerSetter.tsx","components/Timer.tsx","actions/caucus-actions.ts","components/caucus/SpeakerFeed.tsx","actions/handlers.ts","components/caucus/CaucusQueuer.tsx","components/caucus/CaucusNextSpeaking.tsx","components/NotFound.tsx","components/Caucus.tsx","components/Amendment.tsx","components/Admin.tsx","actions/resolution-actions.ts","components/Loading.tsx","components/Files.tsx","components/Resolution.tsx","components/Notes.tsx","components/Footer.tsx","components/Help.tsx","actions/committee-actions.ts","components/Strawpoll.tsx","actions/strawpoll-actions.ts","components/ShareHint.tsx","components/Motions.tsx","components/MotionsAdmin.tsx","components/Auth.tsx","components/Settings.tsx","components/Notifications.tsx","components/ConnectionStatus.tsx","components/caucus/SpeakersListVisual.tsx","components/SpeakersList.tsx","components/Committee.tsx","components/Onboard.tsx","components/Homepage.tsx","components/Guides.tsx","components/FAQ.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["Rank","COUNTRY_OPTIONS","key","value","flag","text","FLAG_NAME_SET","Set","map","x","parseFlagName","name","has","toLowerCase","nameToMemberOption","filter","c","implies","a","b","objectToList","object","Object","keys","makeDropdownOption","membersToOptions","members","options","_","option","Unit","getSeconds","duration","unit","Minutes","UNIT_OPTIONS","Seconds","TimerSetter","isInvalid","n","props","durationValue","isNaN","Number","handleOnSet","onSet","this","Form","Input","placeholder","onChange","onDurationChange","action","loading","fluid","error","label","Select","unitValue","compact","button","onUnitChange","Button","onClick","React","DEFAULT_TIMER","elapsed","remaining","DEFAULT_SPEAKER_TIME_SECONDS","ticking","getTimeWithSkewCorrection","skew","millis","Date","getTime","Math","floor","toggleTicking","timer","timerFref","newTimer","set","Timer","tick","state","setState","mute","console","info","playSound","toggleMute","prevState","localToggleTicking","handleKeyDown","ev","toggleKeyCode","keyCode","altKey","skewCallback","val","timerCallback","timerData","now","increment","num","durationField","toString","context","window","audioContext","AudioContext","webkitAudioContext","osc","createOscillator","type","frequency","connect","destination","start","stop","currentTime","unitDropdown","decrement","setUnit","event","data","setDuration","e","currentTarget","defaultUnit","defaultDuration","offsetRef","firebase","database","ref","on","timerId","setInterval","document","addEventListener","off","clearInterval","removeEventListener","formatted","seconds","sign","abs","minutes","hours","secondsFormatted","padStart","minutesFormatted","hhmmss","percentage","Segment","textAlign","Label","attached","size","active","negative","icon","Icon","Progress","percent","indicating","Divider","Stance","putCaucus","committeeID","caucusData","child","push","putSpeaking","caucusID","speaker","debug","closeCaucus","CaucusStatus","Closed","runLifecycle","lifecycle","history","speakingData","speaking","timerResetSeconds","yielding","queueHeadData","queueHead","additionalYieldTime","update","StanceIcon","stance","For","Against","SpeakerFeedEntry","yieldHandler","fref","speakerTimer","queueHeadDetails","caucusRef","parent","Feed","Content","Summary","User","Flag","who","Meta","Like","as","remove","draggableProvided","className","innerRef","dragHandleProps","draggableProps","renderContent","FeedEvent","SpeakerFeed","queueFref","useAuthState","user","events","eventItems","index","draggableId","provided","snapshot","onDragEnd","result","reorderedKeys","list","startIndex","endIndex","Array","from","splice","removed","reorder","source","forEach","se","droppableId","droppableProps","fieldHandler","field","lens","comp","target","old","stateFieldHandler","stateValidatedNumberFieldHandler","textAreaHandler","stateTextAreaHandler","dropdownHandler","stateDropdownHandler","checkboxHandler","checked","memberDropdownHandler","memberOptions","stateMemberDropdownHandler","CaucusQueuer","caucus","caucusFref","undefined","queueMember","setQueueMember","setStance","recoverDuration","newEvent","recoverUnit","disableButtons","Dropdown","search","selection","Checkbox","indeterminate","toggle","queueIsPublic","Group","content","disabled","Or","Neutral","CaucusNextSpeaking","auth","log","nextSpeaker","q","queue","queueHeadKey","speakerSeconds","useObjectVal","hasNowSpeaking","queueLength","values","length","hasNextSpeaking","interlaceable","nextable","stageButton","basic","positive","startButton","nextButton","primary","stopButton","interlaceButton","color","vs","fors","againsts","neutrals","interlaced","flatten","zip","Popup","trigger","NotFound","item","id","Message","Header","speakerUnit","speakerDuration","AmendmentStatus","CAUCUS_STATUS_OPTIONS","Open","DEFAULT_CAUCUS","topic","status","caucusTimer","Caucus","firebaseCallback","committee","recoverCaucusFref","match","params","committeeFref","renderHeader","statusDropdown","href","labelPosition","attatched","TextArea","autoHeight","rows","renderNowSpeaking","entryData","setSpeakerTimer","setCaucusTimer","renderCaucus","recoverMembers","renderedSpeakerTimer","renderedCaucusTimer","recoverSettings","autoNextSpeaker","timersInSeparateColumns","moveQueueUp","header","Grid","Row","Column","renderedCaucusQueuer","renderedCaucusNextSpeaking","body","Container","columns","stackable","recoverCaucus","AMENDMENT_STATUS_OPTIONS","Proposed","Incorporated","Rejected","DEFAULT_AMENDMENT","proposer","canVote","rank","Veto","Standard","nonNGO","NGO","RANK_OPTIONS","Observer","makeCommitteeStats","defaultMap","Utils","present","delegatesNo","presentNo","absCanVote","canVoteNo","nonNGONo","simpleMajority","ceil","twoThirdsMajority","quorum","procedural","operative","hasQuorum","draftResolution","amendment","CommitteeStats","verbose","Table","definition","HeaderCell","Body","Cell","Admin","renderMemberItem","member","collapsing","voting","canPush","newMember","memberNames","includes","pushMember","preventDefault","setMember","newOptions","setPresent","setVoting","setRank","handleAdd","gotoGSL","CommitteeMembers","memberItems","celled","fullWidth","renderAdder","reverse","newMemberPresent","newMemberVoting","allowAdditions","onAddItem","panes","menuItem","render","Tab","Pane","style","padding","voteOnResolution","resolutionID","memberID","vote","putAmendment","amendmentData","putResolution","resolutionData","Loading","small","Dimmer","inverted","Loader","PostType","TEXT_ICON","FILE_ICON","LINK_ICON","Entry","recoverStorageRef","post","File","storage","filename","download","getDownloadURL","then","url","xhr","XMLHttpRequest","responseType","onload","blob","response","FileSaver","saveAs","open","send","renderDate","sinceText","timestamp","secondsSince","round","renderText","Event","uploader","Extra","onDelete","forResolution","onPromoteToAmendment","renderFile","renderLink","getMetadata","metadata","Link","Text","Files","handleError","errorCode","code","handleSnapshot","progress","bytesTransferred","totalBytes","handleComplete","uploadTask","file","clear","onFileChange","files","link","postFile","storageRef","contentType","put","TaskEvent","STATE_CHANGED","postLink","linkData","postText","recoverMemberOptions","renderUploader","warning","TaskState","PAUSED","success","SUCCESS","onSubmit","widths","required","RUNNING","setBody","setName","setLink","setFilter","filtered","renderFilter","multiple","deletePost","postID","promoteToAmendment","renderLinker","renderPoster","isFiltered","isResolutionAssociated","inner","menu","tabular","ResolutionStatus","TAB_ORDER","IDENTITCAL_PROPOSER_SECONDER","DELEGATES_CAN_AMEND_NOTICE","Majority","RESOLUTION_STATUS_OPTIONS","Introduced","Passed","Failed","Vote","MAJORITY_OPTIONS","Simple","TwoThirds","TwoThirdsNoAbstentions","DEFAULT_RESOLUTION","amendments","votes","amendmentsArePublic","requiredMajority","Resolution","authStateChangedCallback","recoverResolutionFref","handlePushAmendment","handleProvisionAmendment","newCaucus","gotoCaucus","handleProvisionResolution","seconder","renderAmendment","amendmentFref","textArea","hasAuth","creatorUid","uid","proposerDropdown","provisionTree","recoverLinkedCaucus","floated","Card","cycleVote","currentVote","newVote","Abstaining","renderVotingMember","marginLeft","circular","List","Item","verticalAlign","toUpperCase","renderStats","renderCount","count","renderMajoritySelector","resolution","resolutionFref","renderVoting","sortedPresentAndCanVote","sortBy","rendered","vetoes","resolutionVetoed","votesByVoters","k","v","abstains","threshold","stats","getThreshold","thresholdName","majority","getThresholdName","resolutionPassed","resolutionFailed","ROWS","i","drop","take","Statistic","Value","renderMeta","hasIdenticalProposerSeconder","proposerTree","seconderTree","hasError","hasLinkedCaucus","renderAmendments","resolutionRef","renderAmendmentsGroup","adder","itemsPerRow","renderFeed","onTabChange","tab","activeIndex","renderResolution","findIndex","width","authUnsubscribe","onAuthStateChanged","resolutions","Notes","notes","CLIENT_VERSION_LINK","RELEASES_LATEST","Footer","fetchLatestVersion","latestVersion","fetch","json","tag_name","position","bottom","left","background","KEYBOARD_SHORTCUT_LIST","Help","gpl","ordered","StrawpollStage","StrawpollType","StrawpollMedium","putUnmodTimer","extendTimer","transaction","newRemaining","extendModTimer","extendUnmodTimer","putStrawpoll","strawpollData","CommitteeShareHint","hostname","location","bulleted","DEFAULT_STRAWPOLL","question","stage","Preparing","medium","MotionType","DIVISIBILITY_ERROR","disruptiveness","motionType","AddToListRequest","GeneralNoteToDAIS","ExtendUnmoderatedCaucus","ExtendModeratedCaucus","CloseModeratedCaucus","OpenUnmoderatedCaucus","OpenModeratedCaucus","ProposeStrawpoll","IntroduceDraftResolution","IntroduceAmendment","SuspendDraftResolutionSpeakersList","OpenDebate","SuspendDebate","ResumeDebate","CloseDebate","VoteOnResolution","ReorderDraftResolutions","actionName","approvable","hasSpeakers","hasSeconder","hasDetail","hasTextArea","detailLabel","hasDuration","interpolateTime","time","hasCaucusTarget","hasResolutionTarget","MOTION_TYPE_OPTIONS","DEFAULT_MOTION","proposal","caucusDuration","caucusUnit","Motions","handlePushMotion","newMotion","alert","handleClearMotions","motions","handleClearAdder","handleApproveMotion","motionFref","motionData","caucusTarget","resolutionTarget","caucusSeconds","DEFAULT_COMMITTEE","newResolution","caucuses","newAmendment","strawpollRef","renderMotion","caucusTargetText","recoverResolution","resolutionTargetText","descriptionTree","Description","horizontal","caucusTargetTree","resolutionTargetTree","hasDivisiblityError","doesNotEvenlyDivide","boxForAmmendments","boxForNames","description","speakerSetter","durationSetter","caucusOptions","resolutionOptions","caucusTargetSetter","resolutionTargetSetter","setters","fluids","renderMotions","deleted","sort","ma","mb","ca","cb","sa","sb","Mode","MotionsAdmin","renderedMotions","DEFAULT_SETTINGS","Settings","renderSetting","setting","settingsFref","settings","slider","Login","loggingIn","creating","orderByChild","equalTo","once","committees","handleLogout","signOut","catch","err","handleLogin","email","password","signInWithEmailAndPassword","handleCreate","createUserWithEmailAndPassword","message","handlePasswordReset","resetting","sendPasswordResetEmail","handleDismissError","handleDismissSuccess","handleForgotPassword","mode","ForgotPassword","handleResetPasswordCancel","setEmail","setPassword","renderCommittees","renderCommittee","defaulted","owned","relaxed","renderError","onDismiss","renderSuccess","succ","renderNotice","renderLoggedIn","u","allowNewCommittee","centered","extra","renderLogin","allowSignup","signupButton","cancelButton","usernameInput","autoComplete","passwordInput","unsubscribe","ModalLogin","Modal","renderModalTrigger","dimmer","PERMISSION_DENIED_NOTIFICATION","disposition","CONNECTION_LOST_NOTIFICATION","CONNECTION_REGAINED_NOTIFICATION","Notifications","computeNewNotificationState","notification","notifications","connected","acc","hasConnectedBefore","listener","reason","dismiss","renderNotification","raised","renderedNotifications","TransitionablePortal","transition","animation","right","top","zIndex","ConnectionStatus","SpeakersListVisual","SpeakersList","chair","conference","strawpolls","DesktopContainer","Responsive","minWidth","onlyMobile","maxWidth","Menu","MobileContainer","handlePusherClick","sidebarOpened","handleToggle","Sidebar","Pushable","visible","Pusher","dimmed","minHeight","ResponsiveNav","makeMenuItem","pathname","makeSubmenuButton","f","makeMenuIcon","makeSubmenuItem","pushCaucus","pushResolution","renderMenuItems","caucusItems","resolutionItems","children","Committee","gotoSetup","renderAdmin","renderWelcome","exact","path","component","Onboard","handleInput","handleSubmit","newCommittee","newCommitteeRef","committeesFref","renderNewCommitteeForm","dividing","hidden","HomepageHeading","mobile","fontSize","fontWeight","marginBottom","marginTop","Image","rounded","src","hideFixedMenu","fixed","showFixedMenu","Visibility","onBottomPassed","onBottomPassedReverse","vertical","pointing","secondary","ResponsiveContainer","Homepage","committeeNo","delegateNo","divided","GuidesHeading","Guides","container","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","App","FAQ","Boolean","Sentry","dsn","ReactGA","createHistory","listen","page","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d93a1148.chunk.js","sourcesContent":["import { COUNTRY_OPTIONS, FlagNames } from '../constants';\n\nexport enum Rank {\n    Veto = 'Veto',\n    Standard = 'Standard',\n    NGO = 'NGO',\n    Observer = 'Observer'\n}\n\nexport type MemberID = string;\n\nexport interface MemberData {\n  name: string;\n  present: boolean;\n  rank: Rank;\n  voting: boolean;\n}\n\nconst FLAG_NAME_SET = new Set(COUNTRY_OPTIONS.map(x => x.text));\n\nexport const parseFlagName = (name: string): FlagNames => {\n  if (FLAG_NAME_SET.has(name)) {\n    return name.toLowerCase() as FlagNames;\n  } else {\n    return 'fm';\n  }\n};\n\nexport const nameToMemberOption = (name: string) => {\n  if (FLAG_NAME_SET.has(name)) {\n    return COUNTRY_OPTIONS.filter(c => c.text === name)[0];\n  } else {\n    return { key: name, value: name, flag: 'fm', text: name };\n  }\n};","export const STATE_OPTIONS = [\n  { key: 'AL', value: 'AL', text: 'Alabama' },\n  { key: 'AK', value: 'AK', text: 'Alaska' },\n  { key: 'AZ', value: 'AZ', text: 'Arizona' },\n  { key: 'AR', value: 'AR', text: 'Arkansas' },\n  { key: 'CA', value: 'CA', text: 'California' },\n  { key: 'CO', value: 'CO', text: 'Colorado' },\n  { key: 'CT', value: 'CT', text: 'Connecticut' },\n  { key: 'DE', value: 'DE', text: 'Delaware' },\n  { key: 'DC', value: 'DC', text: 'District Of Columbia' },\n  { key: 'FL', value: 'FL', text: 'Florida' },\n  { key: 'GA', value: 'GA', text: 'Georgia' },\n  { key: 'HI', value: 'HI', text: 'Hawaii' },\n  { key: 'ID', value: 'ID', text: 'Idaho' },\n  { key: 'IL', value: 'IL', text: 'Illinois' },\n  { key: 'IN', value: 'IN', text: 'Indiana' },\n  { key: 'IA', value: 'IA', text: 'Iowa' },\n  { key: 'KS', value: 'KS', text: 'Kansas' },\n  { key: 'KY', value: 'KY', text: 'Kentucky' },\n  { key: 'LA', value: 'LA', text: 'Louisiana' },\n  { key: 'ME', value: 'ME', text: 'Maine' },\n  { key: 'MD', value: 'MD', text: 'Maryland' },\n  { key: 'MA', value: 'MA', text: 'Massachusetts' },\n  { key: 'MI', value: 'MI', text: 'Michigan' },\n  { key: 'MN', value: 'MN', text: 'Minnesota' },\n  { key: 'MS', value: 'MS', text: 'Mississippi' },\n  { key: 'MO', value: 'MO', text: 'Missouri' },\n  { key: 'MT', value: 'MT', text: 'Montana' },\n  { key: 'NE', value: 'NE', text: 'Nebraska' },\n  { key: 'NV', value: 'NV', text: 'Nevada' },\n  { key: 'NH', value: 'NH', text: 'New Hampshire' },\n  { key: 'NJ', value: 'NJ', text: 'New Jersey' },\n  { key: 'NM', value: 'NM', text: 'New Mexico' },\n  { key: 'NY', value: 'NY', text: 'New York' },\n  { key: 'NC', value: 'NC', text: 'North Carolina' },\n  { key: 'ND', value: 'ND', text: 'North Dakota' },\n  { key: 'OH', value: 'OH', text: 'Ohio' },\n  { key: 'OK', value: 'OK', text: 'Oklahoma' },\n  { key: 'OR', value: 'OR', text: 'Oregon' },\n  { key: 'PA', value: 'PA', text: 'Pennsylvania' },\n  { key: 'RI', value: 'RI', text: 'Rhode Island' },\n  { key: 'SC', value: 'SC', text: 'South Carolina' },\n  { key: 'SD', value: 'SD', text: 'South Dakota' },\n  { key: 'TN', value: 'TN', text: 'Tennessee' },\n  { key: 'TX', value: 'TX', text: 'Texas' },\n  { key: 'UT', value: 'UT', text: 'Utah' },\n  { key: 'VT', value: 'VT', text: 'Vermont' },\n  { key: 'VA', value: 'VA', text: 'Virginia' },\n  { key: 'WA', value: 'WA', text: 'Washington' },\n  { key: 'WV', value: 'WV', text: 'West Virginia' },\n  { key: 'WI', value: 'WI', text: 'Wisconsin' },\n  { key: 'WY', value: 'WY', text: 'Wyoming' },\n];\n\nexport interface MemberOption {\n  key: string;\n  value: string;\n  flag: string;\n  text: string;\n}\n\nexport const COUNTRY_OPTIONS: MemberOption[] = [\n  { key: 'af', value: 'af', flag: 'af', text: 'Afghanistan' },\n  { key: 'ax', value: 'ax', flag: 'ax', text: 'Aland Islands' },\n  { key: 'al', value: 'al', flag: 'al', text: 'Albania' },\n  { key: 'dz', value: 'dz', flag: 'dz', text: 'Algeria' },\n  { key: 'as', value: 'as', flag: 'as', text: 'American Samoa' },\n  { key: 'ad', value: 'ad', flag: 'ad', text: 'Andorra' },\n  { key: 'ao', value: 'ao', flag: 'ao', text: 'Angola' },\n  { key: 'ai', value: 'ai', flag: 'ai', text: 'Anguilla' },\n  { key: 'ag', value: 'ag', flag: 'ag', text: 'Antigua' },\n  { key: 'ar', value: 'ar', flag: 'ar', text: 'Argentina' },\n  { key: 'am', value: 'am', flag: 'am', text: 'Armenia' },\n  { key: 'aw', value: 'aw', flag: 'aw', text: 'Aruba' },\n  { key: 'au', value: 'au', flag: 'au', text: 'Australia' },\n  { key: 'at', value: 'at', flag: 'at', text: 'Austria' },\n  { key: 'az', value: 'az', flag: 'az', text: 'Azerbaijan' },\n  { key: 'bs', value: 'bs', flag: 'bs', text: 'Bahamas' },\n  { key: 'bh', value: 'bh', flag: 'bh', text: 'Bahrain' },\n  { key: 'bd', value: 'bd', flag: 'bd', text: 'Bangladesh' },\n  { key: 'bb', value: 'bb', flag: 'bb', text: 'Barbados' },\n  { key: 'by', value: 'by', flag: 'by', text: 'Belarus' },\n  { key: 'be', value: 'be', flag: 'be', text: 'Belgium' },\n  { key: 'bz', value: 'bz', flag: 'bz', text: 'Belize' },\n  { key: 'bj', value: 'bj', flag: 'bj', text: 'Benin' },\n  { key: 'bm', value: 'bm', flag: 'bm', text: 'Bermuda' },\n  { key: 'bt', value: 'bt', flag: 'bt', text: 'Bhutan' },\n  { key: 'bo', value: 'bo', flag: 'bo', text: 'Bolivia' },\n  { key: 'ba', value: 'ba', flag: 'ba', text: 'Bosnia' },\n  { key: 'bw', value: 'bw', flag: 'bw', text: 'Botswana' },\n  { key: 'bv', value: 'bv', flag: 'bv', text: 'Bouvet Island' },\n  { key: 'br', value: 'br', flag: 'br', text: 'Brazil' },\n  { key: 'vg', value: 'vg', flag: 'vg', text: 'British Virgin Islands' },\n  { key: 'bn', value: 'bn', flag: 'bn', text: 'Brunei' },\n  { key: 'bg', value: 'bg', flag: 'bg', text: 'Bulgaria' },\n  { key: 'bf', value: 'bf', flag: 'bf', text: 'Burkina Faso' },\n  { key: 'bi', value: 'bi', flag: 'bi', text: 'Burundi' },\n  { key: 'tc', value: 'tc', flag: 'tc', text: 'Caicos Islands' },\n  { key: 'kh', value: 'kh', flag: 'kh', text: 'Cambodia' },\n  { key: 'cm', value: 'cm', flag: 'cm', text: 'Cameroon' },\n  { key: 'ca', value: 'ca', flag: 'ca', text: 'Canada' },\n  { key: 'cv', value: 'cv', flag: 'cv', text: 'Cape Verde' },\n  { key: 'ky', value: 'ky', flag: 'ky', text: 'Cayman Islands' },\n  { key: 'cf', value: 'cf', flag: 'cf', text: 'Central African Republic' },\n  { key: 'td', value: 'td', flag: 'td', text: 'Chad' },\n  { key: 'cl', value: 'cl', flag: 'cl', text: 'Chile' },\n  { key: 'cn', value: 'cn', flag: 'cn', text: 'China' },\n  { key: 'cx', value: 'cx', flag: 'cx', text: 'Christmas Island' },\n  { key: 'cc', value: 'cc', flag: 'cc', text: 'Cocos Islands' },\n  { key: 'co', value: 'co', flag: 'co', text: 'Colombia' },\n  { key: 'km', value: 'km', flag: 'km', text: 'Comoros' },\n  { key: 'cg', value: 'cg', flag: 'cg', text: 'Congo Brazzaville' },\n  { key: 'cd', value: 'cd', flag: 'cd', text: 'Congo' },\n  { key: 'ck', value: 'ck', flag: 'ck', text: 'Cook Islands' },\n  { key: 'cr', value: 'cr', flag: 'cr', text: 'Costa Rica' },\n  { key: 'ci', value: 'ci', flag: 'ci', text: 'Cote Divoire' },\n  { key: 'hr', value: 'hr', flag: 'hr', text: 'Croatia' },\n  { key: 'cu', value: 'cu', flag: 'cu', text: 'Cuba' },\n  { key: 'cy', value: 'cy', flag: 'cy', text: 'Cyprus' },\n  { key: 'cz', value: 'cz', flag: 'cz', text: 'Czech Republic' },\n  { key: 'dk', value: 'dk', flag: 'dk', text: 'Denmark' },\n  { key: 'dj', value: 'dj', flag: 'dj', text: 'Djibouti' },\n  { key: 'dm', value: 'dm', flag: 'dm', text: 'Dominica' },\n  { key: 'do', value: 'do', flag: 'do', text: 'Dominican Republic' },\n  { key: 'ec', value: 'ec', flag: 'ec', text: 'Ecuador' },\n  { key: 'eg', value: 'eg', flag: 'eg', text: 'Egypt' },\n  { key: 'sv', value: 'sv', flag: 'sv', text: 'El Salvador' },\n  { key: 'gb', value: 'gb', flag: 'gb', text: 'United Kingdom' },\n  { key: 'gq', value: 'gq', flag: 'gq', text: 'Equatorial Guinea' },\n  { key: 'er', value: 'er', flag: 'er', text: 'Eritrea' },\n  { key: 'ee', value: 'ee', flag: 'ee', text: 'Estonia' },\n  { key: 'et', value: 'et', flag: 'et', text: 'Ethiopia' },\n  { key: 'eu', value: 'eu', flag: 'eu', text: 'European Union' },\n  { key: 'fk', value: 'fk', flag: 'fk', text: 'Falkland Islands' },\n  { key: 'fo', value: 'fo', flag: 'fo', text: 'Faroe Islands' },\n  { key: 'fj', value: 'fj', flag: 'fj', text: 'Fiji' },\n  { key: 'fi', value: 'fi', flag: 'fi', text: 'Finland' },\n  { key: 'fr', value: 'fr', flag: 'fr', text: 'France' },\n  { key: 'gf', value: 'gf', flag: 'gf', text: 'French Guiana' },\n  { key: 'pf', value: 'pf', flag: 'pf', text: 'French Polynesia' },\n  { key: 'tf', value: 'tf', flag: 'tf', text: 'French Territories' },\n  { key: 'ga', value: 'ga', flag: 'ga', text: 'Gabon' },\n  { key: 'gm', value: 'gm', flag: 'gm', text: 'Gambia' },\n  { key: 'ge', value: 'ge', flag: 'ge', text: 'Georgia' },\n  { key: 'de', value: 'de', flag: 'de', text: 'Germany' },\n  { key: 'gh', value: 'gh', flag: 'gh', text: 'Ghana' },\n  { key: 'gi', value: 'gi', flag: 'gi', text: 'Gibraltar' },\n  { key: 'gr', value: 'gr', flag: 'gr', text: 'Greece' },\n  { key: 'gl', value: 'gl', flag: 'gl', text: 'Greenland' },\n  { key: 'gd', value: 'gd', flag: 'gd', text: 'Grenada' },\n  { key: 'gp', value: 'gp', flag: 'gp', text: 'Guadeloupe' },\n  { key: 'gu', value: 'gu', flag: 'gu', text: 'Guam' },\n  { key: 'gt', value: 'gt', flag: 'gt', text: 'Guatemala' },\n  { key: 'gw', value: 'gw', flag: 'gw', text: 'Guinea-Bissau' },\n  { key: 'gn', value: 'gn', flag: 'gn', text: 'Guinea' },\n  { key: 'gy', value: 'gy', flag: 'gy', text: 'Guyana' },\n  { key: 'ht', value: 'ht', flag: 'ht', text: 'Haiti' },\n  { key: 'hm', value: 'hm', flag: 'hm', text: 'Heard Island' },\n  { key: 'hn', value: 'hn', flag: 'hn', text: 'Honduras' },\n  { key: 'hk', value: 'hk', flag: 'hk', text: 'Hong Kong' },\n  { key: 'hu', value: 'hu', flag: 'hu', text: 'Hungary' },\n  { key: 'is', value: 'is', flag: 'is', text: 'Iceland' },\n  { key: 'in', value: 'in', flag: 'in', text: 'India' },\n  { key: 'io', value: 'io', flag: 'io', text: 'Indian Ocean Territory' },\n  { key: 'id', value: 'id', flag: 'id', text: 'Indonesia' },\n  { key: 'ir', value: 'ir', flag: 'ir', text: 'Iran' },\n  { key: 'iq', value: 'iq', flag: 'iq', text: 'Iraq' },\n  { key: 'ie', value: 'ie', flag: 'ie', text: 'Ireland' },\n  { key: 'il', value: 'il', flag: 'il', text: 'Israel' },\n  { key: 'it', value: 'it', flag: 'it', text: 'Italy' },\n  { key: 'jm', value: 'jm', flag: 'jm', text: 'Jamaica' },\n  { key: 'jp', value: 'jp', flag: 'jp', text: 'Japan' },\n  { key: 'jo', value: 'jo', flag: 'jo', text: 'Jordan' },\n  { key: 'kz', value: 'kz', flag: 'kz', text: 'Kazakhstan' },\n  { key: 'ke', value: 'ke', flag: 'ke', text: 'Kenya' },\n  { key: 'ki', value: 'ki', flag: 'ki', text: 'Kiribati' },\n  { key: 'kw', value: 'kw', flag: 'kw', text: 'Kuwait' },\n  { key: 'kg', value: 'kg', flag: 'kg', text: 'Kyrgyzstan' },\n  { key: 'la', value: 'la', flag: 'la', text: 'Laos' },\n  { key: 'lv', value: 'lv', flag: 'lv', text: 'Latvia' },\n  { key: 'lb', value: 'lb', flag: 'lb', text: 'Lebanon' },\n  { key: 'ls', value: 'ls', flag: 'ls', text: 'Lesotho' },\n  { key: 'lr', value: 'lr', flag: 'lr', text: 'Liberia' },\n  { key: 'ly', value: 'ly', flag: 'ly', text: 'Libya' },\n  { key: 'li', value: 'li', flag: 'li', text: 'Liechtenstein' },\n  { key: 'lt', value: 'lt', flag: 'lt', text: 'Lithuania' },\n  { key: 'lu', value: 'lu', flag: 'lu', text: 'Luxembourg' },\n  { key: 'mo', value: 'mo', flag: 'mo', text: 'Macau' },\n  { key: 'mk', value: 'mk', flag: 'mk', text: 'Macedonia' },\n  { key: 'mg', value: 'mg', flag: 'mg', text: 'Madagascar' },\n  { key: 'mw', value: 'mw', flag: 'mw', text: 'Malawi' },\n  { key: 'my', value: 'my', flag: 'my', text: 'Malaysia' },\n  { key: 'mv', value: 'mv', flag: 'mv', text: 'Maldives' },\n  { key: 'ml', value: 'ml', flag: 'ml', text: 'Mali' },\n  { key: 'mt', value: 'mt', flag: 'mt', text: 'Malta' },\n  { key: 'mh', value: 'mh', flag: 'mh', text: 'Marshall Islands' },\n  { key: 'mq', value: 'mq', flag: 'mq', text: 'Martinique' },\n  { key: 'mr', value: 'mr', flag: 'mr', text: 'Mauritania' },\n  { key: 'mu', value: 'mu', flag: 'mu', text: 'Mauritius' },\n  { key: 'yt', value: 'yt', flag: 'yt', text: 'Mayotte' },\n  { key: 'mx', value: 'mx', flag: 'mx', text: 'Mexico' },\n  { key: 'fm', value: 'fm', flag: 'fm', text: 'Micronesia' },\n  { key: 'md', value: 'md', flag: 'md', text: 'Moldova' },\n  { key: 'mc', value: 'mc', flag: 'mc', text: 'Monaco' },\n  { key: 'mn', value: 'mn', flag: 'mn', text: 'Mongolia' },\n  { key: 'me', value: 'me', flag: 'me', text: 'Montenegro' },\n  { key: 'ms', value: 'ms', flag: 'ms', text: 'Montserrat' },\n  { key: 'ma', value: 'ma', flag: 'ma', text: 'Morocco' },\n  { key: 'mz', value: 'mz', flag: 'mz', text: 'Mozambique' },\n  { key: 'mm', value: 'mm', flag: 'mm', text: 'Myanmar' },\n  { key: 'na', value: 'na', flag: 'na', text: 'Namibia' },\n  { key: 'nr', value: 'nr', flag: 'nr', text: 'Nauru' },\n  { key: 'np', value: 'np', flag: 'np', text: 'Nepal' },\n  { key: 'an', value: 'an', flag: 'an', text: 'Netherlands Antilles' },\n  { key: 'nl', value: 'nl', flag: 'nl', text: 'Netherlands' },\n  { key: 'nc', value: 'nc', flag: 'nc', text: 'New Caledonia' },\n  { key: 'pg', value: 'pg', flag: 'pg', text: 'New Guinea' },\n  { key: 'nz', value: 'nz', flag: 'nz', text: 'New Zealand' },\n  { key: 'ni', value: 'ni', flag: 'ni', text: 'Nicaragua' },\n  { key: 'ne', value: 'ne', flag: 'ne', text: 'Niger' },\n  { key: 'ng', value: 'ng', flag: 'ng', text: 'Nigeria' },\n  { key: 'nu', value: 'nu', flag: 'nu', text: 'Niue' },\n  { key: 'nf', value: 'nf', flag: 'nf', text: 'Norfolk Island' },\n  { key: 'kp', value: 'kp', flag: 'kp', text: 'North Korea' },\n  { key: 'mp', value: 'mp', flag: 'mp', text: 'Northern Mariana Islands' },\n  { key: 'no', value: 'no', flag: 'no', text: 'Norway' },\n  { key: 'om', value: 'om', flag: 'om', text: 'Oman' },\n  { key: 'pk', value: 'pk', flag: 'pk', text: 'Pakistan' },\n  { key: 'pw', value: 'pw', flag: 'pw', text: 'Palau' },\n  { key: 'ps', value: 'ps', flag: 'ps', text: 'Palestine' },\n  { key: 'pa', value: 'pa', flag: 'pa', text: 'Panama' },\n  { key: 'py', value: 'py', flag: 'py', text: 'Paraguay' },\n  { key: 'pe', value: 'pe', flag: 'pe', text: 'Peru' },\n  { key: 'ph', value: 'ph', flag: 'ph', text: 'Philippines' },\n  { key: 'pn', value: 'pn', flag: 'pn', text: 'Pitcairn Islands' },\n  { key: 'pl', value: 'pl', flag: 'pl', text: 'Poland' },\n  { key: 'pt', value: 'pt', flag: 'pt', text: 'Portugal' },\n  { key: 'pr', value: 'pr', flag: 'pr', text: 'Puerto Rico' },\n  { key: 'qa', value: 'qa', flag: 'qa', text: 'Qatar' },\n  { key: 're', value: 're', flag: 're', text: 'Reunion' },\n  { key: 'ro', value: 'ro', flag: 'ro', text: 'Romania' },\n  { key: 'ru', value: 'ru', flag: 'ru', text: 'Russia' },\n  { key: 'rw', value: 'rw', flag: 'rw', text: 'Rwanda' },\n  { key: 'sh', value: 'sh', flag: 'sh', text: 'Saint Helena' },\n  { key: 'kn', value: 'kn', flag: 'kn', text: 'Saint Kitts and Nevis' },\n  { key: 'lc', value: 'lc', flag: 'lc', text: 'Saint Lucia' },\n  { key: 'pm', value: 'pm', flag: 'pm', text: 'Saint Pierre' },\n  { key: 'vc', value: 'vc', flag: 'vc', text: 'Saint Vincent' },\n  { key: 'ws', value: 'ws', flag: 'ws', text: 'Samoa' },\n  { key: 'sm', value: 'sm', flag: 'sm', text: 'San Marino' },\n  { key: 'gs', value: 'gs', flag: 'gs', text: 'Sandwich Islands' },\n  { key: 'st', value: 'st', flag: 'st', text: 'Sao Tome' },\n  { key: 'sa', value: 'sa', flag: 'sa', text: 'Saudi Arabia' },\n  { key: 'sn', value: 'sn', flag: 'sn', text: 'Senegal' },\n  { key: 'cs', value: 'cs', flag: 'cs', text: 'Serbia' },\n  { key: 'rs', value: 'rs', flag: 'rs', text: 'Serbia' },\n  { key: 'sc', value: 'sc', flag: 'sc', text: 'Seychelles' },\n  { key: 'sl', value: 'sl', flag: 'sl', text: 'Sierra Leone' },\n  { key: 'sg', value: 'sg', flag: 'sg', text: 'Singapore' },\n  { key: 'sk', value: 'sk', flag: 'sk', text: 'Slovakia' },\n  { key: 'si', value: 'si', flag: 'si', text: 'Slovenia' },\n  { key: 'sb', value: 'sb', flag: 'sb', text: 'Solomon Islands' },\n  { key: 'so', value: 'so', flag: 'so', text: 'Somalia' },\n  { key: 'za', value: 'za', flag: 'za', text: 'South Africa' },\n  { key: 'kr', value: 'kr', flag: 'kr', text: 'South Korea' },\n  { key: 'es', value: 'es', flag: 'es', text: 'Spain' },\n  { key: 'lk', value: 'lk', flag: 'lk', text: 'Sri Lanka' },\n  { key: 'sd', value: 'sd', flag: 'sd', text: 'Sudan' },\n  { key: 'sr', value: 'sr', flag: 'sr', text: 'Suriname' },\n  { key: 'sj', value: 'sj', flag: 'sj', text: 'Svalbard' },\n  { key: 'sz', value: 'sz', flag: 'sz', text: 'Swaziland' },\n  { key: 'se', value: 'se', flag: 'se', text: 'Sweden' },\n  { key: 'ch', value: 'ch', flag: 'ch', text: 'Switzerland' },\n  { key: 'sy', value: 'sy', flag: 'sy', text: 'Syria' },\n  { key: 'tw', value: 'tw', flag: 'tw', text: 'Taiwan' },\n  { key: 'tj', value: 'tj', flag: 'tj', text: 'Tajikistan' },\n  { key: 'tz', value: 'tz', flag: 'tz', text: 'Tanzania' },\n  { key: 'th', value: 'th', flag: 'th', text: 'Thailand' },\n  { key: 'tl', value: 'tl', flag: 'tl', text: 'Timorleste' },\n  { key: 'tg', value: 'tg', flag: 'tg', text: 'Togo' },\n  { key: 'tk', value: 'tk', flag: 'tk', text: 'Tokelau' },\n  { key: 'to', value: 'to', flag: 'to', text: 'Tonga' },\n  { key: 'tt', value: 'tt', flag: 'tt', text: 'Trinidad' },\n  { key: 'tn', value: 'tn', flag: 'tn', text: 'Tunisia' },\n  { key: 'tr', value: 'tr', flag: 'tr', text: 'Turkey' },\n  { key: 'tm', value: 'tm', flag: 'tm', text: 'Turkmenistan' },\n  { key: 'tv', value: 'tv', flag: 'tv', text: 'Tuvalu' },\n  { key: 'ug', value: 'ug', flag: 'ug', text: 'Uganda' },\n  { key: 'ua', value: 'ua', flag: 'ua', text: 'Ukraine' },\n  { key: 'ae', value: 'ae', flag: 'ae', text: 'United Arab Emirates' },\n  { key: 'us', value: 'us', flag: 'us', text: 'United States' },\n  { key: 'uy', value: 'uy', flag: 'uy', text: 'Uruguay' },\n  { key: 'um', value: 'um', flag: 'um', text: 'Us Minor Islands' },\n  { key: 'vi', value: 'vi', flag: 'vi', text: 'Us Virgin Islands' },\n  { key: 'uz', value: 'uz', flag: 'uz', text: 'Uzbekistan' },\n  { key: 'vu', value: 'vu', flag: 'vu', text: 'Vanuatu' },\n  { key: 'va', value: 'va', flag: 'va', text: 'Vatican City' },\n  { key: 've', value: 've', flag: 've', text: 'Venezuela' },\n  { key: 'vn', value: 'vn', flag: 'vn', text: 'Vietnam' },\n  { key: 'wf', value: 'wf', flag: 'wf', text: 'Wallis and Futuna' },\n  { key: 'eh', value: 'eh', flag: 'eh', text: 'Western Sahara' },\n  { key: 'ye', value: 'ye', flag: 'ye', text: 'Yemen' },\n  { key: 'zm', value: 'zm', flag: 'zm', text: 'Zambia' },\n  { key: 'zw', value: 'zw', flag: 'zw', text: 'Zimbabwe' },\n];\n\nexport const LANGUAGE_OPTIONS = [\n  { key: 'Arabic', text: 'Arabic', value: 'Arabic' },\n  { key: 'Chinese', text: 'Chinese', value: 'Chinese' },\n  { key: 'Danish', text: 'Danish', value: 'Danish' },\n  { key: 'Dutch', text: 'Dutch', value: 'Dutch' },\n  { key: 'English', text: 'English', value: 'English' },\n  { key: 'French', text: 'French', value: 'French' },\n  { key: 'German', text: 'German', value: 'German' },\n  { key: 'Greek', text: 'Greek', value: 'Greek' },\n  { key: 'Hungarian', text: 'Hungarian', value: 'Hungarian' },\n  { key: 'Italian', text: 'Italian', value: 'Italian' },\n  { key: 'Japanese', text: 'Japanese', value: 'Japanese' },\n  { key: 'Korean', text: 'Korean', value: 'Korean' },\n  { key: 'Lithuanian', text: 'Lithuanian', value: 'Lithuanian' },\n  { key: 'Persian', text: 'Persian', value: 'Persian' },\n  { key: 'Polish', text: 'Polish', value: 'Polish' },\n  { key: 'Portuguese', text: 'Portuguese', value: 'Portuguese' },\n  { key: 'Russian', text: 'Russian', value: 'Russian' },\n  { key: 'Spanish', text: 'Spanish', value: 'Spanish' },\n  { key: 'Swedish', text: 'Swedish', value: 'Swedish' },\n  { key: 'Turkish', text: 'Turkish', value: 'Turkish' },\n  { key: 'Vietnamese', text: 'Vietnamese', value: 'Vietnamese' },\n];\n\nexport const TAG_OPTIONS = [\n  {\n    key: 'Important',\n    text: 'Important',\n    value: 'Important',\n    label: { color: 'red', empty: true, circular: true },\n  },\n  {\n    key: 'Announcement',\n    text: 'Announcement',\n    value: 'Announcement',\n    label: { color: 'blue', empty: true, circular: true },\n  },\n  {\n    key: 'Cannot Fix',\n    text: 'Cannot Fix',\n    value: 'Cannot Fix',\n    label: { color: 'black', empty: true, circular: true },\n  },\n  {\n    key: 'News',\n    text: 'News',\n    value: 'News',\n    label: { color: 'purple', empty: true, circular: true },\n  },\n  {\n    key: 'Enhancement',\n    text: 'Enhancement',\n    value: 'Enhancement',\n    label: { color: 'orange', empty: true, circular: true },\n  },\n  {\n    key: 'Change Declined',\n    text: 'Change Declined',\n    value: 'Change Declined',\n    label: { empty: true, circular: true },\n  },\n  {\n    key: 'Off Topic',\n    text: 'Off Topic',\n    value: 'Off Topic',\n    label: { color: 'yellow', empty: true, circular: true },\n  },\n  {\n    key: 'Interesting',\n    text: 'Interesting',\n    value: 'Interesting',\n    label: { color: 'pink', empty: true, circular: true },\n  },\n  {\n    key: 'Discussion',\n    text: 'Discussion',\n    value: 'Discussion',\n    label: { color: 'green', empty: true, circular: true },\n  },\n];\n\nexport type FlagNames = \n  'ad' | 'andorra' | 'ae' | 'united arab emirates' | 'uae' | 'af' | 'afghanistan' | 'ag' | 'antigua' | 'ai' |\n  'anguilla' | 'al' | 'albania' | 'am' | 'armenia' | 'an' | 'netherlands antilles' | 'ao' | 'angola' | 'ar' |\n  'argentina' | 'as' | 'american samoa' | 'at' | 'austria' | 'au' | 'australia' | 'aw' | 'aruba' | 'ax' |\n  'aland islands' | 'az' | 'azerbaijan' | 'ba' | 'bosnia' | 'bb' | 'barbados' | 'bd' | 'bangladesh' | 'be' |\n  'belgium' | 'bf' | 'burkina faso' | 'bg' | 'bulgaria' | 'bh' | 'bahrain' | 'bi' | 'burundi' | 'bj' | 'benin' |\n  'bm' | 'bermuda' | 'bn' | 'brunei' | 'bo' | 'bolivia' | 'br' | 'brazil' | 'bs' | 'bahamas' | 'bt' | 'bhutan' |\n  'bv' | 'bouvet island' | 'bw' | 'botswana' | 'by' | 'belarus' | 'bz' | 'belize' | 'ca' | 'canada' | 'cc' |\n  'cocos islands' | 'cd' | 'congo' | 'cf' | 'central african republic' | 'cg' | 'congo brazzaville' | 'ch' |\n  'switzerland' | 'ci' | 'cote divoire' | 'ck' | 'cook islands' | 'cl' | 'chile' | 'cm' | 'cameroon' | 'cn' |\n  'china' | 'co' | 'colombia' | 'cr' | 'costa rica' | 'cs' | 'cu' | 'cuba' | 'cv' | 'cape verde' | 'cx' |\n  'christmas island' | 'cy' | 'cyprus' | 'cz' | 'czech republic' | 'de' | 'germany' | 'dj' | 'djibouti' | 'dk' |\n  'denmark' | 'dm' | 'dominica' | 'do' | 'dominican republic' | 'dz' | 'algeria' | 'ec' | 'ecuador' | 'ee' |\n  'estonia' | 'eg' | 'egypt' | 'eh' | 'western sahara' | 'er' | 'eritrea' | 'es' | 'spain' | 'et' | 'ethiopia' |\n  'eu' | 'european union' | 'fi' | 'finland' | 'fj' | 'fiji' | 'fk' | 'falkland islands' | 'fm' | 'micronesia' |\n  'fo' | 'faroe islands' | 'fr' | 'france' | 'ga' | 'gabon' | 'gb' | 'united kingdom' | 'gd' | 'grenada' | 'ge' |\n  'georgia' | 'gf' | 'french guiana' | 'gh' | 'ghana' | 'gi' | 'gibraltar' | 'gl' | 'greenland' | 'gm' | 'gambia' |\n  'gn' | 'guinea' | 'gp' | 'guadeloupe' | 'gq' | 'equatorial guinea' | 'gr' | 'greece' | 'gs' | 'sandwich islands' |\n  'gt' | 'guatemala' | 'gu' | 'guam' | 'gw' | 'guinea-bissau' | 'gy' | 'guyana' | 'hk' | 'hong kong' | 'hm' |\n  'heard island' | 'hn' | 'honduras' | 'hr' | 'croatia' | 'ht' | 'haiti' | 'hu' | 'hungary' | 'id' | 'indonesia' |\n  'ie' | 'ireland' | 'il' | 'israel' | 'in' | 'india' | 'io' | 'indian ocean territory' | 'iq' | 'iraq' | 'ir' |\n  'iran' | 'is' | 'iceland' | 'it' | 'italy' | 'jm' | 'jamaica' | 'jo' | 'jordan' | 'jp' | 'japan' | 'ke' | 'kenya' |\n  'kg' | 'kyrgyzstan' | 'kh' | 'cambodia' | 'ki' | 'kiribati' | 'km' | 'comoros' | 'kn' | 'saint kitts and nevis' |\n  'kp' | 'north korea' | 'kr' | 'south korea' | 'kw' | 'kuwait' | 'ky' | 'cayman islands' | 'kz' | 'kazakhstan' |\n  'la' | 'laos' | 'lb' | 'lebanon' | 'lc' | 'saint lucia' | 'li' | 'liechtenstein' | 'lk' | 'sri lanka' | 'lr' |\n  'liberia' | 'ls' | 'lesotho' | 'lt' | 'lithuania' | 'lu' | 'luxembourg' | 'lv' | 'latvia' | 'ly' | 'libya' | 'ma' |\n  'morocco' | 'mc' | 'monaco' | 'md' | 'moldova' | 'me' | 'montenegro' | 'mg' | 'madagascar' | 'mh' |\n  'marshall islands' | 'mk' | 'macedonia' | 'ml' | 'mali' | 'mm' | 'myanmar' | 'burma' | 'mn' | 'mongolia' | 'mo' |\n  'macau' | 'mp' | 'northern mariana islands' | 'mq' | 'martinique' | 'mr' | 'mauritania' | 'ms' | 'montserrat' |\n  'mt' | 'malta' | 'mu' | 'mauritius' | 'mv' | 'maldives' | 'mw' | 'malawi' | 'mx' | 'mexico' | 'my' | 'malaysia' |\n  'mz' | 'mozambique' | 'na' | 'namibia' | 'nc' | 'new caledonia' | 'ne' | 'niger' | 'nf' | 'norfolk island' | 'ng' |\n  'nigeria' | 'ni' | 'nicaragua' | 'nl' | 'netherlands' | 'no' | 'norway' | 'np' | 'nepal' | 'nr' | 'nauru' |\n  'nu' | 'niue' | 'nz' | 'new zealand' | 'om' | 'oman' | 'pa' | 'panama' | 'pe' | 'peru' | 'pf' | 'french polynesia' |\n  'pg' | 'new guinea' | 'ph' | 'philippines' | 'pk' | 'pakistan' | 'pl' | 'poland' | 'pm' | 'saint pierre' | 'pn' |\n  'pitcairn islands' | 'pr' | 'puerto rico' | 'ps' | 'palestine' | 'pt' | 'portugal' | 'pw' | 'palau' | 'py' |\n  'paraguay' | 'qa' | 'qatar' | 're' | 'reunion' | 'ro' | 'romania' | 'rs' | 'serbia' | 'ru' | 'russia' | 'rw' |\n  'rwanda' | 'sa' | 'saudi arabia' | 'sb' | 'solomon islands' | 'sc' | 'seychelles' | 'gb sct' | 'scotland' | 'sd' |\n  'sudan' | 'se' | 'sweden' | 'sg' | 'singapore' | 'sh' | 'saint helena' | 'si' | 'slovenia' | 'sj' | 'svalbard' |\n  'jan mayen' | 'sk' | 'slovakia' | 'sl' | 'sierra leone' | 'sm' | 'san marino' | 'sn' | 'senegal' | 'so' |\n  'somalia' | 'sr' | 'suriname' | 'st' | 'sao tome' | 'sv' | 'el salvador' | 'sy' | 'syria' | 'sz' | 'swaziland' |\n  'tc' | 'caicos islands' | 'td' | 'chad' | 'tf' | 'french territories' | 'tg' | 'togo' | 'th' | 'thailand' | 'tj' |\n  'tajikistan' | 'tk' | 'tokelau' | 'tl' | 'timorleste' | 'tm' | 'turkmenistan' | 'tn' | 'tunisia' | 'to' | 'tonga' |\n  'tr' | 'turkey' | 'tt' | 'trinidad' | 'tv' | 'tuvalu' | 'tw' | 'taiwan' | 'tz' | 'tanzania' | 'ua' | 'ukraine' |\n  'ug' | 'uganda' | 'um' | 'us minor islands' | 'us' | 'america' | 'united states' | 'uy' | 'uruguay' | 'uz' |\n  'uzbekistan' | 'va' | 'vatican city' | 'vc' | 'saint vincent' | 've' | 'venezuela' | 'vg' |\n  'british virgin islands' | 'vi' | 'us virgin islands' | 'vn' | 'vietnam' | 'vu' | 'vanuatu' | 'gb wls' | 'wales' |\n  'wf' | 'wallis and futuna' | 'ws' | 'samoa' | 'ye' | 'yemen' | 'yt' | 'mayotte' | 'za' | 'south africa' | 'zm' |\n  'zambia' | 'zw' | 'zimbabwe';\n","import { MemberOption } from './constants';\nimport { MemberID, nameToMemberOption, MemberData } from './components/Member';\nimport * as _ from 'lodash';\nimport * as React from 'react';\nimport { Dictionary } from './types';\n\nexport function implies(a: boolean, b: boolean) {\n  return a ? b : true;\n}\n\nexport function objectToList<T>(object: Dictionary<string, T>): T[] {\n  return Object.keys(object).map(key => object[key]);\n}\n\nexport function makeDropdownOption<T>(x: T) {\n  return { key: x, value: x, text: x };\n}\n\nexport function membersToOptions(members: Dictionary<MemberID, MemberData> | undefined): MemberOption[] {\n  const options = objectToList(members || {})\n    .map(x => nameToMemberOption(x.name));\n\n  return _.sortBy(options, (option: MemberOption) => option.text);\n}\n\nexport function useLocalStorage(key: any, initialValue: any) {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = React.useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.log(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value: any) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      console.log(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}\n\nexport function uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}","import { makeDropdownOption } from '../utils';\nimport { Form, DropdownProps, Select, Button } from 'semantic-ui-react';\nimport * as React from 'react';\n\nexport enum Unit {\n  Minutes = 'min',\n  Seconds = 'sec'\n}\n\nexport function getSeconds(duration: number, unit: Unit): number {\n  return duration * (unit === Unit.Minutes ? 60 : 1);\n}\n\nexport const UNIT_OPTIONS = [\n  Unit.Seconds,\n  Unit.Minutes\n].map(makeDropdownOption);\n\ninterface Props {\n  unitValue: Unit;\n  durationValue?: string;\n  onUnitChange: (event: React.SyntheticEvent<HTMLElement>, data: DropdownProps) => void;\n  onDurationChange: (event: React.FormEvent<HTMLInputElement>) => void;\n  onSet?: () => void;\n  label?: string;\n  error?: boolean;\n  placeholder?: string;\n  loading?: boolean;\n}\n\nexport class TimerSetter extends React.Component<Props, {}> {\n  \n  isInvalid = () => {\n    const { durationValue: n } = this.props;\n\n    return !n || isNaN(Number(n)) || Number(n) <= 0;\n  }\n\n  handleOnSet = () => {\n    const { props, isInvalid } = this;\n\n    if (props.onSet && !isInvalid()) { // defensive, button shouldn't exist if we don't have it\n      props.onSet();\n    }\n  }\n\n  render() {\n    const { props, isInvalid, handleOnSet } = this;\n\n    return (\n      <Form.Input\n        value={props.durationValue || ''}\n        placeholder={props.placeholder || 'Duration'}\n        onChange={props.onDurationChange}\n        action\n        loading={props.loading}\n        fluid\n        error={isInvalid() || props.error}\n        label={props.label}\n      >\n        {/* <input style={{ 'text-align': 'right' }} /> */}\n        <input />\n        {/* <Button icon=\"minus\" onClick={this.decrement} />\n        <Button icon=\"plus\"  onClick={this.increment} /> */}\n        <Select \n          value={props.unitValue} \n          options={UNIT_OPTIONS} \n          compact \n          button \n          onChange={props.onUnitChange} \n        />\n        {props.onSet && (<Button onClick={handleOnSet}>Set</Button>)}\n      </Form.Input>\n    );\n  }\n}","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport { Form, Segment, Button, Divider, Progress, DropdownProps, ButtonProps, Icon, Label } from 'semantic-ui-react';\nimport { Unit, TimerSetter, getSeconds } from './TimerSetter';\nimport _ from 'lodash';\nimport { DEFAULT_SPEAKER_TIME_SECONDS } from './Caucus';\n\ninterface Props {\n  name: string;\n  timerFref: firebase.database.Reference;\n  onChange: (timer: TimerData) => void;\n  toggleKeyCode?: number;\n  defaultUnit: Unit;\n  defaultDuration: number;\n}\n\ninterface State {\n  timer?: TimerData;\n  timerId?: NodeJS.Timer;\n  skew?: number;\n  offsetRef: firebase.database.Reference;\n  unitDropdown: Unit;\n  durationField: string;\n  mute: boolean;\n}\n\nexport interface TimerData {\n  elapsed: number;\n  remaining: number;\n  ticking: boolean | number;\n}\n\nexport const DEFAULT_TIMER = {\n  elapsed: 0,\n  remaining: DEFAULT_SPEAKER_TIME_SECONDS,\n  ticking: false\n};\n\nexport function hhmmss(seconds: number): string {\n  let sign = '';\n\n  seconds = seconds || 0;\n\n  if (seconds < 0) {\n    sign = '-';\n    seconds = Math.abs(seconds);\n  }\n\n  const minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n\n  const secondsFormatted = _.padStart((seconds % 60).toString(), 2, '0');\n  const minutesFormatted = _.padStart((minutes % 60).toString(), 2, '0');\n\n  if (hours !== 0) {\n    return sign + hours + ':' + minutesFormatted + ':' + secondsFormatted;\n  } else {\n    return sign + minutes + ':' + secondsFormatted;\n  }\n}\n\nexport function getTimeWithSkewCorrection(skew: number | undefined) {\n  const millis =  skew ? skew + (new Date).getTime() : (new Date).getTime();\n\n  return Math.floor(millis / 1000);\n}\n\nexport function toggleTicking({\n  timer, \n  timerFref,\n  skew\n}: {\n  timer?: TimerData,\n  timerFref: firebase.database.Reference\n  skew?: number,\n}) {\n  if (timer) {\n    const newTimer = {\n      elapsed: timer.elapsed,\n      remaining: timer.remaining,\n      ticking: timer.ticking ? false : getTimeWithSkewCorrection(skew)\n    };\n\n    timerFref.set(newTimer);\n  }\n}\n\nexport default class Timer extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const { defaultUnit, defaultDuration } = this.props;\n\n    this.state = {\n      offsetRef: firebase.database().ref('/.info/serverTimeOffset'),\n      unitDropdown: defaultUnit || Unit.Minutes,\n      durationField: defaultDuration ? defaultDuration.toString() : '1',\n      mute: true\n    };\n  }\n\n  tick = () => {\n    const timer = this.state.timer;\n\n    if (timer && timer.ticking) {\n      let newTimer = {\n        ...timer,\n        elapsed: timer.elapsed + 1,\n        remaining: timer.remaining - 1,\n      };\n\n      this.setState({ timer: newTimer });\n      this.props.onChange(newTimer);\n\n      const { mute } = this.state;\n\n      if (newTimer.remaining === 0 && !mute) {\n        console.info('[BEEP] Time elapsed');\n        this.playSound();\n      }\n    }\n  }\n\n  toggleMute = () => {\n    this.setState(prevState => ({ mute: !prevState.mute }));\n  }\n\n  localToggleTicking = () => {\n    const { timer, skew } = this.state;\n    const { timerFref } = this.props;\n\n    toggleTicking({ timer, timerFref, skew });\n  }\n\n  handleKeyDown = (ev: KeyboardEvent) => {\n    if (this.props.toggleKeyCode === ev.keyCode && ev.altKey) {\n      this.localToggleTicking()\n    }\n  }\n\n  skewCallback = (skew: firebase.database.DataSnapshot | null) => {\n    if (skew) {\n      console.info('Detected clock skew is', skew.val(), 'millis');\n      this.setState({ skew: skew.val() });\n    }\n  }\n\n  timerCallback = (timer: firebase.database.DataSnapshot | null) => {\n    if (timer && timer.val()) {\n      let timerData = timer.val();\n\n      const { skew } = this.state;\n\n      const now = getTimeWithSkewCorrection(skew)\n\n      if (timerData.ticking) {\n        const remaining = timerData.remaining - (now - timerData.ticking);\n        const elapsed = timerData.elapsed + (now - timerData.ticking);\n        // HACK: Handle late mounts by checking the difference between when the clock started clicking\n        // and when the timer mounted / recieved new info\n        timerData = { ...timerData, remaining , elapsed };\n      }\n\n      this.setState({ timer: timerData });\n      this.props.onChange(timerData);\n    }\n  }\n\n  componentDidMount() {\n    const { handleKeyDown, timerCallback, tick, props, state, skewCallback } = this;\n\n    props.timerFref.on('value', timerCallback);\n    state.offsetRef.on('value', skewCallback);\n\n    this.setState({ timerId: setInterval(tick, 1000) });\n\n    document.addEventListener<'keydown'>('keydown', handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    const { handleKeyDown, timerCallback, skewCallback, tick, props, state } = this;\n    const { timerId } = this.state;\n\n    props.timerFref.off('value', timerCallback);\n    state.offsetRef.off('value', skewCallback);\n\n    if (timerId) {\n      clearInterval(timerId);\n    }\n\n    document.removeEventListener('keydown', handleKeyDown);\n  }\n\n  increment = () => {\n    const num = Number(this.state.durationField);\n\n    if (num) {\n      this.setState({ durationField: (num + 1).toString() });\n    }\n  }\n  \n  playSound = () => {\n    // @ts-ignore\n    var context = new (window.audioContext || window.AudioContext || window.webkitAudioContext)();\n\n    var osc = context.createOscillator(); \n    osc.type = 'sine'; // sine, square, sawtooth, triangle\n    osc.frequency.value = 440; // Hz\n\n    osc.connect(context.destination); \n    osc.start(); \n    osc.stop(context.currentTime + 0.35); \n  }\n\n  set = () => {\n    const duration = Number(this.state.durationField);\n\n    if (duration) {\n      const newTimer = {\n        elapsed: 0,\n        remaining: getSeconds(duration, this.state.unitDropdown),\n        ticking: false\n      };\n\n      this.props.timerFref.set(newTimer);\n    }\n  }\n\n  decrement = () => {\n    const num = Number(this.state.durationField);\n\n    if (num) {\n      this.setState({ durationField: (num - 1).toString() });\n    }\n  }\n\n  setUnit = (event: React.SyntheticEvent<HTMLElement>, data: DropdownProps) => {\n    this.setState({ unitDropdown: data.value as Unit || Unit.Seconds });\n  }\n\n  setDuration = (e: React.FormEvent<HTMLInputElement>) =>\n    this.setState({ durationField: e.currentTarget.value })\n\n  render() {\n    const { setUnit, setDuration } = this;\n    const { timer, mute } = this.state;\n\n    const remaining = timer ? timer.remaining : DEFAULT_TIMER.remaining;\n    const elapsed = timer ? timer.elapsed : DEFAULT_TIMER.elapsed;\n\n    const formatted = hhmmss(remaining);\n\n    // For use with `indicating` on `Progress`\n    const percentage = (remaining / (remaining + elapsed)) * 100;\n\n    return (\n      <Segment textAlign=\"center\" >\n        <Label attached=\"top left\" size=\"large\">{this.props.name}</Label>\n        <Button\n          loading={!timer}\n          active={timer ? !!timer.ticking : false}\n          negative={timer ? timer.remaining < 0 : false}\n          size=\"massive\"\n          onClick={() => this.localToggleTicking()}\n        >\n          {formatted}\n        </Button>\n\n        <Button\n          icon\n          active={!mute}\n          onClick={this.toggleMute}\n          negative={timer ? timer.remaining === 0 && !!timer.ticking : false}\n          loading={timer ? timer.remaining === 0 && !!timer.ticking : false}\n        >\n          <Icon name={mute ? 'alarm mute' : 'alarm'} />\n        </Button>\n\n        <Progress percent={percentage} active={false} indicating={true}/>\n        {/* <Statistic>\n          <Statistic.Value>{this.state.timer.remaining}</Statistic.Value>\n        </Statistic>\n        <Checkbox toggle checked={this.state.timer.ticking} onChange={this.toggleHandler} /> */}\n        <Divider />\n        <Form>\n          <TimerSetter\n            unitValue={this.state.unitDropdown}\n            durationValue={this.state.durationField}\n            onDurationChange={setDuration}\n            onUnitChange={setUnit}\n            onSet={this.set}\n          />\n        </Form>\n      </Segment>\n    );\n  }\n}","import * as firebase from 'firebase/app';\n\nimport { CommitteeID } from '../components/Committee';\nimport { CaucusData, CaucusID, CaucusStatus } from '../components/Caucus';\nimport { TimerData } from '../components/Timer';\nimport { SpeakerEvent } from '../components/caucus/SpeakerFeed';\n\nexport const putCaucus = \n  (committeeID: CommitteeID, caucusData: CaucusData): firebase.database.ThenableReference => {\n  const ref = firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('caucuses')\n    .push();\n\n  ref.set(caucusData);\n\n  return ref;\n};\n\nexport const putSpeaking =\n  (committeeID: CommitteeID, caucusID: CaucusID, speaker: SpeakerEvent): Promise<any> => {\n\n  console.debug(speaker);\n\n  return firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('caucuses')\n    .child(caucusID)\n    .child('speaking')\n    .set(speaker);\n}\n\n// tslint:disable-next-line\nexport const closeCaucus = \n  (committeeID: CommitteeID, caucusID: CaucusID): Promise<any> => {\n  return firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('caucuses')\n    .child(caucusID)\n    .child('status')\n    .set(CaucusStatus.Closed);\n};\n\nexport interface Lifecycle {\n  history: firebase.database.Reference;\n  speakingData?: SpeakerEvent;\n  speaking: firebase.database.Reference;\n  timerData: TimerData;\n  timer: firebase.database.Reference;\n  yielding: boolean;\n  queueHeadData?: SpeakerEvent;\n  queueHead?: firebase.database.Reference;\n  timerResetSeconds: number;\n}\n\nexport const runLifecycle = (lifecycle: Lifecycle) => {\n  const { history, speakingData, speaking, timerData, timer, \n    timerResetSeconds, yielding, queueHeadData, queueHead } = lifecycle;\n\n  let additionalYieldTime = 0;\n\n  // Move the person currently speaking into history...\n  if (speakingData) {\n    history.push().set({ ...speakingData, duration: timerData.elapsed });\n    speaking.set(null);\n\n    if (yielding) {\n      additionalYieldTime = timerData.remaining;\n    }\n\n    timer.update({\n      elapsed: 0,\n      remaining: timerResetSeconds,\n      ticking: false // and stop it\n    });\n  } // do nothing if no-one is currently speaking\n\n  if (queueHead && queueHeadData) {\n    speaking.set({\n      ...queueHeadData,\n      duration: queueHeadData.duration + additionalYieldTime\n    });\n\n    timer.update({\n      elapsed: 0,\n      remaining: queueHeadData.duration + additionalYieldTime, // load the appropriate time \n      ticking: false // and stop it\n    });\n\n    queueHead.set(null);\n  }\n};","/**\n * This is truly the most fucked up file in the entire codebase.\n * Mercy up on all those who must modify this.\n * ***** REPLY from @vicbab: smh\n */\n\nimport * as firebase from 'firebase/app';\nimport { TimerData } from '../Timer';\nimport * as React from 'react';\nimport { Feed, Icon, Flag, Label, FeedContent, FeedEvent } from 'semantic-ui-react';\nimport { runLifecycle, Lifecycle } from '../../actions/caucus-actions';\nimport { parseFlagName } from '../Member';\nimport { Dictionary } from '../../types';\nimport { DragDropContext, Droppable, Draggable, DraggableProvided, DropResult } from 'react-beautiful-dnd';\nimport { useAuthState } from 'react-firebase-hooks/auth';\n\nexport enum Stance {\n  For = 'For',\n  Neutral = 'Neutral',\n  Against = 'Against'\n}\n\nexport interface SpeakerEvent {\n  who: string;\n  stance: Stance;\n  duration: number;\n}\n\nconst StanceIcon = (props: { stance: Stance }) => {\n  switch (props.stance) {\n    case Stance.For:\n      return <Icon name=\"thumbs up outline\" />;\n    case Stance.Against:\n      return <Icon name=\"thumbs down outline\" />;\n    default:\n      return <Icon name=\"hand point right outline\" />;\n  }\n};\n\nexport class SpeakerFeedEntry extends React.PureComponent<{\n  data?: SpeakerEvent,\n  speaking?: SpeakerEvent,\n  fref: firebase.database.Reference,\n  speakerTimer: TimerData,\n  draggableProvided?: DraggableProvided\n}> {\n\n  yieldHandler = () => {\n    const { fref, data, speakerTimer, speaking } = this.props;\n\n    const queueHeadDetails = {\n      queueHeadData: data,\n      queueHead: fref\n    };\n\n    // HACK\n    // HERE BE DRAGONS\n    // The only reason I'm doing this is because I honestly couldn't give a shit about propogating\n    // the caucusRef all the way down. Furthermore, the only time this should ever be called is when the\n    // SpeakerEvent is in the \"queue\" zone, meaning we'll pop up into the \"caucus\" field.\n    const caucusRef = (fref.parent as firebase.database.Reference).parent as firebase.database.Reference;\n\n    const lifecycle: Lifecycle = {\n      history: caucusRef.child('history'),\n      speaking: caucusRef.child('speaking'),\n      speakingData: speaking,\n      timerData: speakerTimer,\n      timer: caucusRef.child('speakerTimer'),\n      yielding: true,\n      timerResetSeconds: 0 // this shouldn't ever be used when yielding\n    };\n\n    runLifecycle({ ...lifecycle, ...queueHeadDetails });\n  };\n\n  renderContent() {\n    const { data, speaking, fref } = this.props;\n\n    return (\n      <Feed.Content>\n        <Feed.Summary>\n          <Feed.User>\n            {data && <Flag name={parseFlagName(data.who)} />}\n            {data ? data.who : ''}\n          </Feed.User>\n          <Feed.Date>{data ? data.duration.toString() + ' seconds': ''}</Feed.Date>\n        </Feed.Summary>\n        <Feed.Meta>\n          <Feed.Like>\n            {data && <StanceIcon stance={data.stance} />}\n            {data ? data.stance : ''}\n          </Feed.Like>\n          {data && <Label size=\"mini\" as=\"a\" onClick={() => fref.remove()}>\n            Remove\n          </Label>}\n          {data && speaking && (<Label size=\"mini\" as=\"a\" onClick={this.yieldHandler}>\n            Yield\n          </Label>)}\n        </Feed.Meta>\n      </Feed.Content>\n    )\n  }\n\n  render() {\n    const { draggableProvided } = this.props;\n\n    return draggableProvided ? (\n      <div\n        className=\"event\" // XXX: quite possibly the most bullshit hack known to man\n        ref={draggableProvided.innerRef}\n          {...draggableProvided.dragHandleProps}\n          {...draggableProvided.draggableProps}>\n            {this.renderContent()}\n      </div>\n    ) : <FeedEvent>\n      {this.renderContent()}\n    </FeedEvent>\n  }\n};\n\nfunction reorder<T>(list: T[], startIndex: number, endIndex: number) {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n\n  return result;\n};\n\nexport const SpeakerFeed = (props: {\n  data?: Dictionary<string, SpeakerEvent>,\n  queueFref: firebase.database.Reference,\n  speaking?: SpeakerEvent,\n  speakerTimer: TimerData\n}) => {\n  const { data, queueFref, speaking, speakerTimer } = props;\n  const [ user  ] = useAuthState(firebase.auth());\n\n  const events = data || {};\n\n  const eventItems = Object.keys(events).map((key, index) =>\n    (\n\n      <Draggable key={key} draggableId={key} index={index}>\n        {(provided, snapshot) =>\n\n          <SpeakerFeedEntry\n            draggableProvided={provided}\n            key={key}\n            data={events[key]}\n            fref={queueFref.child(key)}\n            speaking={speaking}\n            speakerTimer={speakerTimer}\n          />\n          \n        }\n      </Draggable>\n    )\n  );\n\n  const onDragEnd = (result: DropResult) => {\n    // dropped outside the list\n    if (!result.destination) {\n      return;\n    }\n\n    // no auth\n    if (!user) {\n      return;\n    }\n\n    const events = data || {};\n\n    const reorderedKeys = reorder(\n      Object.keys(events),\n      result.source.index,\n      result.destination.index\n    );\n\n    queueFref.set({});\n\n    reorderedKeys.forEach(key => {\n      const se = (data || {})[key]\n\n      if (se) {\n        queueFref.push().set(se);\n      }\n    });\n  }\n\n  return (\n    <DragDropContext\n      onDragEnd={onDragEnd}\n    >\n      <Droppable droppableId=\"droppable\">\n        {(provided, snapshot) =>\n          <div\n            ref={provided.innerRef}\n            {...provided.droppableProps}\n          >\n            <Feed\n              size=\"large\"\n            >\n              {eventItems}\n            </Feed>\n          </div>\n        }\n      </Droppable>\n    </DragDropContext>\n  );\n};\n","import { TextAreaProps, DropdownProps, CheckboxProps } from 'semantic-ui-react';\nimport { MemberOption } from '../constants';\n\n// Ideally we'd be able to give this a type parameter to constrain the field\nexport function fieldHandler<T>\n  (fref: firebase.database.Reference, field: keyof T) {\n  return (e: React.FormEvent<HTMLInputElement>) =>\n    fref.child(field.toString()).set(e.currentTarget.value);\n}\n\nfunction lens<P, S>(comp: React.Component<P, S>, field: keyof S, target: string, value: any) {\n    // @ts-ignore\n    comp.setState(prevState => {\n\n      // @ts-ignore\n      const old: object = prevState[field];\n\n      return {\n        [field]: {\n          ...old,\n          [target]: value\n        }\n      };\n    });\n}\n\nexport function stateFieldHandler<P, S>\n  (comp: React.Component<P, S>, field: keyof S, target: string) {\n  return (e: React.FormEvent<HTMLInputElement>) =>\n    lens(comp, field, target, e.currentTarget.value);\n}\n\nexport function validatedNumberFieldHandler<T>\n  (fref: firebase.database.Reference, field: keyof T) {\n  return (e: React.FormEvent<HTMLInputElement>) => {\n    const n: number = Number(e.currentTarget.value);\n\n    fref.child(field.toString()).set(n ? n : {});\n  };\n}\n\nexport function clearableZeroableValidatedNumberFieldHandler<T>\n  (fref: firebase.database.Reference, field: keyof T) {\n  return (e: React.FormEvent<HTMLInputElement>) => {\n\n    const v = e.currentTarget.value;\n    const n: number = Number(e.currentTarget.value);\n\n    let result = {};\n\n    if (v === '') {\n      result = {}\n    } else if (n) {\n      result = n\n    } else if (n === 0) {\n      result = 0\n    }\n\n    fref.child(field.toString()).set(result);\n  };\n}\n\nexport function stateValidatedNumberFieldHandler<P, S>\n  (comp: React.Component<P, S>, field: keyof S, target: string) {\n  return (e: React.FormEvent<HTMLInputElement>) => {\n    const n: number = Number(e.currentTarget.value);\n\n    lens(comp, field, target, n ? n : null);\n  };\n}\n\nexport function textAreaHandler<T>\n  (fref: firebase.database.Reference, field: keyof T) {\n  return (event: React.FormEvent<HTMLTextAreaElement>, data: TextAreaProps) =>\n    fref.child(field.toString()).set(data.value);\n}\n\nexport function stateTextAreaHandler<P, S>\n  (comp: React.Component<P, S>, field: keyof S, target: string) {\n  return (event: React.FormEvent<HTMLTextAreaElement>, data: TextAreaProps) =>\n    lens(comp, field, target, data.value);\n}\n\nexport function dropdownHandler<T>\n  (fref: firebase.database.Reference, field: keyof T) {\n  return (event: React.SyntheticEvent<HTMLElement>, data: DropdownProps) =>\n    fref.child(field.toString()).set(data.value);\n}\n\nexport function stateDropdownHandler<P, S>\n  (comp: React.Component<P, S>, field: keyof S, target: string) {\n  return (event: React.SyntheticEvent<HTMLElement>, data: DropdownProps) =>\n    lens(comp, field, target, data.value);\n}\n\nexport function checkboxHandler<T>\n  (fref: firebase.database.Reference, field: keyof T) {\n  return (event: React.FormEvent<HTMLInputElement>, data: CheckboxProps) =>\n    fref.child(field.toString()).set(data.checked);\n}\n\nexport function memberDropdownHandler<T>\n  (fref: firebase.database.Reference, field: keyof T, memberOptions: MemberOption[]) {\n  return (event: React.SyntheticEvent<HTMLElement>, data: DropdownProps) =>\n    fref.child(field.toString()).set(memberOptions.filter(c => c.value === data.value)[0].text);\n}\n\nexport function stateMemberDropdownHandler<P, S>\n  (comp: React.Component<P, S>, field: keyof S, target: string, memberOptions: MemberOption[]) {\n  return (event: React.SyntheticEvent<HTMLElement>, data: DropdownProps) =>\n    lens(comp, field, target, memberOptions.filter(c => c.value === data.value)[0].text);\n}","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport { MemberData } from '../Member';\nimport { CaucusData, recoverDuration, recoverUnit } from '../Caucus';\nimport { MemberOption } from '../../constants';\nimport { Segment, Button, Form, DropdownProps, Label } from 'semantic-ui-react';\nimport { TimerSetter, Unit } from '../TimerSetter';\nimport { SpeakerEvent, Stance } from '..//caucus/SpeakerFeed';\nimport { checkboxHandler, validatedNumberFieldHandler, dropdownHandler } from '../../actions/handlers';\nimport { membersToOptions } from '../../utils';\nimport { Dictionary } from '../../types';\n\ninterface Props {\n  caucus?: CaucusData;\n  members?: Dictionary<string, MemberData>;\n  caucusFref: firebase.database.Reference;\n}\n\nexport default function CaucusQueuer(props: Props) {\n  const { members, caucus, caucusFref } = props;\n  const [queueMember, setQueueMember] = React.useState<MemberOption | undefined>(undefined);\n\n  const setStance = (stance: Stance) => () => {\n    const { caucus } = props;\n\n    const duration = Number(recoverDuration(caucus));\n\n    if (duration && queueMember) {\n      const newEvent: SpeakerEvent = {\n        who: queueMember.text,\n        stance: stance,\n        duration: recoverUnit(caucus) === Unit.Minutes ? duration * 60 : duration,\n      };\n\n      props.caucusFref.child('queue').push().set(newEvent);\n    }\n  }\n\n  const setMember = (event: React.SyntheticEvent<HTMLElement>, data: DropdownProps): void => {\n    const { members } = props;\n    const memberOptions = membersToOptions(members);\n\n    setQueueMember(memberOptions.filter(c => c.value === data.value)[0]);\n  }\n\n  const memberOptions = membersToOptions(members);\n  const duration = recoverDuration(caucus);\n  const disableButtons = !queueMember || !duration;\n\n  return (\n    <Segment textAlign=\"center\">\n      <Label attached=\"top left\" size=\"large\">Queue</Label>\n      <Form>\n        <Form.Dropdown\n          icon=\"search\"\n          value={queueMember ? queueMember.value : undefined}\n          search\n          selection\n          loading={!caucus}\n          error={!queueMember}\n          onChange={setMember}\n          options={memberOptions}\n        />\n        <TimerSetter\n          loading={!caucus}\n          unitValue={recoverUnit(caucus)}\n          placeholder=\"Speaking time\"\n          durationValue={duration ? duration.toString() : undefined}\n          onDurationChange={validatedNumberFieldHandler(caucusFref, 'speakerDuration')}\n          onUnitChange={dropdownHandler(caucusFref, 'speakerUnit')}\n        />\n        <Form.Checkbox\n          label=\"Delegates can queue\"\n          indeterminate={!caucus}\n          toggle\n          checked={caucus ? (caucus.queueIsPublic || false) : false} // zoo wee mama\n          onChange={checkboxHandler<CaucusData>(caucusFref, 'queueIsPublic')}\n        />\n        <Button.Group size=\"large\" fluid>\n          <Button\n            content=\"For\"\n            disabled={disableButtons}\n            onClick={setStance(Stance.For)}\n          />\n          <Button.Or />\n          <Button\n            disabled={disableButtons}\n            content=\"Neutral\"\n            onClick={setStance(Stance.Neutral)}\n          />\n          <Button.Or />\n          <Button\n            disabled={disableButtons}\n            content=\"Against\"\n            onClick={setStance(Stance.Against)}\n          />\n        </Button.Group>\n      </Form>\n    </Segment>\n  );\n}","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport { CaucusData, recoverUnit, recoverDuration } from '../Caucus';\nimport { TimerData, toggleTicking } from '../Timer';\nimport { Segment, Button, Icon, Label, Popup } from 'semantic-ui-react';\nimport { runLifecycle, Lifecycle } from '../../actions/caucus-actions';\nimport { SpeakerEvent, Stance } from './SpeakerFeed';\nimport { SpeakerFeed } from './SpeakerFeed';\nimport _ from 'lodash';\nimport { Unit } from '../TimerSetter';\nimport { useObjectVal } from 'react-firebase-hooks/database';\nimport { useAuthState } from 'react-firebase-hooks/auth';\n\ninterface Props {\n  caucus?: CaucusData;\n  speakerTimer: TimerData;\n  fref: firebase.database.Reference;\n  autoNextSpeaker: boolean;\n}\n\nexport function CaucusNextSpeaking(props: Props) {\n  const [user] = useAuthState(firebase.auth());\n  console.log(\"allo la gagne\")\n  const handleKeyDown = (ev: KeyboardEvent) => {\n    // if changing this, update Help\n    if (ev.keyCode === 78 && ev.altKey) {\n      nextSpeaker();\n    }\n  };\n\n  const interlace = () => {\n    if (!props.caucus) {\n      return;\n    }\n\n    if (!user) {\n      return;\n    }\n\n    const q = props.caucus.queue || {};\n\n    const vs: SpeakerEvent[] = _.values(q);\n\n    const fors     = vs.filter((se) => se.stance === Stance.For);\n    const againsts = vs.filter((se) => se.stance === Stance.Against);\n    const neutrals = vs.filter((se) => se.stance === Stance.Neutral);\n\n    const interlaced = _.flatten(_.zip(fors, againsts, neutrals));\n\n    props.fref.child('queue').set({});\n\n    interlaced.forEach((se: SpeakerEvent | undefined) => {\n      if (se) {\n        props.fref.child('queue').push().set(se);\n      }\n    });\n  };\n\n  const nextSpeaker = () => {\n    if (!props.caucus) {\n      return;\n    }\n\n    const q = props.caucus.queue || {};\n\n    const queueHeadKey = Object.keys(q)[0];\n\n    let queueHeadDetails = {};\n\n    if (queueHeadKey) {\n      queueHeadDetails = {\n        queueHeadData: q[queueHeadKey],\n        queueHead: props.fref.child('queue').child(queueHeadKey)\n      };\n    }\n\n    const duration = recoverDuration(props.caucus);\n\n    const speakerSeconds: number = duration\n      ? duration * (recoverUnit(props.caucus) === Unit.Minutes ? 60 : 1)\n      : 60;\n\n    const lifecycle: Lifecycle = {\n      history: props.fref.child('history'),\n      speakingData: props.caucus.speaking,\n      speaking: props.fref.child('speaking'),\n      timerData: props.speakerTimer,\n      timer: props.fref.child('speakerTimer'),\n      yielding: false,\n      timerResetSeconds: speakerSeconds\n    };\n\n    runLifecycle({ ...lifecycle, ...queueHeadDetails });\n  };\n\n  // TODO: Improve this dirty fix\n  let skew: any\n  skew = useObjectVal<number>(firebase.database().ref('/.info/serverTimeOffset'));\n\n  const startTimer = () => {\n    toggleTicking({\n      timerFref: props.fref.child('speakerTimer'),\n      timer: props.speakerTimer,\n      skew: skew.value\n    });\n  };\n\n  const { caucus } = props;\n  const { ticking } = props.speakerTimer;\n\n  const queue = caucus ? caucus.queue : {};\n  const hasNowSpeaking = caucus ? !!caucus.speaking : false;\n  const queueLength = _.values(queue).length;\n  const hasNextSpeaking = queueLength > 0;\n  const interlaceable = queueLength > 1;\n  const nextable = hasNowSpeaking || hasNextSpeaking;\n\n  const stageButton = (\n    <Button\n      basic\n      icon\n      positive\n      disabled={!nextable}\n      onClick={nextSpeaker}\n    >\n      <Icon name=\"arrow up\" />\n      Stage\n    </Button>\n  );\n\n  const startButton = (\n    <Button\n      basic\n      icon\n      positive\n      disabled={!nextable}\n      onClick={startTimer}\n    >\n      <Icon name=\"hourglass start\" />\n      Start\n    </Button>\n  )\n\n  const nextButton = (\n    <Button\n      basic\n      icon\n      primary\n      disabled={!nextable}\n      onClick={nextSpeaker}\n    >\n      <Icon name=\"arrow up\" />\n      Next\n    </Button>\n  );\n\n  const stopButton = (\n    <Button\n      basic\n      icon\n      negative\n      disabled={!nextable}\n      onClick={nextSpeaker}\n    >\n      <Icon name=\"hourglass end\" />\n      Stop\n    </Button>\n  );\n\n  const interlaceButton = (\n    <Button\n      icon\n      disabled={!interlaceable}\n      basic\n      color=\"purple\"\n      onClick={interlace}\n    >\n      <Icon name=\"random\" />\n      Order\n    </Button>\n  );\n\n  let button = nextButton;\n\n  if (!hasNowSpeaking) {\n    button = stageButton;\n  } else if (hasNowSpeaking && !ticking) {\n    button = startButton;\n  } else if (hasNowSpeaking && ticking && hasNextSpeaking) {\n    button = nextButton;\n  } else if (hasNowSpeaking && ticking && !hasNextSpeaking) {\n    button = stopButton;\n  }\n\n  React.useEffect(() => {\n    document.addEventListener<'keydown'>('keydown', handleKeyDown);\n\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  });\n\n  return (\n    <Segment textAlign=\"center\" loading={!caucus}>\n      <Label attached=\"top left\" size=\"large\">Next Speaking</Label>\n      {button}\n      <Popup\n        trigger={interlaceButton}\n        content=\"Orders the list so that speakers are\n        'For', then 'Against', then 'Neutral', then 'For', etc.\"\n      />\n      <SpeakerFeed\n        data={caucus ? caucus.queue : undefined}\n        queueFref={props.fref.child('queue')}\n        speaking={caucus ? caucus.speaking : undefined}\n        speakerTimer={props.speakerTimer}\n      />\n    </Segment>\n  );\n}\n","import * as React from 'react';\nimport { Message, Icon } from 'semantic-ui-react';\n\ninterface Props {\n  item: string;\n  id: string;\n}\n\ninterface State {\n}\n\nexport class NotFound extends React.PureComponent<Props, State> {\n  componentDidMount() {\n    const { item, id } = this.props;\n    console.info(`${item} with ID ${id} could not be found`);\n  }\n\n  render() {\n    const { item, id } = this.props;\n    return (\n      <Message error icon>\n        <Icon name=\"question\" />\n        <Message.Content>\n          <Message.Header as=\"h1\">Not found</Message.Header>\n          The {item} you were looking (ID: {id}) for could not be found.\n          It may have been deleted, or the URL you navigated to was incorrect.\n        </Message.Content>\n      </Message>\n    );\n  }\n}\n","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport _ from 'lodash';\nimport {\n  Segment, Dropdown, TextArea, Input, Grid, Feed,\n  Label, Form, Container\n} from 'semantic-ui-react';\nimport Timer, { TimerData, DEFAULT_TIMER } from './Timer';\nimport { RouteComponentProps } from 'react-router';\nimport { CommitteeData, recoverMembers, recoverSettings, recoverCaucus } from './Committee';\nimport CaucusQueuer from './caucus/CaucusQueuer';\nimport { textAreaHandler, dropdownHandler, fieldHandler } from '../actions/handlers';\nimport { makeDropdownOption } from '../utils';\nimport { URLParameters, Dictionary } from '../types';\nimport { CaucusNextSpeaking } from './caucus/CaucusNextSpeaking';\nimport { SpeakerEvent, SpeakerFeedEntry } from './caucus/SpeakerFeed';\nimport { NotFound } from './NotFound';\nimport { Unit } from './TimerSetter';\n\nexport const DEFAULT_CAUCUS_TIME_SECONDS = 10 * 60;\nexport const DEFAULT_SPEAKER_TIME_SECONDS = 1 * 60;\n\nexport function recoverUnit(caucus?: CaucusData): Unit {\n  return caucus ? (caucus.speakerUnit || Unit.Seconds) : Unit.Seconds;\n}\n\nexport function recoverDuration(caucus?: CaucusData): number | undefined {\n  return caucus\n    ? caucus.speakerDuration\n      ? caucus.speakerDuration\n      : undefined\n    : undefined;\n}\n\ninterface Props extends RouteComponentProps<URLParameters> {\n}\n\ninterface State {\n  speakerTimer: TimerData;\n  caucusTimer: TimerData;\n  committee?: CommitteeData;\n  committeeFref: firebase.database.Reference;\n  loading: boolean;\n}\n\nexport type CaucusID = string;\n\nexport enum CaucusStatus {\n  Open = 'Open',\n  Closed = 'Closed'\n}\n\nexport interface CaucusData {\n  name: string;\n  topic: string;\n  status: CaucusStatus;\n  speakerTimer: TimerData;\n  speakerDuration?: number; // TODO: Migrate\n  speakerUnit?: Unit; // TODO: Migrate\n  caucusTimer: TimerData;\n  queueIsPublic?: boolean; // TODO: Migrate\n  speaking?: SpeakerEvent;\n  queue?: Dictionary<string, SpeakerEvent>;\n  history?: Dictionary<string, SpeakerEvent>;\n}\n\nconst CAUCUS_STATUS_OPTIONS = [\n  CaucusStatus.Open,\n  CaucusStatus.Closed\n].map(makeDropdownOption);\n\nexport const DEFAULT_CAUCUS: CaucusData = {\n  name: 'untitled caucus',\n  topic: '',\n  status: CaucusStatus.Open,\n  speakerTimer: { ...DEFAULT_TIMER, remaining: DEFAULT_SPEAKER_TIME_SECONDS },\n  speakerDuration: DEFAULT_SPEAKER_TIME_SECONDS,\n  speakerUnit: Unit.Seconds,\n  caucusTimer: { ...DEFAULT_TIMER, remaining: DEFAULT_CAUCUS_TIME_SECONDS },\n  queueIsPublic: false,\n  queue: {} as Dictionary<string, SpeakerEvent>,\n  history: {} as Dictionary<string, SpeakerEvent>,\n};\n\nexport default class Caucus extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const { match } = props;\n\n    this.state = {\n      committeeFref: firebase.database().ref('committees').child(match.params.committeeID),\n      caucusTimer: DEFAULT_CAUCUS.caucusTimer,\n      speakerTimer: DEFAULT_CAUCUS.speakerTimer,\n      loading: true\n    };\n  }\n\n  firebaseCallback = (committee: firebase.database.DataSnapshot | null) => {\n    if (committee) {\n      this.setState({ committee: committee.val(), loading: false });\n    }\n  }\n\n  // XXX: I'm worried that this might be the source of a bug that I'm yet to observe\n  // Say our route changes the committeeID, _but does not unmount the caucus component_\n  // Will these listeners be purged?\n  componentDidMount() {\n    this.state.committeeFref.on('value', this.firebaseCallback);\n  }\n\n  componentWillUnmount() {\n    this.state.committeeFref.off('value', this.firebaseCallback);\n  }\n\n  recoverCaucusFref = () => {\n    const caucusID: CaucusID = this.props.match.params.caucusID;\n\n    return this.state.committeeFref\n      .child('caucuses')\n      .child(caucusID);\n  }\n\n\n  renderHeader = (caucus?: CaucusData) => {\n    const caucusFref = this.recoverCaucusFref();\n\n    const statusDropdown = (\n      <Dropdown\n        value={caucus ? caucus.status : CaucusStatus.Open}\n        options={CAUCUS_STATUS_OPTIONS}\n        onChange={dropdownHandler<CaucusData>(caucusFref, 'status')}\n      />\n    );\n\n    return (\n      <Segment loading={!caucus}>\n        <a target=\"_blank\" href={'/committees/' + this.props.match.params.committeeID + '/' + this.props.match.params.caucusID + '/speakerslist'}>Projector View</a>\n        <Input\n          label={statusDropdown}\n          labelPosition=\"right\"\n          value={caucus ? caucus.name : ''}\n          onChange={fieldHandler<CaucusData>(caucusFref, 'name')}\n          attatched=\"top\"\n          size=\"massive\"\n          fluid\n          placeholder=\"Set caucus name\"\n        />\n        <Form>\n          <TextArea\n            value={caucus ? caucus.topic : ''}\n            autoHeight\n            onChange={textAreaHandler<CaucusData>(caucusFref, 'topic')}\n            attatched=\"top\"\n            rows={1}\n            placeholder=\"Set caucus details\"\n          />\n        </Form>\n      </Segment>\n    );\n  }\n\n  renderNowSpeaking =  (caucus?: CaucusData) => {\n    const { speakerTimer } = this.state;\n\n    const caucusFref = this.recoverCaucusFref();\n\n    const entryData = caucus ? caucus.speaking : undefined;\n\n    return (\n      <Segment loading={!caucus}>\n        <Label attached=\"top left\" size=\"large\">Now Speaking</Label>\n        <Feed size=\"large\">\n          <SpeakerFeedEntry data={entryData} fref={caucusFref.child('speaking')} speakerTimer={speakerTimer}/>\n        </Feed>\n      </Segment>\n    );\n  }\n\n  setSpeakerTimer = (timer: TimerData) => {\n    this.setState({ speakerTimer: timer });\n  }\n\n  setCaucusTimer = (timer: TimerData) => {\n    this.setState({ caucusTimer: timer });\n  }\n\n  renderCaucus = (caucus?: CaucusData) => {\n    const { renderNowSpeaking, renderHeader, recoverCaucusFref } = this;\n    const { speakerTimer, committee } = this.state;\n\n    const { caucusID } = this.props.match.params;\n    const caucusFref = recoverCaucusFref();\n\n    const members = recoverMembers(committee);\n\n    const renderedSpeakerTimer = (\n      <Timer\n        name=\"Speaker Timer\"\n        timerFref={caucusFref.child('speakerTimer')}\n        key={caucusID + 'speakerTimer'}\n        onChange={this.setSpeakerTimer}\n        toggleKeyCode={83} // S - if changing this, update Help\n        defaultUnit={recoverUnit(caucus)}\n        defaultDuration={recoverDuration(caucus) || 60}\n      />\n    );\n\n    const renderedCaucusTimer = (\n      <Timer\n        name=\"Suspension Timer\"\n        timerFref={caucusFref.child('caucusTimer')}\n        key={caucusID + 'caucusTimer'}\n        onChange={this.setCaucusTimer}\n        toggleKeyCode={67} // C - if changing this, update Help\n        defaultUnit={Unit.Minutes}\n        defaultDuration={10}\n      />\n    );\n\n    const {\n      autoNextSpeaker,\n      timersInSeparateColumns,\n      moveQueueUp\n    } = recoverSettings(committee);\n\n    const header = (\n      <Grid.Row>\n        <Grid.Column>\n          {renderHeader(caucus)}\n        </Grid.Column>\n      </Grid.Row>\n    );\n\n    const renderedCaucusQueuer = (\n      <CaucusQueuer\n        caucus={caucus}\n        members={members}\n        caucusFref={caucusFref}\n      />\n    );\n\n    const renderedCaucusNextSpeaking = (\n      <CaucusNextSpeaking\n        caucus={caucus}\n        fref={caucusFref}\n        speakerTimer={speakerTimer}\n        autoNextSpeaker={autoNextSpeaker}\n      />\n    );\n\n    const body = !timersInSeparateColumns ? (\n      <Grid.Row>\n        <Grid.Column>\n          {renderNowSpeaking(caucus)}\n          {moveQueueUp && renderedCaucusQueuer}\n          {renderedCaucusNextSpeaking}\n          {!moveQueueUp && renderedCaucusQueuer}\n        </Grid.Column>\n        <Grid.Column>\n          {renderedSpeakerTimer}\n          {renderedCaucusTimer}\n        </Grid.Column>\n      </Grid.Row>\n    ) : (\n      <Grid.Row>\n        <Grid.Column>\n          {renderedSpeakerTimer}\n          {renderNowSpeaking(caucus)}\n          {renderedCaucusNextSpeaking}\n        </Grid.Column>\n        <Grid.Column>\n          {renderedCaucusTimer}\n          {renderedCaucusQueuer}\n        </Grid.Column>\n      </Grid.Row>\n    );\n\n    return (\n      <Container>\n        <Grid columns=\"equal\" stackable>\n          {header}\n          {body}\n        </Grid >\n      </Container>\n    );\n  }\n\n  render() {\n    const { committee, loading } = this.state;\n    const caucusID: CaucusID = this.props.match.params.caucusID;\n\n    const caucus = recoverCaucus(committee, caucusID);\n\n    if (!loading && !caucus) {\n      return (\n        <Container text>\n          <NotFound item=\"caucus\" id={caucusID} />\n        </Container>\n      );\n    } else {\n      return this.renderCaucus(caucus);\n    }\n  }\n}\n","import { CaucusID } from './Caucus';\nimport { makeDropdownOption } from '../utils';\n\nexport enum AmendmentStatus {\n  Proposed = 'Proposed',\n  Incorporated = 'Incorporated',\n  Rejected = 'Rejected'\n}\n\nexport const AMENDMENT_STATUS_OPTIONS = [\n  AmendmentStatus.Proposed,\n  AmendmentStatus.Incorporated,\n  AmendmentStatus.Rejected\n].map(makeDropdownOption);\n\nexport type AmendmentID = string;\n\nexport interface AmendmentData {\n  proposer: string;\n  status: AmendmentStatus;\n  text: string;\n  caucus?: CaucusID;\n}\n\nexport const DEFAULT_AMENDMENT = {\n  proposer: '',\n  status: AmendmentStatus.Proposed,\n  text: ''\n};\n\nexport function recoverLinkedCaucus(amendment?: AmendmentData) {\n  return amendment ? amendment.caucus : undefined;\n}","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport { CommitteeData } from './Committee';\nimport { MemberData, MemberID, Rank, parseFlagName, nameToMemberOption } from './Member';\nimport * as Utils from '../utils';\nimport { Dropdown, Flag, Table, Button, Checkbox,\n  CheckboxProps, DropdownProps, ButtonProps, Tab, Container, Message, Icon } from 'semantic-ui-react';\nimport { COUNTRY_OPTIONS, MemberOption } from '../constants';\nimport { checkboxHandler, dropdownHandler } from '../actions/handlers';\nimport { makeDropdownOption } from '../utils';\nimport _ from 'lodash';\nimport { Dictionary, URLParameters } from '../types';\nimport { RouteComponentProps } from 'react-router';\n\nexport const canVote = (x: MemberData) => (x.rank === Rank.Veto || x.rank === Rank.Standard);\nexport const nonNGO = (x: MemberData) => (x.rank !== Rank.NGO);\n\ninterface Props extends RouteComponentProps<URLParameters> {\n  committee: CommitteeData;\n  fref: firebase.database.Reference;\n}\n\ninterface State {\n  member: MemberOption;\n  options: MemberOption[];\n  rank: Rank;\n  voting: MemberData['voting'];\n  present: MemberData['present'];\n}\n\nconst RANK_OPTIONS = [\n  Rank.Standard,\n  Rank.Veto,\n  Rank.NGO,\n  Rank.Observer\n].map(makeDropdownOption);\n\ninterface CommitteeStats {\n  delegatesNo: number;\n  presentNo: number;\n  absCanVote: number;\n  canVoteNo: number;\n  nonNGONo: number;\n  quorum: number;\n  procedural: number;\n  operative: number;\n  hasQuorum: boolean;\n  draftResolution: number;\n  amendment: number;\n  twoThirdsMajority: number;\n}\n\nexport function makeCommitteeStats(data?: CommitteeData) {\n  const defaultMap = {} as Dictionary<MemberID, MemberData>;\n  const membersMap: Dictionary<MemberID, MemberData> = data ? (data.members || defaultMap) : defaultMap;\n  const members: MemberData[] = Utils.objectToList(membersMap);\n  const present = members.filter(x => x.present);\n\n  const delegatesNo: number     = members.length;\n  const presentNo: number       = present.length;\n  const absCanVote: number      = members.filter(canVote).length;\n  const canVoteNo: number       = present.filter(canVote).length;\n  const nonNGONo: number        = present.filter(nonNGO).length;\n\n  const simpleMajority: number = Math.ceil(canVoteNo * 0.5);\n  const twoThirdsMajority: number = Math.ceil(canVoteNo * (2 / 3));\n\n  const quorum: number          = Math.ceil(absCanVote * 0.25);\n  const procedural: number      = Math.ceil(nonNGONo * 0.5);\n  const operative: number       = Math.ceil(canVoteNo * 0.5);\n  const hasQuorum: boolean      = presentNo >= quorum;\n  const draftResolution: number = Math.ceil(canVoteNo * 0.25);\n  const amendment: number       = Math.ceil(canVoteNo * 0.1);\n\n  return { delegatesNo, presentNo, absCanVote, canVoteNo, nonNGONo, quorum, \n    procedural, operative, hasQuorum, draftResolution, amendment, twoThirdsMajority, simpleMajority };\n}\n\nexport function CommitteeStats(props: { data?: CommitteeData, verbose: boolean }) {\n  const { data, verbose } = props;\n\n  const  { delegatesNo, presentNo, absCanVote, canVoteNo, nonNGONo, quorum, \n    procedural, operative, hasQuorum, draftResolution, amendment, twoThirdsMajority } = makeCommitteeStats(data);\n\n  return (\n    <Table definition>\n      <Table.Header>\n        <Table.Row>\n          <Table.HeaderCell />\n          <Table.HeaderCell>Number</Table.HeaderCell>\n          <Table.HeaderCell>Description</Table.HeaderCell>\n          {verbose && <Table.HeaderCell>Threshold</Table.HeaderCell>}\n        </Table.Row>\n      </Table.Header>\n\n      <Table.Body>\n        <Table.Row>\n          <Table.Cell>Total</Table.Cell>\n          <Table.Cell>{delegatesNo.toString()}</Table.Cell>\n          <Table.Cell>Delegates in committee</Table.Cell>\n        </Table.Row>\n        <Table.Row>\n          <Table.Cell>Present</Table.Cell>\n          <Table.Cell>{presentNo.toString()}</Table.Cell>\n          <Table.Cell>Delegates in attendance</Table.Cell>\n        </Table.Row>\n        <Table.Row>\n          <Table.Cell>Have voting rights</Table.Cell>\n          <Table.Cell>{canVoteNo.toString()}</Table.Cell>\n          <Table.Cell>Present delegates with voting rights</Table.Cell>\n        </Table.Row>\n        {verbose && <Table.Row>\n          <Table.Cell error={!hasQuorum}>Debate</Table.Cell>\n          <Table.Cell error={!hasQuorum}>{quorum.toString()}</Table.Cell>\n          <Table.Cell error={!hasQuorum}>Delegates needed for debate</Table.Cell>\n          <Table.Cell error={!hasQuorum}>25% of of members with voting rights</Table.Cell>\n        </Table.Row>}\n        {verbose && <Table.Row>\n          <Table.Cell>Procedural threshold</Table.Cell>\n          <Table.Cell>{procedural.toString()}</Table.Cell>\n          <Table.Cell>Required votes for procedural matters</Table.Cell>\n          <Table.Cell>50% of present non-NGO delegates</Table.Cell>\n        </Table.Row>}\n        <Table.Row>\n          <Table.Cell>Operative threshold</Table.Cell>\n          <Table.Cell>{operative.toString()}</Table.Cell>\n          <Table.Cell>Required votes for operative matters, such as amendments</Table.Cell>\n          {verbose && <Table.Cell>50% of present delegates with voting rights</Table.Cell>}\n        </Table.Row>\n        <Table.Row>\n          <Table.Cell>Two-thirds majority</Table.Cell>\n          <Table.Cell>{twoThirdsMajority.toString()}</Table.Cell>\n          <Table.Cell>Required votes for passing resolutions</Table.Cell>\n          {verbose && <Table.Cell>2/3 of present delegates with voting rights</Table.Cell>}\n        </Table.Row>\n        {verbose && <Table.Row>\n          <Table.Cell>Draft resolution</Table.Cell>\n          <Table.Cell>{draftResolution.toString()}</Table.Cell>\n          <Table.Cell>Delegates needed to table a draft resolution</Table.Cell>\n          <Table.Cell>25% of present delegates with voting rights</Table.Cell>\n        </Table.Row>}\n        {verbose && <Table.Row>\n          <Table.Cell>Amendment</Table.Cell>\n          <Table.Cell>{amendment.toString()}</Table.Cell>\n          <Table.Cell>Delegates needed to table an amendment</Table.Cell>\n          <Table.Cell>10% of present delegates with voting rights</Table.Cell>\n        </Table.Row>}\n      </Table.Body>\n    </Table>\n  );\n}\n\nexport default class Admin extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      member: COUNTRY_OPTIONS[0],\n      options: [],\n      rank: Rank.Standard,\n      voting: false,\n      present: true\n    };\n  }\n\n  renderMemberItem = (id: MemberID, member: MemberData, fref: firebase.database.Reference) => {\n    return (\n      <Table.Row key={id}>\n        <Table.Cell>\n          <Flag name={parseFlagName(member.name)} />\n          {member.name}\n        </Table.Cell>\n        <Table.Cell>\n          <Dropdown\n            search\n            selection\n            fluid\n            options={RANK_OPTIONS}\n            onChange={dropdownHandler<MemberData>(fref, 'rank')}\n            value={member.rank}\n          />\n        </Table.Cell>\n        <Table.Cell collapsing>\n          <Checkbox \n            toggle \n            checked={member.present} \n            onChange={checkboxHandler<MemberData>(fref, 'present')} \n          />\n        </Table.Cell>\n        <Table.Cell collapsing>\n          <Checkbox \n            toggle \n            checked={member.voting} \n            onChange={checkboxHandler<MemberData>(fref, 'voting')} \n          />\n        </Table.Cell>\n        <Table.Cell collapsing>\n          <Button\n            className=\"members__button--remove-member\"\n            icon=\"trash\"\n            negative\n            basic\n            onClick={() => fref.remove()}\n          />\n        </Table.Cell>\n      </Table.Row>\n    );\n  }\n\n  canPush = () => { \n    const { member: newMember } = this.state;\n\n    const members = this.props.committee.members || {};\n    const memberNames = Object.keys(members).map(id => \n      members[id].name\n    );\n\n    return !_.includes(memberNames, newMember.text);\n  }\n\n  pushMember = (event: React.MouseEvent<HTMLButtonElement>, data: ButtonProps) => {\n    event.preventDefault();\n\n    const member: MemberData = {\n      name: this.state.member.text,\n      rank: this.state.rank,\n      present: this.state.present,\n      voting: this.state.voting\n    };\n\n    this.props.fref.child('members').push().set(member);\n  }\n\n  setMember = (event: React.SyntheticEvent<HTMLElement>, data: DropdownProps) => {\n    const { options: newOptions } = this.state;\n    const newMember = [...newOptions, ...COUNTRY_OPTIONS].filter(c => c.value === data.value)[0];\n\n    if (newMember) {\n      this.setState({ member: newMember });\n    }\n  }\n\n  setPresent = (event: React.FormEvent<HTMLInputElement>, data: CheckboxProps) => {\n    this.setState({ present: data.checked || false });\n  }\n\n  setVoting = (event: React.FormEvent<HTMLInputElement>, data: CheckboxProps) => {\n    this.setState({ voting: data.checked || false });\n  }\n\n  setRank = (event: React.SyntheticEvent<HTMLElement>, data: DropdownProps) => {\n    this.setState({ rank: data.value as Rank || Rank.Standard });\n  }\n\n  handleAdd = (event: React.KeyboardEvent<HTMLElement>, data: DropdownProps) => {\n    // FSM looks sorta like the UN flag\n    const newMember = nameToMemberOption((data.value as number | string).toString());\n\n    if (_.includes(COUNTRY_OPTIONS, newMember)) {\n      this.setState({ member: newMember });\n    } else {\n      const newOptions = [ newMember, ...this.state.options ];\n      this.setState({ member: newMember, options: newOptions });\n    }\n  }\n\n  gotoGSL = () => {\n    const { committeeID } = this.props.match.params;\n\n    this.props.history\n      .push(`/committees/${committeeID}/caucuses/gsl`);\n  }\n\n  renderAdder() {\n    const { handleAdd, setMember, setRank, setPresent, setVoting } = this;\n    const { present: newMemberPresent, voting: newMemberVoting, options: newOptions, member: newMember } = this.state;\n\n    return (\n      <Table.Row>\n        <Table.HeaderCell>\n          <Dropdown\n            icon=\"search\"\n            className=\"adder__dropdown--select-member\"\n            placeholder=\"Select preset member\"\n            search\n            selection\n            fluid\n            allowAdditions\n            error={!this.canPush()}\n            options={[...newOptions, ...COUNTRY_OPTIONS]}\n            onAddItem={handleAdd}\n            onChange={setMember}\n            value={newMember.key}\n          />\n        </Table.HeaderCell>\n        <Table.HeaderCell>\n          <Dropdown\n            className=\"adder__dropdown--select-rank\"\n            search\n            selection\n            fluid\n            options={RANK_OPTIONS}\n            onChange={setRank}\n            value={this.state.rank}\n          />\n        </Table.HeaderCell>\n        <Table.HeaderCell collapsing >\n          <Checkbox \n            className=\"adder__checkbox--toggle-present\"\n            toggle \n            checked={newMemberPresent} \n            onChange={setPresent} \n          />\n        </Table.HeaderCell>\n        <Table.HeaderCell collapsing >\n          <Checkbox \n            className=\"adder__checkbox--toggle-voting\"\n            toggle \n            checked={newMemberVoting} \n            onChange={setVoting} \n          />\n        </Table.HeaderCell>\n        <Table.HeaderCell>\n          <Button\n            className=\"adder__button--add-member\"\n            icon=\"plus\"\n            primary\n            basic\n            disabled={!this.canPush()}\n            onClick={this.pushMember}\n          />\n        </Table.HeaderCell>\n      </Table.Row>\n    );\n  }\n\n  CommitteeMembers = (props: { data: CommitteeData, fref: firebase.database.Reference }) => {\n\n    const members = this.props.committee.members || {};\n    const memberItems = Object.keys(members).map(id =>\n      this.renderMemberItem(id, members[id], props.fref.child('members').child(id))\n    );\n\n    return (\n      <>\n        <Table compact celled definition>\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell />\n              <Table.HeaderCell>Rank</Table.HeaderCell>\n              <Table.HeaderCell>Present</Table.HeaderCell>\n              <Table.HeaderCell>Voting</Table.HeaderCell>\n              <Table.HeaderCell />\n            </Table.Row>\n          </Table.Header>\n\n          <Table.Header fullWidth>\n            {this.renderAdder()}\n          </Table.Header>\n\n          <Table.Body>\n            {memberItems.reverse()}\n          </Table.Body>\n        </Table>\n        {memberItems.length === 0\n          ? <Message error>\n            Add at least one committee member to proceed\n          </Message>\n          : <Button\n            onClick={this.gotoGSL}\n            primary\n            fluid\n          >\n            General Speakers List\n              <Icon name=\"arrow right\" />\n          </Button>\n        }\n      </>\n    );\n  }\n\n  render() {\n    const { CommitteeMembers } = this;\n    const { committee, fref } = this.props;\n\n    const panes = [\n      { \n        menuItem: 'Members', \n        render: () => <Tab.Pane><CommitteeMembers data={committee} fref={fref} /></Tab.Pane> \n      },\n      { \n        menuItem: 'Thresholds', \n        render: () => <Tab.Pane><CommitteeStats verbose={true} data={committee} /></Tab.Pane>\n      }\n    ];\n\n    return (\n      <Container text style={{ padding: '1em 0em' }}>\n        <Tab panes={panes} />\n      </Container>\n    );\n  }\n}\n","import * as firebase from 'firebase/app';\nimport { MemberID } from '../components/Member';\nimport { ResolutionID, Vote, ResolutionData } from '../components/Resolution';\nimport { CommitteeID } from '../components/Committee';\nimport { AmendmentData } from '../components/Amendment';\n\nexport const voteOnResolution = (\n  committeeID: CommitteeID, \n  resolutionID: ResolutionID,\n  memberID: MemberID, \n  vote?: Vote\n  // tslint:disable-next-line\n): Promise<any> => {\n\n  const target = firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('resolutions')\n    .child(resolutionID)\n    .child('votes')\n    .child(memberID);\n\n  if (vote) {\n    return target.set(vote);\n  } else {\n    return target.remove();\n  }\n};\n\nexport const putAmendment = (\n  committeeID: CommitteeID, \n  resolutionID: ResolutionID,\n  amendmentData: AmendmentData, \n): firebase.database.ThenableReference => {\n\n  const ref = firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('resolutions')\n    .child(resolutionID)\n    .child('amendments')\n    .push();\n\n  ref.set(amendmentData);\n\n  return ref;\n};\n\nexport const putResolution = \n  (committeeID: CommitteeID, resolutionData: ResolutionData): firebase.database.ThenableReference => {\n\n  const ref = firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('resolutions')\n    .push();\n\n  ref.set(resolutionData);\n\n  return ref;\n};\n\nexport const deleteResolution = (\n  committeeID: CommitteeID, \n  resolutionID: ResolutionID\n  // tslint:disable-next-line\n): Promise<any> => {\n\n  return firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('resolutions')\n    .child(resolutionID)\n    .remove();\n};\n","import * as React from 'react';\nimport { Loader, Dimmer, Icon } from 'semantic-ui-react';\n\ninterface Props {\n  small?: boolean;\n}\n\nexport default class Loading extends React.PureComponent<Props, {}> {\n  render() {\n    if (this.props.small) {\n      return <Icon name=\"circle notched\" loading />;\n    } else {\n      return (\n        <Dimmer active inverted>\n          <Loader inverted size=\"large\" />\n        </Dimmer>\n      );\n    }\n  }\n}","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport FileSaver from 'file-saver';\nimport { CommitteeData, CommitteeID, recoverMemberOptions } from './Committee';\nimport { RouteComponentProps } from 'react-router';\nimport { URLParameters } from '../types';\nimport { Form, Button, Progress, DropdownProps, Flag, Container, Tab, TextAreaProps, Feed, SemanticICONS } from 'semantic-ui-react';\nimport { parseFlagName } from './Member';\nimport Loading from './Loading';\nimport { MemberOption, COUNTRY_OPTIONS } from '../constants';\nimport { ResolutionID } from './Resolution';\nimport { putAmendment } from '../actions/resolution-actions';\nimport { DEFAULT_AMENDMENT } from './Amendment';\n\nconst TEXT_ICON: SemanticICONS = 'align left';\nconst FILE_ICON: SemanticICONS = 'file outline';\nconst LINK_ICON: SemanticICONS = 'linkify';\n\nenum PostType {\n  Link = 'link',\n  File = 'file',\n  Text = 'text'\n}\n\nexport type PostID = string;\n\nexport interface Post {\n  type: PostType\n  uploader: string;\n  forResolution?: ResolutionID\n  timestamp?: number; // we're just going to have to cop the undefined here\n}\n\ninterface Link extends Post {\n  type: PostType.Link;\n  url: string;\n  name: string;\n}\n\ninterface File extends Post {\n  type: PostType.File;\n  filename: string;\n}\n\ninterface Text extends Post {\n  type: PostType.Text;\n  body: string;\n}\n\nexport type PostData = Link | File | Text;\n\ninterface EntryProps {\n  committeeID: CommitteeID;\n  post: PostData;\n  onDelete: () => void;\n  onPromoteToAmendment: () => void;\n}\n\ninterface EntryState {\n  metadata?: any;\n}\n\nclass Entry extends React.Component<EntryProps, EntryState> {\n  constructor(props: EntryProps) {\n    super(props);\n\n    this.state = {\n    };\n  }\n\n  recoverStorageRef = (): firebase.storage.Reference | null => {\n    const { committeeID, post } = this.props;\n\n    if (post.type === PostType.File) {\n      const storageRef = firebase.storage().ref();\n      return storageRef.child('committees').child(committeeID).child(post.filename);\n    } else {\n      return null;\n    }\n  }\n\n  componentDidMount() {\n    const { post } = this.props;\n    const { timestamp } = this.props.post;\n\n    if (!timestamp && post.type === PostType.File) {\n      this.recoverStorageRef()!.getMetadata().then((metadata: any) => {\n        this.setState({ metadata: metadata });\n      });\n    }\n  }\n\n  download = (filename: string) => () => {\n    // We should never allow a download to be triggered for post types that \n    // don't permit downloads\n    this.recoverStorageRef()!.getDownloadURL().then((url: any) => {\n      var xhr = new XMLHttpRequest();\n      xhr.responseType = 'blob';\n      xhr.onload = (event) => {\n        const blob = xhr.response;\n        FileSaver.saveAs(blob, filename);\n      };\n      xhr.open('GET', url);\n      xhr.send();\n    });\n  }\n\n  renderDate = (action: 'Posted' | 'Uploaded') => {\n    const { post } = this.props;\n\n    let sinceText: string = action;\n\n    if (post.timestamp) {\n      const millis = new Date().getTime() - new Date(post.timestamp).getTime();\n\n      const secondsSince = millis / 1000;\n\n      if (secondsSince < 60) {\n        sinceText = `${action} ${Math.round(secondsSince)} seconds ago`;\n      } else if (secondsSince < 60 * 60) {\n        sinceText = `${action} ${Math.round(secondsSince / 60 )} minutes ago`;\n      } else if (secondsSince < 60 * 60 * 24) {\n        sinceText = `${action} ${Math.round(secondsSince / (60 * 60))} hours ago`;\n      } else {\n        sinceText = `${action} ${Math.round(secondsSince / (60 * 60 * 24))} days ago`;\n      }\n    }\n\n    return sinceText;\n  }\n\n  renderText = (post: Text) => {\n    return (\n      <Feed.Event>\n        <Feed.Label icon={TEXT_ICON} />\n        <Feed.Content>\n          <Feed.Summary>\n            <Feed.User><Flag name={parseFlagName(post.uploader)}/> {post.uploader}</Feed.User>\n            <Feed.Date>{this.renderDate('Posted')}</Feed.Date>\n          </Feed.Summary>\n          <Feed.Extra style={{'whiteSpace': 'pre-wrap'}} text>{post.body}</Feed.Extra>\n          <Feed.Meta>\n            <a onClick={this.props.onDelete}>Delete</a>\n            {post.forResolution && <a onClick={this.props.onPromoteToAmendment}>Create amendment</a>}\n          </Feed.Meta>\n        </Feed.Content>\n      </Feed.Event>\n    );\n  }\n\n  renderFile = (post: File) => {\n    return (\n      <Feed.Event>\n        <Feed.Label icon={FILE_ICON} />\n        <Feed.Content>\n          <Feed.Summary>\n            <Feed.User><Flag name={parseFlagName(post.uploader)}/> {post.uploader}</Feed.User> uploaded a file\n            <Feed.Date>{this.renderDate('Uploaded')}</Feed.Date>\n          </Feed.Summary>\n          <Feed.Extra><a onClick={this.download(post.filename)}>{post.filename}</a></Feed.Extra>\n          <Feed.Meta>\n            <a onClick={this.props.onDelete}>Delete</a>\n          </Feed.Meta>\n        </Feed.Content>\n      </Feed.Event>\n    );\n  }\n\n  renderLink = (post: Link) => {\n    return (\n      <Feed.Event>\n        <Feed.Label icon={LINK_ICON} />\n        <Feed.Content>\n          <Feed.Summary>\n            <Feed.User><Flag name={parseFlagName(post.uploader)}/> {post.uploader}</Feed.User> posted a link\n            <Feed.Date>{this.renderDate('Posted')}</Feed.Date>\n          </Feed.Summary>\n          <Feed.Extra><a href={post.url}>{post.name || post.url}</a></Feed.Extra>\n          {/* Show the URL too if the link has name */}\n          {post.name && <Feed.Meta><a href={post.url}>{post.url}</a></Feed.Meta>}\n          <br />\n          <Feed.Meta>\n            <a onClick={this.props.onDelete}>Delete</a>\n          </Feed.Meta>\n        </Feed.Content>\n      </Feed.Event>\n    );\n  }\n\n  render() {\n    const { post } = this.props;\n\n    switch (post.type) {\n      case PostType.File:\n        return this.renderFile(post);\n      case PostType.Link:\n        return this.renderLink(post);\n      case PostType.Text:\n        return this.renderText(post);\n      default:\n        return this.renderFile(post); // for backwards compat\n    }\n  }\n}\n\ninterface State {\n  committee?: CommitteeData;\n  committeeFref: firebase.database.Reference;\n  progress?: number;\n  file?: any;\n  state?: firebase.storage.TaskState;\n  link: string;\n  body: string;\n  errorCode?: string;\n  uploader?: MemberOption;\n  filtered: MemberOption['key'][];\n}\n\ninterface Props extends RouteComponentProps<URLParameters> {\n  forResolution?: ResolutionID\n}\n\nexport default class Files extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const { match } = props;\n\n    this.state = {\n      link: '',\n      body: '',\n      committeeFref: firebase.database().ref('committees')\n        .child(match.params.committeeID),\n      filtered: []\n    };\n  }\n\n  firebaseCallback = (committee: firebase.database.DataSnapshot | null) => {\n    if (committee) {\n      this.setState({ committee: committee.val() });\n    }\n  }\n\n  componentDidMount() {\n    this.state.committeeFref.on('value', this.firebaseCallback);\n  }\n\n  componentWillUnmount() {\n    this.state.committeeFref.off('value', this.firebaseCallback);\n  }\n\n  handleError = (error: any) => {\n    // A full list of error codes is available at\n    // https://firebase.google.com/docs/storage/web/handle-errors\n    this.setState({ errorCode: error.code });\n  }\n\n  handleSnapshot = (snapshot: any) => {\n    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n    this.setState({progress: progress, state: snapshot.state});\n  }\n\n  handleComplete = (uploadTask: firebase.storage.UploadTask) => () => {\n    const { uploader } = this.state;\n    const { forResolution } = this.props;\n\n    let file: File = {\n      type: PostType.File,\n      timestamp: new Date().getTime(),\n      filename: uploadTask.snapshot.ref.name,\n      uploader: uploader ? uploader.text : 'Unknown',\n    };\n\n    if (forResolution) {\n      file = {\n        ...file,\n        forResolution\n      };\n    }\n\n    this.state.committeeFref.child('files').push().set(file);\n\n    this.setState({ state: uploadTask.snapshot.state });\n\n    this.clear()\n  }\n\n  onFileChange = (event: any) => {\n    this.setState({ file: event.target.files[0] });\n  }\n\n  clear = () => {\n    this.setState({\n      link: '',\n      body: '',\n      file: undefined\n    });\n  }\n\n  postFile = () => {\n    const { handleSnapshot, handleError, handleComplete } = this;\n    const { file } = this.state;\n\n    const { committeeID } = this.props.match.params;\n\n    const storageRef = firebase.storage().ref();\n\n    const metadata = {\n      contentType: file.type\n    };\n\n    var uploadTask = storageRef\n      .child('committees')\n      .child(committeeID)\n      .child(file.name)\n      .put(file, metadata);\n\n    uploadTask.on(\n      firebase.storage.TaskEvent.STATE_CHANGED, \n      handleSnapshot, \n      handleError, \n      handleComplete(uploadTask)\n    );\n  }\n  \n  postLink = () => {\n    const { uploader, link, body } = this.state;\n    const { forResolution } = this.props;\n\n    let linkData: Link = {\n      type: PostType.Link,\n      timestamp: new Date().getTime(),\n      name: body,\n      url: link,\n      uploader: uploader ? uploader.text : 'Unknown',\n    };\n\n    if (forResolution) {\n      linkData = {\n        ...linkData,\n        forResolution\n      };\n    }\n\n    this.state.committeeFref.child('files').push().set(linkData);\n\n    this.clear()\n  }\n\n  postText = () => {\n    const { uploader, body } = this.state;\n    const { forResolution } = this.props;\n\n    let linkData: Text = {\n      type: PostType.Text,\n      timestamp: new Date().getTime(),\n      body: body,\n      uploader: uploader ? uploader.text : 'Unknown',\n    };\n\n    if (forResolution) {\n      linkData = {\n        ...linkData,\n        forResolution\n      };\n    }\n\n    this.state.committeeFref.child('files').push().set(linkData);\n    \n    this.clear()\n  }\n\n  setMember = (event: React.SyntheticEvent<HTMLElement>, data: DropdownProps): void => {\n    const memberOptions = recoverMemberOptions(this.state.committee);\n\n    this.setState({ uploader: memberOptions.filter(c => c.value === data.value)[0] });\n  }\n\n  renderUploader = () => {\n    const { progress, state, errorCode, committee, file, uploader } = this.state;\n\n    const memberOptions = recoverMemberOptions(committee);\n\n    return (\n      <React.Fragment>\n        <Progress \n          percent={Math.round(progress || 0 )} \n          progress \n          warning={state === firebase.storage.TaskState.PAUSED}\n          success={state === firebase.storage.TaskState.SUCCESS}\n          error={!!errorCode} \n          active={true} \n          label={errorCode} \n        />\n        <Form onSubmit={this.postFile}>\n          <input type=\"file\" onChange={this.onFileChange} />\n          <Form.Group widths=\"equal\">\n            <Form.Dropdown\n              icon=\"search\"\n              key=\"uploader\"\n              value={uploader ? uploader.key : undefined}\n              search\n              fluid\n              selection\n              error={!uploader}\n              onChange={this.setMember}\n              options={memberOptions}\n              label=\"Uploader\"\n              required\n            />\n            <Button\n              type=\"submit\"\n              loading={state === firebase.storage.TaskState.RUNNING}\n              disabled={!file || !uploader}\n            >\n              Upload\n            </Button>\n          </Form.Group>\n        </Form>\n      </React.Fragment>\n    );\n  }\n\n  setBody = (event: React.FormEvent<HTMLTextAreaElement>, data: TextAreaProps) => {\n    this.setState({ body: data.value!.toString() });\n  }\n\n  setName = (e: React.FormEvent<HTMLInputElement>) => {\n    this.setState({ body: e.currentTarget.value });\n  }\n\n  setLink = (e: React.FormEvent<HTMLInputElement>) => {\n    this.setState({ link: e.currentTarget.value });\n  }\n\n  setFilter = (event: React.SyntheticEvent<HTMLElement>, data: DropdownProps) => {\n    // @ts-ignore\n    this.setState({ filtered: data.value });\n  }\n\n  renderFilter = () => {\n    const { committee } = this.state;\n\n    const memberOptions = recoverMemberOptions(committee);\n\n    return (\n      <Form>\n        <Form.Dropdown\n          icon=\"search\"\n          value={this.state.filtered.map(x => x)}\n          search\n          multiple\n          selection\n          onChange={this.setFilter}\n          options={memberOptions}\n          label=\"View posts only by\"\n        />\n      </Form>\n    )\n  }\n\n  deletePost = (postID: PostID) => () => {\n    this.state.committeeFref.child('files').child(postID).remove();\n  }\n\n  promoteToAmendment = (post: PostData) => () => {\n    const { committeeID } = this.props.match.params;\n\n    if (post.type !== PostType.Text) {\n      return;\n    }\n\n    if (!post.forResolution) {\n      return;\n    }\n\n    putAmendment(committeeID, post.forResolution, {\n      ...DEFAULT_AMENDMENT,\n      proposer: post.uploader,\n      text: post.body,\n    })\n\n    this.props.history.push(`/committees/${committeeID}/resolutions/${post.forResolution}/amendments`);\n  }\n\n  renderLinker = () => {\n    const { committee, uploader, body, link } = this.state;\n\n    const memberOptions = recoverMemberOptions(committee);\n\n    return (\n      <Form onSubmit={this.postLink}>\n        <Form.Input\n          value={body}\n          onChange={this.setName}\n          autoHeight\n          label=\"Name\"\n          rows={1}\n        />\n        <Form.Input \n          label=\"Link\"\n          required\n          error={!link}\n          value={link}\n          onChange={this.setLink}\n          placeholder=\"https://docs.google.com/document/x\"\n        />\n        <Form.Group widths=\"equal\">\n          <Form.Dropdown\n            icon=\"search\"\n            key=\"uploader\"\n            required\n            value={uploader ? uploader.key : undefined}\n            search\n            selection\n            error={!uploader}\n            onChange={this.setMember}\n            options={memberOptions}\n            label=\"Poster\"\n          />\n          <Button \n            type=\"submit\" \n            disabled={!link || !uploader}\n          >\n              Post\n          </Button>\n        </Form.Group>\n      </Form>\n    );\n  }\n\n  renderPoster = () => {\n    const { committee, uploader, body } = this.state;\n\n    const memberOptions = recoverMemberOptions(committee);\n\n    return (\n      <Form onSubmit={this.postText}>\n        <Form.TextArea\n          value={body}\n          onChange={this.setBody}\n          autoHeight={true}\n          label=\"Body\"\n          rows={3}\n        />\n        <Form.Group widths=\"equal\">\n          <Form.Dropdown\n            icon=\"search\"\n            key=\"uploader\"\n            required\n            value={uploader ? uploader.key : undefined}\n            search\n            selection\n            error={!uploader}\n            onChange={this.setMember}\n            options={memberOptions}\n            label=\"Poster\"\n          />\n          <Button \n            type=\"submit\" \n            disabled={!body || !uploader}\n          >\n              Post\n          </Button>\n        </Form.Group>\n      </Form>\n    );\n  }\n  \n  isFiltered = (post: PostData) => {\n    const { filtered } = this.state;\n\n    if (filtered.length === 0) {\n      return true;\n    }\n\n    // For custom members\n    if (filtered.includes(post.uploader)) {\n      return true;\n    }\n    \n    // For default country members\n    return COUNTRY_OPTIONS\n      .filter(x => filtered.includes(x.key))\n      .map(x => x.text)\n      .includes(post.uploader)\n  }\n\n  isResolutionAssociated = (post: PostData) => {\n    if (!this.props.forResolution && post.forResolution) {\n      return false;\n    }\n\n    if (this.props.forResolution) {\n      return this.props.forResolution === post.forResolution;\n    }\n\n    return true;\n  }\n\n  render() {\n    const { committee } = this.state;\n    const { committeeID } = this.props.match.params;\n    // TODO: rename\n    const files = committee ? (committee.files || {}) : {};\n\n    const panes = [\n      { \n        menuItem: { key: 'Text', icon: TEXT_ICON, content: 'Text' }, \n        render: () => <Tab.Pane>{this.renderPoster()}</Tab.Pane> \n      },\n      { \n        menuItem: { key: 'Link', icon: LINK_ICON, content: 'Link' }, \n        render: () => <Tab.Pane>{this.renderLinker()}</Tab.Pane>\n      },\n      { \n        menuItem: { key: 'File', icon: FILE_ICON, content: 'File' }, \n        render: () => <Tab.Pane>{this.renderUploader()}</Tab.Pane> \n      },\n    ];\n\n    const inner = (\n      <>\n        <Tab \n          menu={{ attached: true, tabular: false }}\n          panes={panes} \n        />\n        {this.renderFilter()}\n        <Feed size=\"large\">\n          {committee ? Object.keys(files).reverse()\n            .filter(key => this.isFiltered(files[key]))\n            .filter(key => this.isResolutionAssociated(files[key]))\n            .map(key =>\n              <Entry \n                key={key} \n                onDelete={this.deletePost(key)}\n                onPromoteToAmendment={this.promoteToAmendment(files[key])}\n                committeeID={committeeID}\n                post={files[key]}\n              />\n          ) : <Loading />}\n        </Feed>\n      </>\n    )\n\n    return this.props.forResolution\n      ? inner:\n      (\n        <Container text style={{ padding: '1em 0em' }}>\n          {inner}\n        </Container>\n      );\n  }\n}\n","\nimport * as React from 'react';\nimport * as firebase from 'firebase/app';\nimport * as _ from 'lodash';\nimport { MemberID, nameToMemberOption, MemberData, Rank } from './Member';\nimport { AmendmentID, AmendmentData, DEFAULT_AMENDMENT, AMENDMENT_STATUS_OPTIONS, recoverLinkedCaucus } from './Amendment';\nimport {\n  Card, Button, Form, Dropdown, Segment, Input, TextArea, Checkbox,\n  List, SemanticICONS, Icon, Tab, Grid, SemanticCOLORS, Container, Message, Label, Popup, Statistic, DropdownProps, DropdownItemProps, TabProps\n} from 'semantic-ui-react';\nimport { CommitteeData, recoverMemberOptions } from './Committee';\nimport { CaucusID, DEFAULT_CAUCUS, CaucusData } from './Caucus';\nimport { RouteComponentProps } from 'react-router';\nimport { URLParameters, Dictionary } from '../types';\nimport {\n  dropdownHandler, fieldHandler, textAreaHandler, memberDropdownHandler,\n  checkboxHandler\n} from '../actions/handlers';\nimport { makeDropdownOption } from '../utils';\nimport { canVote, CommitteeStats, makeCommitteeStats } from './Admin';\nimport { voteOnResolution } from '../actions/resolution-actions';\nimport { putCaucus } from '../actions/caucus-actions';\nimport { Stance } from './caucus/SpeakerFeed';\nimport { NotFound } from './NotFound';\nimport Files from './Files';\n\nconst TAB_ORDER = ['feed', 'text', 'amendments', 'voting'];\n\nexport const IDENTITCAL_PROPOSER_SECONDER = (\n  <Message\n    error\n    content=\"A resolution's proposer and seconder cannot be the same\"\n  />\n);\n\nexport const DELEGATES_CAN_AMEND_NOTICE = (\n  <Message\n    basic\n    attached=\"bottom\"\n  >\n    Delegates can create and edit, but not delete, amendments.\n  </Message>\n);\n\ninterface Props extends RouteComponentProps<URLParameters> {\n}\n\ninterface State {\n  committeeFref: firebase.database.Reference;\n  committee?: CommitteeData;\n  authUnsubscribe?: () => void;\n  user?: firebase.User | null;\n  loading: boolean;\n}\n\nexport enum ResolutionStatus {\n  Introduced = 'Introduced',\n  Passed = 'Passed',\n  Failed = 'Failed'\n}\n\nconst RESOLUTION_STATUS_OPTIONS = [\n  ResolutionStatus.Introduced,\n  ResolutionStatus.Passed,\n  ResolutionStatus.Failed\n].map(makeDropdownOption)\n\nenum Majority {\n  Simple = \"Simple majority\",\n  TwoThirds = \"Two-thirds majority\",\n  TwoThirdsNoAbstentions = \"Two-thirds majority, ignoring abstentions\"\n}\n\nconst MAJORITY_OPTIONS: DropdownItemProps[] = [\n  { key: Majority.Simple, value: Majority.Simple, text: \"Simple (50%) majority required\" },\n  { key: Majority.TwoThirds, value: Majority.TwoThirds, text: \"Two-thirds majority required\" },\n  { key: Majority.TwoThirdsNoAbstentions, value: Majority.TwoThirdsNoAbstentions, text: \"Two-thirds majority required, ignoring abstentions\" },\n]\n\nfunction getThreshold(requiredMajority: Majority, committee: CommitteeData | undefined, fors: number, againsts: number): number {\n  const stats = makeCommitteeStats(committee)\n  switch (requiredMajority) {\n    case Majority.TwoThirds:\n      return stats.twoThirdsMajority;\n    case Majority.TwoThirdsNoAbstentions:\n      return Math.ceil((2/3) * (fors + againsts));\n    case Majority.Simple:\n    default:\n      return stats.simpleMajority;\n  }\n}\n\nfunction getThresholdName(majority: Majority): string {\n  switch (majority) {\n    case Majority.TwoThirds:\n      return \"two-thirds majority\"\n    case Majority.TwoThirdsNoAbstentions:\n      return \"two-thirds majority\"\n    case Majority.Simple:\n    default:\n      return \"simple majority\";\n  }\n}\n\nexport type ResolutionID = string;\n\nexport interface ResolutionData {\n  name: string;\n  link: string;\n  proposer?: MemberID;\n  seconder?: MemberID;\n  status: ResolutionStatus;\n  caucus?: CaucusID;\n  amendments?: Dictionary<AmendmentID, AmendmentData>;\n  votes?: Votes;\n  amendmentsArePublic?: boolean; // TODO: Migrate\n  requiredMajority?: Majority; // TODO: Migrate\n}\n\nexport enum Vote {\n  For = 'For',\n  Abstaining = 'Abstaining',\n  Against = 'Against'\n}\n\ntype Votes = Dictionary<string, Vote>;\n\nexport const DEFAULT_RESOLUTION: ResolutionData = {\n  name: 'untitled resolution',\n  link: '',\n  status: ResolutionStatus.Introduced,\n  amendments: {} as Dictionary<AmendmentID, AmendmentData>,\n  votes: {} as Votes,\n  amendmentsArePublic: false,\n  requiredMajority: Majority.Simple\n};\n\nexport default class Resolution extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const { match } = props;\n\n    this.state = {\n      committeeFref: firebase.database().ref('committees').child(match.params.committeeID),\n      loading: true\n    };\n  }\n\n  authStateChangedCallback = (user: firebase.User | null) => {\n    this.setState({ user: user });\n  }\n\n  firebaseCallback = (committee: firebase.database.DataSnapshot | null) => {\n    if (committee) {\n      this.setState({ committee: committee.val(), loading: false });\n    }\n  }\n\n  componentDidMount() {\n    this.state.committeeFref.on('value', this.firebaseCallback);\n\n    const authUnsubscribe = firebase.auth().onAuthStateChanged(\n      this.authStateChangedCallback,\n    );\n\n    this.setState({ authUnsubscribe });\n  }\n\n  componentWillUnmount() {\n    this.state.committeeFref.off('value', this.firebaseCallback);\n\n    if (this.state.authUnsubscribe) {\n      this.state.authUnsubscribe();\n    }\n  }\n\n  recoverResolutionFref = () => {\n    const resolutionID: ResolutionID = this.props.match.params.resolutionID;\n\n    return this.state.committeeFref\n      .child('resolutions')\n      .child(resolutionID);\n  }\n\n  handlePushAmendment = (): void => {\n    this.recoverResolutionFref().child('amendments').push().set(DEFAULT_AMENDMENT);\n  }\n\n  handleProvisionAmendment = (id: AmendmentID, amendment: AmendmentData) => {\n    const { committeeID } = this.props.match.params;\n    const { proposer, text } = amendment;\n\n    const newCaucus: CaucusData = {\n      ...DEFAULT_CAUCUS,\n      name: `Amendment by ${amendment.proposer}`,\n      topic: text,\n      speaking: {\n        duration: DEFAULT_CAUCUS.speakerTimer.remaining,\n        who: proposer,\n        stance: Stance.For,\n      }\n    };\n\n    const ref = putCaucus(committeeID, newCaucus);\n\n    this.recoverResolutionFref().child('amendments').child(id).child('caucus').set(ref.key);\n\n    this.gotoCaucus(ref.key);\n  }\n\n  gotoCaucus = (caucusID: CaucusID | null | undefined) => {\n    const { committeeID } = this.props.match.params;\n\n    if (caucusID) {\n      this.props.history\n        .push(`/committees/${committeeID}/caucuses/${caucusID}`);\n    }\n  }\n\n  handleProvisionResolution = (resolutionData: ResolutionData) => {\n    const { committeeID } = this.props.match.params;\n    const { proposer, seconder, name } = resolutionData;\n\n    const newCaucus: CaucusData = {\n      ...DEFAULT_CAUCUS,\n      name: name,\n      speaking: {\n        duration: DEFAULT_CAUCUS.speakerTimer.remaining,\n        who: proposer || '', // defend against undefined proposers\n        stance: Stance.For,\n      }\n    };\n\n    const ref = putCaucus(committeeID, newCaucus);\n\n    ref.child('queue').push().set({\n      duration: DEFAULT_CAUCUS.speakerTimer.remaining,\n      who: seconder,\n      stance: Stance.For,\n    });\n\n    this.recoverResolutionFref().child('caucus').set(ref.key);\n\n    this.gotoCaucus(ref.key);\n  }\n\n  renderAmendment = (id: AmendmentID, amendment: AmendmentData, amendmentFref: firebase.database.Reference) => {\n    const { handleProvisionAmendment } = this;\n    const { proposer, text, status } = amendment;\n    const { user, committee } = this.state;\n\n    const textArea = (\n      <TextArea\n        value={text}\n        label=\"Text\"\n        autoHeight\n        onChange={textAreaHandler<AmendmentData>(amendmentFref, 'text')}\n        rows={1}\n        placeholder=\"Text\"\n      />\n    );\n\n    let hasAuth = false;\n\n    if (committee && user) {\n      hasAuth = committee.creatorUid === user.uid;\n    }\n\n    const statusDropdown = (\n      <Dropdown\n        disabled={!hasAuth}\n        value={status}\n        options={AMENDMENT_STATUS_OPTIONS}\n        onChange={dropdownHandler<AmendmentData>(amendmentFref, 'status')}\n      />\n    );\n\n    const memberOptions = recoverMemberOptions(this.state.committee);\n\n    const proposerDropdown = (\n      <Form.Dropdown\n        key=\"proposer\"\n        icon=\"search\"\n        value={nameToMemberOption(proposer).key}\n        error={!proposer}\n        search\n        selection\n        fluid\n        label=\"Proposer\"\n        placeholder=\"Proposer\"\n        onChange={memberDropdownHandler<AmendmentData>(amendmentFref, 'proposer', memberOptions)}\n        options={memberOptions}\n      />\n    );\n\n    const provisionTree = recoverLinkedCaucus(amendment) ? (\n      <Button\n        floated=\"right\"\n        content=\"Associated Caucus\"\n        onClick={() => this.gotoCaucus(amendment!.caucus)}\n      />\n    ):(\n      <Button\n        floated=\"right\"\n        disabled={!amendment || amendment.proposer === '' || !hasAuth}\n        content=\"Provision Caucus\"\n        onClick={() => handleProvisionAmendment(id, amendment!)}\n      />\n    );\n\n    return (\n      <Card\n        key={id}\n      >\n        <Card.Content>\n          <Card.Header>\n            {statusDropdown}\n            <Button\n              floated=\"right\"\n              icon=\"trash\"\n              negative\n              disabled={!hasAuth}\n              basic\n              onClick={() => amendmentFref.remove()}\n            />\n            {provisionTree}\n          </Card.Header>\n          <Card.Meta>\n            {proposerDropdown}\n          </Card.Meta>\n          <Form>\n            {textArea}\n          </Form>\n        </Card.Content>\n      </Card>\n    );\n  }\n\n  cycleVote = (memberID: MemberID, member: MemberData, currentVote?: Vote) => {\n    const { resolutionID, committeeID } = this.props.match.params;\n\n    // leave this be in the case of undefined and Against\n    let newVote = undefined;\n\n    if (currentVote === undefined) {\n      newVote = Vote.For;\n    } else if (currentVote === Vote.For) {\n      if (member.voting) {\n        newVote = Vote.Against;\n      } else {\n        newVote = Vote.Abstaining;\n      }\n    } else if (currentVote === Vote.Abstaining) {\n      newVote = Vote.Against;\n    } else if (currentVote === Vote.Against) {\n      // delete the vote\n    }\n\n    voteOnResolution(committeeID, resolutionID, memberID, newVote);\n  }\n\n  renderVotingMember = (key: MemberID, member: MemberData, vote?: Vote) => {\n    const { cycleVote } = this;\n\n    let color: 'green' | 'yellow' | 'red' | undefined;\n    let icon: SemanticICONS = 'question';\n\n    if (vote === Vote.For) {\n      color = 'green';\n      icon = 'plus';\n    } else if (vote === Vote.Abstaining) {\n      color = 'yellow';\n      icon = 'minus';\n    } else if (vote === Vote.Against) {\n      color = 'red';\n      icon = 'remove';\n    }\n\n    const button = (\n      <Button\n        floated=\"left\"\n        color={color}\n        icon\n        onClick={() => cycleVote(key, member, vote)}\n      >\n        <Icon\n          name={icon}\n          color={color === 'yellow' ? 'black' : undefined}\n        />\n      </Button>\n    );\n\n    // const { voting, rank } = member;\n    // const veto: boolean = rank === Rank.Veto;\n\n    // const description = (\n    //   <List.Description>\n    //     Veto\n    //   </List.Description>\n    // );\n\n    const voting = (\n      <Popup\n        trigger={<Label style={{ marginLeft: 5 }} circular size=\"mini\" color=\"purple\">V</Label>}\n        content=\"Voting\"\n      />\n    );\n\n    return (\n      <List.Item key={key}>\n        {button}\n        <List.Content verticalAlign=\"middle\">\n          <List.Header>\n            {member.name.toUpperCase()}\n            {member.voting && voting}\n            {/* {!member.present && <Label circular color=\"red\" size=\"mini\">NP</Label>} */}\n          </List.Header>\n        </List.Content>\n      </List.Item>\n    );\n  }\n\n  renderStats = () => {\n    const { committee } = this.state;\n\n    return <CommitteeStats verbose={false} data={committee} />;\n  }\n\n  renderCount = (key: string, color: SemanticCOLORS, icon: SemanticICONS, count: number) => {\n    const trigger = (\n      <Button\n        key={'count' + key}\n        color={color}\n        icon\n        fluid\n      >\n        {key.toUpperCase()}: {count}\n      </Button>\n    );\n\n    return (\n      <Grid.Column key={key}>\n        {/* <Button\n          key={'icon' + key}\n          color={color}\n          icon\n        >\n          <Icon\n            name={icon}\n            color={color === 'yellow' ? 'black' : undefined}\n          />\n        </Button> */}\n        <Popup trigger={trigger}>\n          {this.renderStats()}\n        </Popup>\n      </Grid.Column>\n    );\n  }\n\n  renderMajoritySelector = (resolution?: ResolutionData) => {\n    const resolutionFref = this.recoverResolutionFref();\n    const requiredMajority = resolution ? resolution.requiredMajority : undefined;\n\n    return (\n      <Dropdown\n        placeholder=\"Select majority type\"\n        search\n        options={MAJORITY_OPTIONS}\n        onChange={dropdownHandler<ResolutionData>(resolutionFref, 'requiredMajority')}\n        value={requiredMajority || DEFAULT_RESOLUTION.requiredMajority}\n      />\n    )\n\n  }\n\n  renderVoting = (resolution?: ResolutionData) => {\n    const { renderVotingMember, renderCount } = this;\n    const { committee } = this.state;\n\n    const members = (committee ? committee.members : undefined) || {};\n    const votes = (resolution ? resolution.votes : undefined) || {};\n\n    const sortedPresentAndCanVote = _.chain(members)\n      .keys()\n      .filter(key => canVote(members[key]) && members[key].present)\n      .sortBy((key: string) => [members[key].name])\n      .value();\n\n    const rendered = sortedPresentAndCanVote\n      .map((key: string) => renderVotingMember(key, members[key], votes[key]));\n\n    const vetoes = _.chain(sortedPresentAndCanVote)\n      .filter((key: string) => members[key].rank === Rank.Veto && votes[key] === Vote.Against)\n      .map(key => members[key])\n      .value();\n\n    const resolutionVetoed = !!vetoes[0];\n\n    const votesByVoters = Object.keys(votes || {})\n      .filter(k => sortedPresentAndCanVote.includes(k))\n      .map(k => votes[k]);\n\n    const fors = votesByVoters.filter(v => v === Vote.For).length;\n    const abstains = votesByVoters.filter(v => v === Vote.Abstaining).length;\n    const againsts = votesByVoters.filter(v => v === Vote.Against).length;\n    const remaining = sortedPresentAndCanVote.length - votesByVoters.length;\n\n    const requiredMajority: Majority = resolution\n      ? (resolution.requiredMajority || DEFAULT_RESOLUTION.requiredMajority as Majority)\n      : DEFAULT_RESOLUTION.requiredMajority as Majority;\n\n    const threshold = getThreshold(requiredMajority, committee, fors, againsts);\n    const thresholdName = getThresholdName(requiredMajority);\n\n    const resolutionPassed: boolean = fors >= threshold && !resolutionVetoed;\n    const resolutionFailed: boolean = fors + remaining < threshold && !resolutionVetoed;\n\n    const COLUMNS = 3;\n    const ROWS = Math.ceil(sortedPresentAndCanVote.length / COLUMNS);\n\n    const columns = _.times(3, i => (\n      <Grid.Column key={i}>\n        <List\n          inverted\n        >\n          {_.chain(rendered).drop(ROWS * i).take(ROWS).value()}\n        </List>\n      </Grid.Column>\n    ));\n\n\n    return (\n      <Segment inverted loading={!resolution} textAlign=\"center\">\n        <Grid columns=\"equal\">\n          {columns}\n        </Grid>\n        <Grid columns=\"equal\">\n          {renderCount('yes', 'green', 'plus', fors)}\n          {renderCount('no', 'red', 'remove', againsts)}\n          {renderCount('abstaining', 'yellow', 'minus', abstains)}\n        </Grid>\n        {resolutionPassed && <Statistic inverted>\n          <Statistic.Value>Passed</Statistic.Value>\n          <Statistic.Label>{fors} clears the required {thresholdName} of {threshold}</Statistic.Label>\n          {requiredMajority === Majority.TwoThirdsNoAbstentions &&\n            <Statistic.Label>Further votes may change the result from 'Passed'</Statistic.Label>\n          }\n        </Statistic>}\n        {resolutionFailed && <Statistic inverted>\n          <Statistic.Value>Failed</Statistic.Value>\n          <Statistic.Label>There are insufficient votes remaining to achieve a {thresholdName}</Statistic.Label>\n        </Statistic>}\n        {resolutionVetoed && <Statistic inverted>\n          <Statistic.Value>Vetoed</Statistic.Value>\n          <Statistic.Label>{vetoes[0].name} was the first to veto the resolution</Statistic.Label>\n        </Statistic>}\n        <Segment inverted>\n          {this.renderMajoritySelector(resolution)}\n        </Segment>\n      </Segment>\n    );\n  }\n\n  renderMeta = (resolution?: ResolutionData) => {\n    const resolutionFref = this.recoverResolutionFref();\n    const { handleProvisionResolution, amendmentsArePublic } = this;\n\n    const memberOptions = recoverMemberOptions(this.state.committee);\n\n    // TFW no null coalescing operator\n    const proposer = resolution\n      ? resolution.proposer\n      : undefined;\n\n    const seconder = resolution\n      ? resolution.seconder\n      : undefined;\n\n    const hasIdenticalProposerSeconder = proposer && seconder ? proposer === seconder : false;\n\n    const proposerTree = (\n      <Form.Dropdown\n        key=\"proposer\"\n        icon=\"search\"\n        value={proposer ? nameToMemberOption(proposer).key : undefined}\n        error={!proposer || hasIdenticalProposerSeconder}\n        loading={!resolution}\n        search\n        selection\n        fluid\n        onChange={memberDropdownHandler<ResolutionData>(resolutionFref, 'proposer', memberOptions)}\n        options={memberOptions}\n        label=\"Proposer\"\n      />\n    );\n\n    const seconderTree = (\n      <Form.Dropdown\n        key=\"seconder\"\n        loading={!resolution}\n        icon=\"search\"\n        value={seconder ? nameToMemberOption(seconder).key : undefined}\n        error={!seconder || hasIdenticalProposerSeconder}\n        search\n        selection\n        fluid\n        onChange={memberDropdownHandler<ResolutionData>(resolutionFref, 'seconder', memberOptions)}\n        options={memberOptions}\n        label=\"Seconder\"\n      />\n    );\n\n    const hasError = hasIdenticalProposerSeconder;\n\n    const provisionTree = this.hasLinkedCaucus(resolution) ? (\n      <Form.Button\n        loading={!resolution}\n        disabled={!resolution}\n        content=\"Associated Caucus\"\n        onClick={() => this.gotoCaucus(resolution!.caucus)}\n      />\n    ) : (\n        // if there's no linked caucus\n        <Form.Button\n          loading={!resolution}\n          disabled={!resolution || !resolution.proposer || !resolution.seconder || hasError}\n          content=\"Provision Caucus\"\n          onClick={() => handleProvisionResolution(resolution!)}\n        />\n      );\n\n    return (\n      <React.Fragment>\n        <Segment attached={amendmentsArePublic(resolution) ? 'top' : undefined}>\n          <Form error={hasError}>\n            {proposerTree}\n            {seconderTree}\n            {IDENTITCAL_PROPOSER_SECONDER}\n            {provisionTree}\n            <Form.Checkbox\n              label=\"Delegates can amend\"\n              indeterminate={!resolution}\n              toggle\n              checked={amendmentsArePublic(resolution)}\n              onChange={checkboxHandler<ResolutionData>(resolutionFref, 'amendmentsArePublic')}\n            />\n          </Form>\n        </Segment>\n        {amendmentsArePublic(resolution) && DELEGATES_CAN_AMEND_NOTICE}\n      </React.Fragment>\n    );\n  }\n\n  renderText = (resolution?: ResolutionData) => {\n    const resolutionFref = this.recoverResolutionFref();\n\n    return (\n      <Form>\n        <TextArea\n          value={resolution ? resolution.link : ''}\n          autoHeight\n          onChange={textAreaHandler<ResolutionData>(resolutionFref, 'link')}\n          attatched=\"top\"\n          rows={3}\n          placeholder=\"Resolution text\"\n        />\n      </Form>\n    )\n  }\n\n  renderHeader = (resolution?: ResolutionData) => {\n    const resolutionFref = this.recoverResolutionFref();\n\n    const statusDropdown = (\n      <Dropdown\n        value={resolution ? resolution.status : ResolutionStatus.Introduced}\n        options={RESOLUTION_STATUS_OPTIONS}\n        onChange={dropdownHandler<ResolutionData>(resolutionFref, 'status')}\n        loading={!resolution}\n      />\n    );\n\n    return (\n        <Segment>\n          <Input\n            value={resolution ? resolution.name : ''}\n            label={statusDropdown}\n            loading={!resolution}\n            labelPosition=\"right\"\n            onChange={fieldHandler<ResolutionData>(resolutionFref, 'name')}\n            attatched=\"top\"\n            size=\"massive\"\n            fluid\n            placeholder=\"Set resolution name\"\n          />\n        </Segment>\n    );\n  }\n\n  renderAmendments = (amendments: Dictionary<AmendmentID, AmendmentData>) => {\n    const { renderAmendment, recoverResolutionFref } = this;\n\n    const resolutionRef = recoverResolutionFref();\n\n    return Object.keys(amendments).reverse().map(key => {\n      return renderAmendment(key, amendments[key], resolutionRef.child('amendments').child(key));\n    });\n  }\n\n  renderAmendmentsGroup = (resolution?: ResolutionData) => {\n    const { renderAmendments, handlePushAmendment } = this;\n    const amendments = resolution ? resolution.amendments : undefined;\n\n    const adder = (\n      <Card>\n        {/* <Card.Content> */}\n        <Button\n          icon=\"plus\"\n          primary\n          fluid\n          basic\n          onClick={handlePushAmendment}\n        />\n        {/* </Card.Content> */}\n      </Card>\n    );\n\n    return (\n      <Card.Group\n        itemsPerRow={1}\n      >\n        {adder}\n        {renderAmendments(amendments || {} as Dictionary<string, AmendmentData>)}\n      </Card.Group>\n    );\n  }\n\n  hasLinkedCaucus = (resolution?: ResolutionData): boolean => {\n    return resolution\n      ? !!resolution.caucus\n      : false;\n  }\n\n  amendmentsArePublic = (resolution?: ResolutionData): boolean => {\n    return resolution\n      ? resolution.amendmentsArePublic || false\n      : false;\n  }\n\n  renderFeed = () => {\n    const resolutionID: ResolutionID = this.props.match.params.resolutionID;\n\n    return <Files {...this.props} forResolution={resolutionID} />;\n  }\n\n  onTabChange = (event: React.MouseEvent<HTMLDivElement>, data: TabProps) => {\n    const { committeeID, resolutionID } = this.props.match.params;\n\n    // @ts-ignore\n    const tab = TAB_ORDER[data.activeIndex];\n\n    if (tab) {\n      this.props.history\n        .push(`/committees/${committeeID}/resolutions/${resolutionID}/${tab}`);\n    } else {\n      this.props.history\n        .push(`/committees/${committeeID}/resolutions/${resolutionID}`);\n    }\n  }\n\n  renderResolution = (resolution?: ResolutionData) => {\n    const { renderAmendmentsGroup, renderVoting, renderFeed, renderText } = this;\n    const { tab } = this.props.match.params;\n\n    let index = TAB_ORDER.findIndex(x => x === tab)\n    if (index === -1) {\n      index = 0\n    }\n\n    const panes = [\n      {\n        menuItem: 'Feed',\n        render: () => <Tab.Pane>{renderFeed()}</Tab.Pane>\n      }, {\n        menuItem: 'Text',\n        render: () => <Tab.Pane>{renderText(resolution)}</Tab.Pane>\n      }, {\n        menuItem: 'Amendments',\n        render: () => <Tab.Pane>{renderAmendmentsGroup(resolution)}</Tab.Pane>\n      }, {\n        menuItem: 'Voting',\n        render: () => <Tab.Pane>{renderVoting(resolution)}</Tab.Pane>\n      }\n    ];\n\n    return (\n      <Container>\n        <Grid columns=\"equal\" stackable>\n          <Grid.Row>\n            <Grid.Column>\n              {this.renderHeader(resolution)}\n            </Grid.Column>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Column width={11}>\n              <Tab panes={panes} onTabChange={this.onTabChange} activeIndex={index}/>\n            </Grid.Column>\n            <Grid.Column width={5}>\n              {this.renderMeta(resolution)}\n            </Grid.Column>\n          </Grid.Row>\n        </Grid >\n      </Container>\n    );\n  }\n\n  render() {\n    const { committee, loading } = this.state;\n    const resolutionID: ResolutionID = this.props.match.params.resolutionID;\n\n    const resolutions = committee ? committee.resolutions : {};\n    const resolution = (resolutions || {})[resolutionID];\n\n    if (!loading && !resolution) {\n      return (\n        <Container text>\n          <NotFound item=\"resolution\" id={resolutionID} />\n        </Container>\n      );\n    } else {\n      return this.renderResolution(resolution);\n    }\n  }\n}\n","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport { CommitteeData } from './Committee';\nimport { RouteComponentProps } from 'react-router';\nimport { URLParameters } from '../types';\nimport { TextArea, Form, Container } from 'semantic-ui-react';\nimport { textAreaHandler } from '../actions/handlers';\nimport Loading from './Loading';\n\ninterface Props extends RouteComponentProps<URLParameters> {\n}\n\ninterface State {\n  committee?: CommitteeData;\n  committeeFref: firebase.database.Reference;\n}\n\nexport default class Notes extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const { match } = props;\n\n    this.state = {\n      committeeFref: firebase.database().ref('committees')\n        .child(match.params.committeeID)\n    };\n  }\n\n  firebaseCallback = (committee: firebase.database.DataSnapshot | null) => {\n    if (committee) {\n      this.setState({ committee: committee.val() });\n    }\n  }\n\n  componentDidMount() {\n    this.state.committeeFref.on('value', this.firebaseCallback);\n  }\n\n  componentWillUnmount() {\n    this.state.committeeFref.off('value', this.firebaseCallback);\n  }\n\n  render() {\n    const { committee, committeeFref } = this.state;\n\n    // const trigger = <Button icon=\"question\" size=\"mini\" basic floated=\"right\" />;\n\n    return committee ? (\n      <Container text style={{ padding: '1em 0em' }}>\n        <Form>\n          <TextArea\n            value={committee ? committee.notes : ''}\n            onChange={textAreaHandler<CommitteeData>(committeeFref, 'notes')}\n            autoHeight\n            placeholder=\"Notes\"\n          />\n          {/* <Popup\n            trigger={trigger}\n            content=\"Shift + Enter to add a new line\"\n            basic\n          /> */}\n        </Form>\n      </Container> \n    ) : <Loading />;\n  }\n}","import * as React from 'react';\n\ninterface Props {\n}\n\ninterface State {\n  latestVersion?: string;\n  timerId?: NodeJS.Timer;\n}\n\nexport const CLIENT_VERSION = 'v3.0.0 BETA (UNYC-CustomDev)';\n\nexport const CLIENT_VERSION_LINK = (\n  <a href=\"https://github.com/vicbab/Muncoordinated-2/\">\n    {CLIENT_VERSION}\n  </a>\n);\n\nconst RELEASES_LATEST = 'https://api.github.com/repos/MaxwellBo/Muncoordinated-2/releases/latest';\n\nexport default class Footer extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {};\n  }\n\n  fetchLatestVersion = (): Promise<void> => {\n    this.setState({ latestVersion: undefined });\n\n    return fetch(RELEASES_LATEST).then(response =>\n      response.json()\n    ).then(json =>\n      this.setState({ latestVersion: json.tag_name })\n    );\n  }\n\n  componentDidMount() {\n    const { fetchLatestVersion } = this;\n    fetchLatestVersion();\n\n    this.setState({ timerId: setInterval(fetchLatestVersion, 1000 * 60 * 30) });\n  }\n\n  componentWillUnmount() {\n    const { timerId } = this.state;\n\n    if (timerId) {\n      clearInterval(timerId);\n    }\n  }\n\n  render() {\n    const { latestVersion } = this.state;\n\n    const refreshNudge = (\n      <span>\n        . New version available; refresh the page twice\n      </span>\n    );\n\n    // const willShowNudge = latestVersion && latestVersion !== CLIENT_VERSION;\n    const willShowNudge = false;\n\n    return (\n      <div style={{ position: 'fixed', bottom: 5, left: 5, background: '#FFFFFF' }}>\n        {CLIENT_VERSION_LINK} by <a href=\"https://github.com/vicbab\">Victor B.</a> &amp; <a href=\"https://github.com/MaxwellBo\">Max Bo</a>{willShowNudge && refreshNudge}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport { Button, Segment, Header, List, Container } from 'semantic-ui-react';\nimport { CLIENT_VERSION_LINK } from './Footer';\n\nexport const KEYBOARD_SHORTCUT_LIST = (\n  <List>\n    <List.Item>\n      <Button size=\"mini\">\n        Alt\n      </Button>\n      <Button size=\"mini\">\n        N\n      </Button>\n      Next Speaker\n    </List.Item>\n    <List.Item>\n      <Button size=\"mini\">\n        Alt\n      </Button>\n      <Button size=\"mini\">\n        S\n      </Button>\n      Toggle Speaker Timer\n    </List.Item>\n    <List.Item>\n      <Button size=\"mini\">\n        Alt\n      </Button>\n      <Button size=\"mini\">\n        C\n      </Button>\n      Toggle Caucus Timer\n    </List.Item>\n  </List>\n);\n\nexport default class Help extends React.PureComponent<{}, {}> {\n  gpl = ( \n    <a href=\"https://github.com/MaxwellBo/Muncoordinated-2/blob/master/LICENSE\">\n      GNU AGPLv3\n    </a>\n  );\n\n  render() {\n    const { gpl } = this;\n\n    return (\n      <Container text style={{ padding: '1em 0em' }}>\n        <Header as=\"h3\" attached=\"top\">Keyboard Shortcuts</Header>\n        <Segment attached=\"bottom\">\n        {KEYBOARD_SHORTCUT_LIST}\n        </Segment>\n        <Header as=\"h3\" attached=\"top\">Bug Reporting &amp; Help Requests</Header>\n        <Segment attached=\"bottom\">\n          In the event that a bug or issue crops up, follow these steps:\n          <br />\n          <List ordered>\n            <List.Item>\n              Create an issue on the <a href=\"https://github.com/MaxwellBo/Muncoordinated-2/issues\">\n                Muncoordinated issue tracking page\n              </a>. You can also use this for help requests regarding the apps usage\n            </List.Item>\n            <List.Item>\n              Describe what you intended to do\n            </List.Item>\n            <List.Item>\n              Describe what happened instead \n            </List.Item>\n            <List.Item>\n              List the version of the app you're using ({CLIENT_VERSION_LINK})\n            </List.Item>\n            <List.Item>\n              List the time, date, and browser that you were using when this occured\n            </List.Item>\n          </List>\n          <br />\n          If you're at an Australian MUN, I'll see if I can push a fix within the hour.\n        </Segment>\n        <Header as=\"h3\" attached=\"top\">License</Header>\n        <Segment attached=\"bottom\">\n          Muncoordinated is licensed under {gpl}\n        </Segment>\n      </Container>\n    );\n  }\n}\n","import * as firebase from 'firebase/app';\nimport { CommitteeID } from '../components/Committee';\nimport { TimerData, DEFAULT_TIMER } from '../components/Timer';\nimport { CaucusID } from '../components/Caucus';\n\n// tslint:disable-next-line\nexport const putUnmodTimer = (committeeID: CommitteeID, timerData: TimerData): Promise<any> => {\n  const ref = firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('timer')\n    .set(timerData);\n\n  return ref;\n};\n\n// tslint:disable-next-line\nconst extendTimer = (ref: firebase.database.Reference, seconds: number): Promise<any> => {\n  return ref.transaction((timerData: TimerData) => {\n      if (timerData) {\n\n        let newRemaining;\n\n        // This is correct, if not a little unclear\n        if (timerData.remaining <= 0) {\n          newRemaining = seconds;\n        } else if (!timerData.ticking) {\n          newRemaining = timerData.remaining + seconds;\n        } else {\n          newRemaining = seconds;\n        }\n\n        return { ...DEFAULT_TIMER, remaining: newRemaining };\n\n      } else {\n        return timerData;\n      }\n    });\n};\n\n// tslint:disable-next-line\nexport const extendModTimer = (committeeID: CommitteeID, caucusID: CaucusID, seconds: number): Promise<any> => {\n  const ref = firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('caucuses')\n    .child(caucusID)\n    .child('caucusTimer');\n\n  return extendTimer(ref, seconds);\n};\n\n// tslint:disable-next-line\nexport const extendUnmodTimer = (committeeID: CommitteeID, seconds: number): Promise<any> => {\n  const ref = firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('timer');\n\n  return extendTimer(ref, seconds);\n};","import * as firebase from 'firebase/app';\nimport * as _ from 'lodash';\nimport * as React from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { URLParameters, Dictionary } from '../types';\nimport { getStrawpollRef } from '../actions/strawpoll-actions';\nimport { useObject } from 'react-firebase-hooks/database';\nimport { Container, Header, Input, Button, List, Icon, Checkbox, Form, CheckboxProps, Progress } from 'semantic-ui-react';\nimport { fieldHandler, clearableZeroableValidatedNumberFieldHandler } from '../actions/handlers';\nimport Loading from './Loading';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useLocalStorage, uuidv4 } from '../utils';\nimport { StrawpollShareHint } from './ShareHint';\nimport { NotFound } from './NotFound';\n\nenum StrawpollStage {\n  Preparing = 'preparing',\n  Voting = 'voting',\n  Results = 'results',\n}\n\nenum StrawpollType {\n  Checkbox = 'checkbox',\n  Radio = 'radio'\n}\n\nenum StrawpollMedium {\n  Manual = 'manual',\n  Link = 'link'\n}\n\nexport type StrawpollID = string;\nexport type StrawpollOptionID = string;\nexport type StrawpollVoteID = string;\n\nexport const DEFAULT_STRAWPOLL: StrawpollData = {\n  question: 'undefined question',\n  stage: StrawpollStage.Preparing,\n  type: StrawpollType.Checkbox,\n  medium: StrawpollMedium.Link,\n  options: {},\n}\n\nexport interface StrawpollData {\n  question: string\n  type: StrawpollType\n  stage: StrawpollStage\n  medium?: StrawpollMedium\n  options?: Dictionary<StrawpollOptionID, StrawpollOptionData>\n}\n\nexport interface StrawpollOptionData {\n  text: string\n  votes?: Dictionary<StrawpollVoteID, StrawpollVoteData>\n  tally?: number\n}\n\nconst DEFAULT_STRAWPOLL_OPTION: StrawpollOptionData = {\n  text: '',\n  votes: {}\n}\n\nexport interface StrawpollVoteData {\n  voterID: string\n}\n\nexport interface StrawpollProps extends RouteComponentProps<URLParameters> {\n} \n\nfunction getNumberOfVotes(option: StrawpollOptionData, medium: StrawpollMedium) {\n\n  if (medium === StrawpollMedium.Manual) {\n    return option.tally || 0;\n  } else {\n    let votes = 0;\n\n    Object.keys(option.votes || {}).forEach(vid => {\n      votes += 1;\n    })\n\n    return votes;\n  }\n}\n\nexport default function Strawpoll(props: StrawpollProps) {\n    const { committeeID, strawpollID } = props.match.params;\n    const strawpollFref = getStrawpollRef(committeeID, strawpollID)\n    const  [value, loading] = useObject(strawpollFref);\n    const [user] = useAuthState(firebase.auth());\n    const [voterID, setVoterID] = useLocalStorage('voterID', undefined);\n\n    if (!voterID) {\n      setVoterID(uuidv4())\n    }\n\n\n    if (loading) {\n      return <Loading />\n    }\n\n    const strawpoll: StrawpollData | undefined = value ? value.val() : undefined;\n\n    if (!strawpoll) {\n      return <Container text>\n        <NotFound id={strawpollID} item=\"strawpoll\" />\n      </Container>;\n    }\n\n    const stage: StrawpollStage = strawpoll ? strawpoll.stage || StrawpollStage.Results : StrawpollStage.Voting;\n    const medium: StrawpollMedium = strawpoll ? strawpoll.medium || StrawpollMedium.Link : StrawpollMedium.Link;\n    const options: Dictionary<StrawpollOptionID, StrawpollOptionData> = \n      strawpoll ? strawpoll.options || {}: {};\n\n    let totalVotes = 0;\n\n    Object.keys(options).forEach(oid => {\n      totalVotes += getNumberOfVotes(options[oid], medium)\n    })\n\n    const addOption = () => {\n      strawpollFref.child('options').push(DEFAULT_STRAWPOLL_OPTION);\n    }\n\n    const createSharablePoll = () => {\n      strawpollFref.child('stage').set(StrawpollStage.Voting);\n      strawpollFref.child('medium').set(StrawpollMedium.Link);\n    }\n\n    const createManualPoll = () => {\n      strawpollFref.child('stage').set(StrawpollStage.Voting);\n      strawpollFref.child('medium').set(StrawpollMedium.Manual);\n    }\n\n    const reopenVoting = () => {\n      strawpollFref.child('stage').set(StrawpollStage.Voting);\n    }\n\n    const editOptions = () => {\n      strawpollFref.child('stage').set(StrawpollStage.Preparing);\n    }\n\n    const viewResults = () => {\n      strawpollFref.child('stage').set(StrawpollStage.Results);\n    }\n\n    const onCheck = (oid: StrawpollOptionID) => (event: React.FormEvent<HTMLInputElement>, data: CheckboxProps) => {\n      if (data.checked) {\n        strawpollFref\n          .child('options')\n          .child(oid)\n          .child('votes')\n          .child(voterID)\n          .set(true)\n      } else {\n        strawpollFref\n          .child('options')\n          .child(oid)\n          .child('votes')\n          .child(voterID)\n          .remove()\n      }\n    }\n\n    const renderOption = (optionID: StrawpollOptionID, option: StrawpollOptionData) => {\n      const strawpollOptionFref = strawpollFref\n        .child('options')\n        .child(optionID);\n\n      const isChecked = \n        option.votes \n          ? option.votes[voterID] \n            ? !!option.votes[voterID]\n            : false\n          : false\n\n      const votes = getNumberOfVotes(option, medium);\n\n      /* eslint no-unused-expressions: \"warn\" */\n      switch (stage) {\n        case StrawpollStage.Preparing:\n          return <List.Item key={optionID}>\n            <Input\n              value={option.text}\n              onChange={fieldHandler<StrawpollOptionData>(strawpollOptionFref, 'text')}\n              fluid\n              placeholder=\"Enter poll option\"\n              action\n            >\n              <input />\n              <Button\n                negative\n                icon=\"trash\"\n                basic\n                onClick={() => strawpollOptionFref.remove()}\n              />\n            </Input>\n          </List.Item>\n        case StrawpollStage.Voting:\n          return medium === StrawpollMedium.Link ? <Form.Field key={optionID}>\n            <Checkbox\n              label={option.text}\n              name='checkboxRadioGroup'\n              value={option.text}\n              checked={isChecked}\n              onChange={onCheck(optionID)}\n            />\n          </Form.Field> : \n            <List.Item key={optionID}>\n              <Input\n                fluid\n                placeholder=\"Number of votes received\"\n                label={option.text}\n                value={(!!option.tally || (option.tally === 0) ? option.tally : '').toString()}\n                error={option.tally === undefined}\n                onChange={clearableZeroableValidatedNumberFieldHandler<StrawpollOptionData>(strawpollOptionFref, 'tally')}\n              />\n            </List.Item>\n        case StrawpollStage.Results:\n          return <List.Item key={optionID}>\n            <b>{option.text}</b> {votes} votes\n            <Progress progress='value' value={votes} total={totalVotes} />\n          </List.Item>\n        default:\n          <div />\n      }\n    }\n\n  let buttons = <div />;\n\n  switch (stage) {\n    case StrawpollStage.Preparing:\n      buttons =\n        <Button.Group fluid>\n          <Button\n            color=\"purple\"\n            basic\n            onClick={addOption}\n          >\n            <Icon name=\"plus\" />Add Option\n          </Button>\n          <Button\n            primary\n            basic\n            onClick={createSharablePoll}\n          >\n            Create sharable poll\n            </Button>\n          <Button\n            primary\n            basic\n            onClick={createManualPoll}\n          >\n            Create manual poll\n            </Button>\n        </Button.Group>\n      break;\n    case StrawpollStage.Voting:\n      buttons =\n        <Button.Group fluid>\n          <Button\n            basic\n            color=\"purple\"\n            onClick={editOptions}\n          >\n            Edit options\n          </Button>\n          <Button\n            primary\n            basic\n            disabled={!user}\n            onClick={viewResults}\n          >\n            View results\n          </Button>\n        </Button.Group>\n      break;\n    case StrawpollStage.Results:\n      buttons = \n        <Button\n          fluid\n          primary\n          basic\n          onClick={reopenVoting}\n        >\n          Reopen voting\n        </Button>\n      break;\n    default:\n      break;\n  }\n\n  const optionsTree = Object.keys(options).map(key => {\n    return renderOption(key, options[key])\n  })\n\n\n  return (\n      <Container text style={{ padding: '1em 0em' }}>\n        <Header as=\"h2\">\n          <Input\n            value={strawpoll ? strawpoll.question : ''}\n            onChange={fieldHandler<StrawpollData>(strawpollFref, 'question')}\n            fluid\n            placeholder=\"Type your question here\"\n          />\n        </Header>\n        {stage === StrawpollStage.Voting && medium === StrawpollMedium.Link &&\n          <StrawpollShareHint committeeID={committeeID} strawpollID={strawpollID} />\n        }\n        <List>\n          {optionsTree}\n        </List>\n        {buttons}\n      </Container>\n    );\n}","import * as firebase from 'firebase/app';\nimport { StrawpollData, StrawpollID } from '../components/Strawpoll';\nimport { CommitteeID } from '../components/Committee';\n\nexport const putStrawpoll = \n  (committeeID: CommitteeID, strawpollData: StrawpollData): firebase.database.ThenableReference => {\n\n  const ref = firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('strawpolls')\n    .push();\n\n  ref.set(strawpollData);\n\n  return ref;\n};\n\nexport const getStrawpollsRef = \n  (committeeID: CommitteeID): firebase.database.Reference => {\n\n  return firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('strawpolls')\n};\n\nexport const getStrawpollRef = \n  (committeeID: CommitteeID, strawpollID: StrawpollID): firebase.database.Reference => {\n\n  return firebase.database()\n    .ref('committees')\n    .child(committeeID)\n    .child('strawpolls')\n    .child(strawpollID);\n};","import * as React from 'react';\nimport { CommitteeID } from './Committee';\nimport { List, Message } from 'semantic-ui-react';\nimport { StrawpollID } from './Strawpoll';\n\nexport function CommitteeShareHint(props: {\n  committeeID: CommitteeID;\n}) {\n  const hostname = window.location.hostname;\n  const { committeeID } = props;\n  const url = `${hostname}/committees/${committeeID}`;\n\n  return (\n    <React.Fragment>\n      Send <a href={`/committees/${committeeID}`}><b>{url}</b></a> to delegates so that they may: \n      <List bulleted>\n        <List.Item>Upload files</List.Item>\n        <List.Item>Add themselves to speaker's lists that have the 'Delegates can queue' flag enabled</List.Item>\n        <List.Item>Add and edit amendments on resolutions that have the 'Delegates can amend' flag enabled</List.Item>\n        <List.Item>Vote on strawpolls</List.Item>\n      </List>\n    </React.Fragment>\n  );\n}\n\nexport function StrawpollShareHint(props: {\n  committeeID: CommitteeID;\n  strawpollID: StrawpollID;\n}) {\n  const hostname = window.location.hostname;\n  const { committeeID, strawpollID } = props;\n  const url = `${hostname}/committees/${committeeID}/strawpolls/${strawpollID}`;\n\n  return (\n    <Message info>\n      <Message.Header>Sharable voting link</Message.Header>\n      <a href={`/committees/${committeeID}/strawpolls/${strawpollID}`}><b>{url}</b></a>\n    </Message>\n  );\n}\n","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport { CommitteeData, CommitteeID, DEFAULT_COMMITTEE, recoverCaucus, recoverResolution, recoverMemberOptions } from './Committee';\nimport { RouteComponentProps } from 'react-router';\nimport { Icon, Button, Card, Form, Message, Flag, Label,\n  Container, Divider } from 'semantic-ui-react';\nimport { stateFieldHandler,\n  stateDropdownHandler,\n  stateValidatedNumberFieldHandler,\n  stateMemberDropdownHandler,\n  stateTextAreaHandler\n} from '../actions/handlers';\nimport { makeDropdownOption, implies } from '../utils';\nimport { TimerSetter, Unit, getSeconds } from './TimerSetter';\nimport { nameToMemberOption, parseFlagName } from './Member';\nimport { DEFAULT_CAUCUS, CaucusData, CaucusID, CaucusStatus, DEFAULT_SPEAKER_TIME_SECONDS } from './Caucus';\nimport { putCaucus, closeCaucus, putSpeaking } from '../actions/caucus-actions';\nimport { TimerData } from './Timer';\nimport { putUnmodTimer, extendUnmodTimer, extendModTimer } from '../actions/committee-actions';\nimport { URLParameters, Dictionary } from '../types';\nimport { ResolutionData, DEFAULT_RESOLUTION, ResolutionID, IDENTITCAL_PROPOSER_SECONDER } from './Resolution';\nimport { Stance } from './caucus/SpeakerFeed';\nimport { AmendmentData, DEFAULT_AMENDMENT } from './Amendment';\nimport { putAmendment, putResolution } from '../actions/resolution-actions';\nimport _ from 'lodash';\nimport { putStrawpoll } from '../actions/strawpoll-actions';\nimport { DEFAULT_STRAWPOLL } from './Strawpoll';\nimport { makeCommitteeStats } from './Admin';\n\nexport type MotionID = string;\n\nconst DIVISIBILITY_ERROR = (\n  <Message\n    error\n    content=\"Speaker time does not evenly divide the caucus time\"\n  />\n);\n\nenum MotionType {\n  OpenUnmoderatedCaucus = 'Informal Session',\n  OpenModeratedCaucus = 'Open Moderated Caucus',\n  ExtendUnmoderatedCaucus = 'Extend Unmoderated Caucus',\n  ExtendModeratedCaucus = 'Extend Moderated Caucus',\n  CloseModeratedCaucus = 'Close Moderated Caucus',\n  IntroduceDraftResolution = 'Introduce Draft Resolution',\n  IntroduceAmendment = 'Introduce Amendment',\n  SuspendDraftResolutionSpeakersList = 'Suspend Draft Resolution Speakers List',\n  VoteOnResolution = 'Vote On Resolution',\n  OpenDebate = 'Open Debate',\n  SuspendDebate = 'Suspend Debate',\n  ResumeDebate = 'Resume Debate',\n  CloseDebate = 'Close Debate',\n  ReorderDraftResolutions = 'Reorder Draft Resolutions',\n  ProposeStrawpoll = 'Propose Strawpoll',\n  AddToListRequest = 'Request to be added to the Speaker\\'s list',\n  GeneralNoteToDAIS = 'Note to DAIS'\n}\n\nconst disruptiveness = (motionType: MotionType): number => {\n  switch (motionType) {\n    case MotionType.AddToListRequest:\n      return 1;\n    case MotionType.GeneralNoteToDAIS:\n      return 1;\n    case MotionType.ExtendUnmoderatedCaucus:\n      return 1;\n    case MotionType.ExtendModeratedCaucus:\n    case MotionType.CloseModeratedCaucus:\n      return 2;\n    case MotionType.OpenUnmoderatedCaucus:\n      return 4;\n    case MotionType.OpenModeratedCaucus:\n      return 5;\n    case MotionType.ProposeStrawpoll:\n      return 6;\n    case MotionType.IntroduceDraftResolution:\n      return 7;\n    case MotionType.IntroduceAmendment:\n      return 8;\n    case MotionType.SuspendDraftResolutionSpeakersList:\n      return 9;\n    case MotionType.OpenDebate:\n    case MotionType.SuspendDebate:\n    case MotionType.ResumeDebate:\n    case MotionType.CloseDebate:\n    case MotionType.VoteOnResolution:\n      return 10;\n    case MotionType.ReorderDraftResolutions:\n      return 11;\n    default:\n      return 69; // nice\n  }\n};\n\nconst actionName = (motionType: MotionType): string => {\n  switch (motionType) {\n    case MotionType.ExtendUnmoderatedCaucus:\n    case MotionType.ExtendModeratedCaucus:\n      return 'Extend';\n    case MotionType.CloseModeratedCaucus:\n    case MotionType.CloseDebate:\n      return 'Close';\n    case MotionType.OpenUnmoderatedCaucus:\n    case MotionType.OpenDebate:\n    case MotionType.OpenModeratedCaucus:\n      return 'Open';\n    case MotionType.IntroduceDraftResolution:\n    case MotionType.IntroduceAmendment:\n      return 'Introduce';\n    case MotionType.SuspendDraftResolutionSpeakersList:\n    case MotionType.SuspendDebate:\n      return 'Suspend';\n    case MotionType.ResumeDebate:\n      return 'Resume';\n    case MotionType.ReorderDraftResolutions:\n      return 'Reorder';\n    case MotionType.ProposeStrawpoll:\n      return 'Create';\n    case MotionType.VoteOnResolution:\n      return 'Vote';\n    default:\n      return 'Enact';\n  }\n};\n\nconst approvable = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.OpenModeratedCaucus:\n    case MotionType.OpenUnmoderatedCaucus:\n    case MotionType.IntroduceDraftResolution:\n    case MotionType.ExtendUnmoderatedCaucus:\n    case MotionType.ExtendModeratedCaucus:\n    case MotionType.CloseModeratedCaucus:\n    case MotionType.IntroduceAmendment:\n    case MotionType.ProposeStrawpoll:\n    case MotionType.VoteOnResolution:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst hasSpeakers = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.OpenModeratedCaucus:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst hasSeconder = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.IntroduceDraftResolution:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst hasDetail = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.OpenModeratedCaucus:\n    case MotionType.IntroduceDraftResolution:\n    case MotionType.IntroduceAmendment:\n    case MotionType.GeneralNoteToDAIS:\n    case MotionType.ProposeStrawpoll:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst hasTextArea = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.IntroduceAmendment:\n      return true;\n    case MotionType.GeneralNoteToDAIS:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst detailLabel = (motionType: MotionType): string => {\n  switch (motionType) {\n    case MotionType.OpenModeratedCaucus:\n      return 'Topic';\n    case MotionType.IntroduceDraftResolution:\n      return 'Name';\n    case MotionType.IntroduceAmendment:\n    case MotionType.GeneralNoteToDAIS:\n      return 'Text';\n    case MotionType.ProposeStrawpoll:\n      return 'Question';\n    default:\n      return '';\n  }\n};\n\nconst hasDuration = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    // case MotionType.ExtendUnmoderatedCaucus:\n    // case MotionType.ExtendModeratedCaucus:\n    // case MotionType.OpenModeratedCaucus:\n    // case MotionType.OpenUnmoderatedCaucus:\n      // return true;\n    default:\n      return false;\n  }\n};\n\nconst interpolateTime = (motionType: MotionType, time: string): string => {\n  switch (motionType) {\n    case MotionType.ExtendUnmoderatedCaucus:\n      return `Extend unmoderated caucus by ${time}`;\n    case MotionType.ExtendModeratedCaucus:\n      return `Extend moderated caucus by ${time}`;\n    case MotionType.OpenModeratedCaucus:\n      return `${time} Moderated Caucus`;\n    case MotionType.OpenUnmoderatedCaucus:\n      return `${time} Unmoderated Caucus`;\n    default:\n      return motionType.toString();\n  }\n};\n\nconst hasCaucusTarget = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.ExtendModeratedCaucus:\n    case MotionType.CloseModeratedCaucus:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst hasResolutionTarget = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.IntroduceAmendment:\n    case MotionType.SuspendDraftResolutionSpeakersList:\n    case MotionType.VoteOnResolution:\n      return true;\n    default:\n      return false;\n  }\n};\n\nexport interface MotionData {\n  proposal: string;\n  proposer?: string;\n  seconder?: string;\n  speakerDuration?: number;\n  speakerUnit: Unit;\n  caucusDuration?: number;\n  caucusUnit: Unit;\n  type: MotionType;\n  caucusTarget?: CaucusID;\n  resolutionTarget?: ResolutionID;\n  deleted?: boolean;\n  timestamp?:number;\n}\n\ninterface Props extends RouteComponentProps<URLParameters> {\n}\n\ninterface State {\n  newMotion: MotionData;\n  committee?: CommitteeData;\n  committeeFref: firebase.database.Reference;\n}\n\nconst MOTION_TYPE_OPTIONS = [\n  MotionType.AddToListRequest,\n  MotionType.GeneralNoteToDAIS\n  // MotionType.OpenUnmoderatedCaucus, // implemented\n  // MotionType.OpenModeratedCaucus, // implemented\n  // MotionType.ExtendUnmoderatedCaucus, // partially implemented\n  // MotionType.ExtendModeratedCaucus, // partially implemented\n  // MotionType.CloseModeratedCaucus, // implemented\n  // MotionType.IntroduceDraftResolution, // implemented\n  // MotionType.IntroduceAmendment, // implemented\n  // MotionType.VoteOnResolution,\n  // MotionType.ProposeStrawpoll,\n  // MotionType.SuspendDraftResolutionSpeakersList,\n  // MotionType.OpenDebate,\n  // MotionType.SuspendDebate,\n  // MotionType.ResumeDebate,\n  // MotionType.CloseDebate,\n  // MotionType.ReorderDraftResolutions,\n].map(makeDropdownOption);\n\nconst DEFAULT_MOTION: MotionData = {\n  proposal: '',\n  speakerDuration: 60,\n  speakerUnit: Unit.Seconds,\n  caucusDuration: 10,\n  caucusUnit: Unit.Minutes,\n  type: MotionType.OpenUnmoderatedCaucus // this will force it to the top of the list\n};\n\nexport default class Motions extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const { match } = props;\n\n    this.state = {\n      committeeFref: firebase.database().ref('committees').child(match.params.committeeID),\n      newMotion: DEFAULT_MOTION\n    };\n  }\n\n  firebaseCallback = (committee: firebase.database.DataSnapshot | null) => {\n    if (committee) {\n      this.setState({ committee: committee.val() });\n    }\n  }\n\n  componentDidMount() {\n    this.state.committeeFref.on('value', this.firebaseCallback);\n  }\n\n  componentWillUnmount() {\n    this.state.committeeFref.off('value', this.firebaseCallback);\n  }\n\n  handlePushMotion = (): void => {\n    const { newMotion } = this.state;\n\n    this.state.committeeFref.child('motions').push().set(newMotion);\n\n    const duration = newMotion.caucusUnit === 'min'\n      ? (newMotion.caucusDuration || 0) + 1\n      : newMotion.caucusDuration;\n\n    this.setState(prevState => {\n      const { proposer, seconder, ...rest } = {\n        ...prevState.newMotion,\n        caucusDuration: duration,\n        proposal: ''\n      };\n\n      return {\n        newMotion: rest\n      };\n    });\n    alert(\"The DAIS has received your request. Sending another request of the same type will erase your first one.\");\n  }\n\n\n\n  handleClearMotions = (): void => {\n    const { committee } = this.state;\n\n    const { committeeFref } = this.state;\n\n    const motions = committee\n      ? committee.motions || {} as Dictionary<string, MotionData>\n      : {} as Dictionary<string, MotionData>;\n\n    Object.keys(motions).forEach(key => {\n      committeeFref\n        .child('motions')\n        .child(key)\n        .child('deleted')\n        .set(true)\n    })\n  }\n\n  handleClearAdder = () => {\n    this.setState({\n      newMotion: DEFAULT_MOTION\n    });\n  }\n\n  handleApproveMotion = (\n      motionFref: firebase.database.Reference,\n      motionData: MotionData\n  ): void => {\n    const committeeID: CommitteeID = this.props.match.params.committeeID;\n    const { committee } = this.state;\n\n    const { proposer, speakerDuration, speakerUnit,\n      caucusDuration, caucusUnit, seconder, proposal } = motionData;\n\n    const caucusID = motionData.caucusTarget;\n    const resolutionID = motionData.resolutionTarget;\n\n    motionFref.child('deleted').set(true);\n\n    if (motionData.type === MotionType.OpenModeratedCaucus && speakerDuration && caucusDuration && proposer) {\n\n      const speakerSeconds = getSeconds(speakerDuration, speakerUnit);\n      const caucusSeconds = getSeconds(caucusDuration, caucusUnit);\n\n      const newCaucus: CaucusData = {\n        ...DEFAULT_CAUCUS,\n        name: proposal,\n        speakerTimer: {\n          ...DEFAULT_CAUCUS.speakerTimer,\n          remaining: speakerSeconds\n        },\n        caucusTimer: {\n          ...DEFAULT_CAUCUS.caucusTimer,\n          remaining: caucusSeconds\n        },\n        speaking: {\n          who: proposer,\n          stance: Stance.For,\n          duration: speakerSeconds\n        },\n        speakerDuration: speakerDuration,\n        speakerUnit: speakerUnit\n      };\n\n      const caucusRef = putCaucus(committeeID, newCaucus);\n\n      this.props.history\n        .push(`/committees/${committeeID}/caucuses/${caucusRef.key}`);\n\n    } else if (motionData.type === MotionType.OpenUnmoderatedCaucus && caucusDuration) {\n      this.props.history\n        .push(`/committees/${committeeID}/unmod`);\n\n      const caucusSeconds = getSeconds(caucusDuration, caucusUnit);\n\n      const newTimer: TimerData = {\n        ...DEFAULT_COMMITTEE.timer,\n        remaining: caucusSeconds\n      };\n\n      putUnmodTimer(committeeID, newTimer);\n\n    } else if (motionData.type === MotionType.IntroduceDraftResolution && proposer && seconder) {\n      const newResolution: ResolutionData = {\n        ...DEFAULT_RESOLUTION,\n        name: proposal,\n        proposer: proposer,\n        seconder: seconder\n      };\n\n      const resolutionRef = putResolution(committeeID, newResolution);\n\n      this.props.history\n        .push(`/committees/${committeeID}/resolutions/${resolutionRef.key}`);\n\n    } else if (motionData.type === MotionType.ExtendUnmoderatedCaucus && caucusDuration) {\n      this.props.history\n        .push(`/committees/${committeeID}/unmod`);\n\n      const caucusSeconds = getSeconds(caucusDuration, caucusUnit);\n\n      // TODO: Do I wait a second before extending so it looks sexy?\n\n      // FIXME: This has an obvious bug, in that we don't have the actual timer value\n      // when this gets fired off\n      extendUnmodTimer(committeeID, caucusSeconds);\n\n    } else if (motionData.type === MotionType.ExtendModeratedCaucus && caucusDuration && caucusID && proposer && committee) {\n      this.props.history\n        .push(`/committees/${committeeID}/caucuses/${caucusID}`);\n\n      const caucusSeconds = getSeconds(caucusDuration, caucusUnit);\n\n      extendModTimer(committeeID, caucusID, caucusSeconds);\n\n      // @ts-ignore Assert that this exists\n      const caucus: CaucusData = committee.caucuses[caucusID];\n      const speakerSeconds = !caucus.speakerDuration || !caucus.speakerUnit ?\n        DEFAULT_SPEAKER_TIME_SECONDS\n        : getSeconds(caucus.speakerDuration, caucus.speakerUnit);\n\n      putSpeaking(committeeID, caucusID, {\n        who: proposer,\n        stance: Stance.For,\n        duration: speakerSeconds\n      });\n\n    } else if (motionData.type === MotionType.CloseModeratedCaucus && caucusID) {\n      this.props.history\n        .push(`/committees/${committeeID}/caucuses/${caucusID}`);\n\n      closeCaucus(committeeID, caucusID);\n    } else if (motionData.type === MotionType.IntroduceAmendment && resolutionID && proposer) {\n      this.props.history\n        .push(`/committees/${committeeID}/resolutions/${resolutionID}`);\n\n      const newAmendment: AmendmentData = {\n        ...DEFAULT_AMENDMENT,\n        text: proposal,\n        proposer: proposer\n      };\n\n      putAmendment(committeeID, resolutionID, newAmendment);\n    } else if (motionData.type === MotionType.VoteOnResolution && resolutionID) {\n      this.props.history\n        .push(`/committees/${committeeID}/resolutions/${resolutionID}/voting`);\n\n    } else if (motionData.type === MotionType.ProposeStrawpoll) {\n      const strawpollRef = putStrawpoll(committeeID, {\n        ...DEFAULT_STRAWPOLL,\n        question: proposal\n      });\n\n      this.props.history\n        .push(`/committees/${committeeID}/strawpolls/${strawpollRef.key}`);\n    }\n  }\n\n  renderMotion = (id: MotionID, motionData: MotionData, motionFref: firebase.database.Reference) => {\n    const { handleApproveMotion } = this;\n    const { committee } = this.state;\n    const { proposer, proposal, type, caucusUnit, caucusDuration, speakerUnit,\n      speakerDuration, seconder, caucusTarget, resolutionTarget } = motionData;\n\n    const caucus = recoverCaucus(committee, caucusTarget || '');\n    const caucusTargetText = caucus ? caucus.name : caucusTarget;\n\n    const resolution = recoverResolution(committee, resolutionTarget || '');\n    const resolutionTargetText = resolution ? resolution.name : resolutionTarget;\n\n    const descriptionTree = (\n      <Card.Description>\n        <Label horizontal>\n          {detailLabel(type)}\n        </Label>\n        {proposal}\n      </Card.Description>\n    );\n\n    //TODO: we definately can add links here\n    const proposerTree = (\n      <div>\n        <Label horizontal>\n          Proposer\n        </Label>\n        <Flag name={parseFlagName(proposer || '')} /> {proposer}\n      </div>\n    );\n\n    const seconderTree = (\n      <div>\n        <Label horizontal>\n          Seconder\n        </Label>\n        <Flag name={parseFlagName(seconder || '')} /> {seconder}\n      </div>\n    );\n\n    const caucusTargetTree = (\n      <div>\n        <Label horizontal>\n          Target Caucus\n        </Label>\n        {caucusTargetText}\n      </div>\n    );\n\n    const resolutionTargetTree = (\n      <div>\n        <Label horizontal>\n          Target Resolution\n        </Label>\n        {resolutionTargetText}\n      </div>\n    );\n\n    const time = hasDuration(type) ?\n      hasSpeakers(type)\n        ? `${caucusDuration || 0} ${caucusUnit} / ${speakerDuration || 0} ${speakerUnit} `\n        : `${caucusDuration || 0} ${caucusUnit} `\n      : '';\n\n    return (\n      <Card\n        className=\"motion\"\n        key={id}\n      >\n        <Card.Content>\n          <Card.Header>\n            {interpolateTime(type, time)}\n          </Card.Header>\n          <Card.Meta>\n            {proposerTree}\n            {hasSeconder(type) && seconderTree}\n            {hasCaucusTarget(type) && caucusTargetTree}\n            {hasResolutionTarget(type) && resolutionTargetTree}\n          </Card.Meta>\n          {hasDetail(type) && descriptionTree}\n        </Card.Content>\n        <Button.Group fluid attached=\"bottom\">\n          <Button\n            basic\n            negative\n            onClick={() => motionFref.child('deleted').set(true)}\n          >\n            Delete\n          </Button>\n          {approvable(type) && <Button\n            disabled={motionData.proposer === ''}\n            basic\n            positive\n            onClick={() => handleApproveMotion(motionFref, motionData)}\n          >\n            {actionName(type)}\n          </Button>}\n        </Button.Group>\n      </Card>\n    );\n  }\n\n  hasDivisiblityError = () => {\n    const { type, caucusDuration, caucusUnit, speakerDuration, speakerUnit} = this.state.newMotion;\n\n    const caucusSeconds = getSeconds(caucusDuration || 0, caucusUnit);\n    const speakerSeconds = getSeconds(speakerDuration || 0, speakerUnit);\n\n    const doesNotEvenlyDivide = (caucusSeconds % speakerSeconds) !== 0;\n\n    return hasSpeakers(type) && hasDuration(type) && doesNotEvenlyDivide;\n  }\n\n  hasIdenticalProposerSeconder = () => {\n    const { proposer, seconder } = this.state.newMotion;\n\n    return proposer && seconder ? proposer === seconder : false;\n  }\n\n  renderAdder = (committee?: CommitteeData): JSX.Element => {\n    const { newMotion } = this.state;\n    const { proposer, proposal, type, caucusUnit, caucusDuration, speakerUnit,\n      speakerDuration, seconder, caucusTarget, resolutionTarget } = newMotion;\n\n    const boxForAmmendments = (\n      <Form.TextArea\n        value={proposal}\n        autoHeight\n        onChange={stateTextAreaHandler<Props, State>(this, 'newMotion', 'proposal')}\n        rows={2}\n        label={detailLabel(newMotion.type)}\n        placeholder={detailLabel(newMotion.type)}\n      />\n    );\n\n    const boxForNames = (\n      <Form.Input\n        label=\"Name\"\n        placeholder=\"Name\"\n        value={proposal}\n        onChange={stateFieldHandler<Props, State>(this, 'newMotion', 'proposal')}\n        fluid\n      />\n    );\n\n    const description = (\n      <Form.Group widths=\"equal\">\n        {hasTextArea(newMotion.type)\n          ? boxForAmmendments\n          : boxForNames\n        }\n      </Form.Group>\n    );\n\n    const speakerSetter = (\n      <TimerSetter\n        error={this.hasDivisiblityError()}\n        unitValue={speakerUnit}\n        durationValue={speakerDuration ? speakerDuration.toString() : undefined}\n        onUnitChange={stateDropdownHandler<Props, State>(this, 'newMotion', 'speakerUnit')}\n        onDurationChange={stateValidatedNumberFieldHandler<Props, State>(this, 'newMotion', 'speakerDuration')}\n        label=\"Speaking Time\"\n      />\n    );\n\n    const durationSetter = (\n      <TimerSetter\n        error={this.hasDivisiblityError()}\n        unitValue={caucusUnit}\n        durationValue={caucusDuration ? caucusDuration.toString() : undefined}\n        onUnitChange={stateDropdownHandler<Props, State>(this, 'newMotion', 'caucusUnit')}\n        onDurationChange={stateValidatedNumberFieldHandler<Props, State>(this, 'newMotion', 'caucusDuration')}\n        label=\"Duration\"\n      />\n    );\n\n    const { caucuses, resolutions } = this.state.committee || { caucuses:  {}, resolutions: {} };\n\n    // BADCODE: Filter predicate shared with menu in Committee, also update when changing\n    // Prioritize recency\n    const caucusOptions = Object.keys(caucuses || {}).filter(key =>\n      caucuses![key].status === CaucusStatus.Open.toString()\n    ).map(key =>\n      ({ key: key, value: key, text: caucuses![key].name })\n    );\n\n    // Prioritize recency\n    const resolutionOptions = Object.keys(resolutions || {}).map(key =>\n      ({ key: key, value: key, text: resolutions![key].name })\n    );\n\n    const caucusTargetSetter = (\n      <Form.Dropdown\n        key=\"caucusTarget\"\n        value={caucusTarget}\n        search\n        selection\n        fluid\n        error={!caucusTarget}\n        loading={!committee}\n        onChange={stateDropdownHandler<Props, State>(this, 'newMotion', 'caucusTarget')}\n        options={caucusOptions}\n        icon=\"search\"\n        label=\"Target Caucus\"\n      />\n    );\n\n    const resolutionTargetSetter = (\n      <Form.Dropdown\n        key=\"resolutionTarget\"\n        value={resolutionTarget}\n        search\n        selection\n        fluid\n        error={!resolutionTarget}\n        loading={!committee}\n        onChange={stateDropdownHandler<Props, State>(this, 'newMotion', 'resolutionTarget')}\n        options={resolutionOptions}\n        icon=\"search\"\n        label=\"Target Resolution\"\n      />\n    );\n\n    const setters = (\n      <Form.Group widths=\"equal\">\n        {hasCaucusTarget(type) && caucusTargetSetter}\n        {hasResolutionTarget(type) && resolutionTargetSetter}\n        {hasDuration(type) && durationSetter}\n        {hasSpeakers(type) && speakerSetter}\n      </Form.Group>\n    );\n\n    const memberOptions = recoverMemberOptions(this.state.committee);\n\n    const proposerTree = (\n      <Form.Dropdown\n        icon=\"search\"\n        key=\"proposer\"\n        value={proposer ? nameToMemberOption(proposer).key : undefined}\n        search\n        error={!proposer || this.hasIdenticalProposerSeconder()}\n        loading={!committee}\n        selection\n        fluid\n        onChange={stateMemberDropdownHandler<Props, State>(this, 'newMotion', 'proposer', memberOptions)}\n        options={memberOptions}\n        label=\"Proposer\"\n      />\n    );\n\n    const seconderTree = (\n      <Form.Dropdown\n        icon=\"search\"\n        key=\"seconder\"\n        error={!seconder || this.hasIdenticalProposerSeconder()}\n        value={seconder ? nameToMemberOption(seconder).key : undefined}\n        loading={!committee}\n        search\n        selection\n        fluid\n        onChange={stateMemberDropdownHandler<Props, State>(this, 'newMotion', 'seconder', memberOptions)}\n        options={memberOptions}\n        label=\"Seconder\"\n      />\n    );\n\n    const hasError = this.hasDivisiblityError() || this.hasIdenticalProposerSeconder();\n\n    return (\n        <Form\n          error={hasError}\n        >\n          <Form.Dropdown\n            placeholder=\"Select type\"\n            search\n            selection\n            fluid\n            label=\"Type\"\n            icon=\"search\"\n            options={MOTION_TYPE_OPTIONS}\n            onChange={stateDropdownHandler<Props, State>(this, 'newMotion', 'type')}\n            value={type}\n          />\n          {hasDetail(type) && description}\n          <Form.Group widths=\"equal\">\n            {proposerTree}\n            {hasSeconder(type) && seconderTree}\n          </Form.Group>\n          {(hasSpeakers(type)\n            || hasDuration(type)\n            || hasCaucusTarget(type)\n            || hasResolutionTarget(type)\n            ) && setters}\n          {this.hasDivisiblityError() && DIVISIBILITY_ERROR}\n          {this.hasIdenticalProposerSeconder() && IDENTITCAL_PROPOSER_SECONDER}\n          <Button\n            icon=\"plus\"\n            basic\n            primary\n            fluids\n            disabled={!proposer\n              || !implies(hasSeconder(type), !!seconder)\n              || !implies(hasCaucusTarget(type), !!caucusTarget)\n              || !implies(hasResolutionTarget(type), !!resolutionTarget)\n              || hasError\n            }\n            onClick={this.handlePushMotion}\n          />\n        </Form>\n    );\n  }\n\n  renderMotions = (motions: Dictionary<MotionID, MotionData>) => {\n    const { renderMotion } = this;\n    const { committeeFref } = this.state;\n\n    return Object.keys(motions)\n      .filter(key => !motions[key].deleted)\n      .sort((a, b) => {\n      const ma: MotionData = motions[a];\n      const mb: MotionData = motions[b];\n      const ca = disruptiveness(ma.type);\n      const cb = disruptiveness(mb.type);\n\n      if (ca < cb) {\n        return -1;\n      } else if (ca === cb) {\n\n        const sa = (ma.caucusDuration || 0) * (ma.caucusUnit === Unit.Minutes ? 60 : 1);\n        const sb = (mb.caucusDuration || 0) * (mb.caucusUnit === Unit.Minutes ? 60 : 1);\n\n        // FIXME: Could be replaced by some sort of comapre function that I know exists\n        if (sa < sb) {\n          return 1;\n        } else if (sa === sb) {\n          return 0;\n        } else {\n          return -1;\n        }\n      } else {\n        return 1;\n      }\n    }).map(key => {\n      return renderMotion(key, motions[key], committeeFref.child('motions').child(key));\n    });\n  }\n\n  render() {\n    const { renderMotions, renderAdder } = this;\n\n    const { committee } = this.state;\n\n    const { operative } = makeCommitteeStats(this.state.committee);\n\n    const renderedMotions = committee\n      ? renderMotions(committee.motions || {} as Dictionary<string, MotionData>)\n      : []; // TODO: This could probably do with a nice spinner\n\n    return (\n      <Container text style={{ padding: '1em 0em' }}>\n        {renderAdder(committee)}\n        <Divider />\n        The DAIS receives all requests. <br/>Please only submit a maximum of one request per type at a time.\n      </Container>\n    );\n  }\n}\n","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport { CommitteeData, CommitteeID, DEFAULT_COMMITTEE, recoverCaucus, recoverResolution, recoverMemberOptions } from './Committee';\nimport { RouteComponentProps } from 'react-router';\nimport { Icon, Button, Card, Form, Message, Flag, Label,\n  Container, Divider } from 'semantic-ui-react';\nimport { stateFieldHandler,\n  stateDropdownHandler,\n  stateValidatedNumberFieldHandler,\n  stateMemberDropdownHandler,\n  stateTextAreaHandler\n} from '../actions/handlers';\nimport { makeDropdownOption, implies } from '../utils';\nimport { TimerSetter, Unit, getSeconds } from './TimerSetter';\nimport { nameToMemberOption, parseFlagName } from './Member';\nimport { DEFAULT_CAUCUS, CaucusData, CaucusID, CaucusStatus, DEFAULT_SPEAKER_TIME_SECONDS } from './Caucus';\nimport { putCaucus, closeCaucus, putSpeaking } from '../actions/caucus-actions';\nimport { TimerData } from './Timer';\nimport { putUnmodTimer, extendUnmodTimer, extendModTimer } from '../actions/committee-actions';\nimport { URLParameters, Dictionary } from '../types';\nimport { ResolutionData, DEFAULT_RESOLUTION, ResolutionID, IDENTITCAL_PROPOSER_SECONDER } from './Resolution';\nimport { Stance } from './caucus/SpeakerFeed';\nimport { AmendmentData, DEFAULT_AMENDMENT } from './Amendment';\nimport { putAmendment, putResolution } from '../actions/resolution-actions';\nimport _ from 'lodash';\nimport { putStrawpoll } from '../actions/strawpoll-actions';\nimport { DEFAULT_STRAWPOLL } from './Strawpoll';\nimport { makeCommitteeStats } from './Admin';\n\nexport type MotionID = string;\n\nconst DIVISIBILITY_ERROR = (\n  <Message\n    error\n    content=\"Speaker time does not evenly divide the caucus time\"\n  />\n);\n\nenum MotionType {\n  OpenUnmoderatedCaucus = 'Informal Session',\n  OpenModeratedCaucus = 'Open Moderated Caucus',\n  ExtendUnmoderatedCaucus = 'Extend Unmoderated Caucus',\n  ExtendModeratedCaucus = 'Extend Moderated Caucus',\n  CloseModeratedCaucus = 'Close Moderated Caucus',\n  IntroduceDraftResolution = 'Introduce Draft Resolution',\n  IntroduceAmendment = 'Introduce Amendment',\n  SuspendDraftResolutionSpeakersList = 'Suspend Draft Resolution Speakers List',\n  VoteOnResolution = 'Vote On Resolution',\n  OpenDebate = 'Open Debate',\n  SuspendDebate = 'Suspend Debate',\n  ResumeDebate = 'Resume Debate',\n  CloseDebate = 'Close Debate',\n  ReorderDraftResolutions = 'Reorder Draft Resolutions',\n  ProposeStrawpoll = 'Propose Strawpoll',\n  AddToListRequest = 'Request to be added to the Speaker\\'s list',\n  GeneralNoteToDAIS = 'Note to DAIS'\n}\n\nconst disruptiveness = (motionType: MotionType): number => {\n  switch (motionType) {\n    case MotionType.AddToListRequest:\n      return 1;\n    case MotionType.GeneralNoteToDAIS:\n      return 1;\n    case MotionType.ExtendUnmoderatedCaucus:\n      return 1;\n    case MotionType.ExtendModeratedCaucus:\n    case MotionType.CloseModeratedCaucus:\n      return 2;\n    case MotionType.OpenUnmoderatedCaucus:\n      return 4;\n    case MotionType.OpenModeratedCaucus:\n      return 5;\n    case MotionType.ProposeStrawpoll:\n      return 6;\n    case MotionType.IntroduceDraftResolution:\n      return 7;\n    case MotionType.IntroduceAmendment:\n      return 8;\n    case MotionType.SuspendDraftResolutionSpeakersList:\n      return 9;\n    case MotionType.OpenDebate:\n    case MotionType.SuspendDebate:\n    case MotionType.ResumeDebate:\n    case MotionType.CloseDebate:\n    case MotionType.VoteOnResolution:\n      return 10;\n    case MotionType.ReorderDraftResolutions:\n      return 11;\n    default:\n      return 69; // nice\n  }\n};\n\nconst actionName = (motionType: MotionType): string => {\n  switch (motionType) {\n    case MotionType.ExtendUnmoderatedCaucus:\n    case MotionType.ExtendModeratedCaucus:\n      return 'Extend';\n    case MotionType.CloseModeratedCaucus:\n    case MotionType.CloseDebate:\n      return 'Close';\n    case MotionType.OpenUnmoderatedCaucus:\n    case MotionType.OpenDebate:\n    case MotionType.OpenModeratedCaucus:\n      return 'Open';\n    case MotionType.IntroduceDraftResolution:\n    case MotionType.IntroduceAmendment:\n      return 'Introduce';\n    case MotionType.SuspendDraftResolutionSpeakersList:\n    case MotionType.SuspendDebate:\n      return 'Suspend';\n    case MotionType.ResumeDebate:\n      return 'Resume';\n    case MotionType.ReorderDraftResolutions:\n      return 'Reorder';\n    case MotionType.ProposeStrawpoll:\n      return 'Create';\n    case MotionType.VoteOnResolution:\n      return 'Vote';\n    default:\n      return 'Enact';\n  }\n};\n\nconst approvable = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.OpenModeratedCaucus:\n    case MotionType.OpenUnmoderatedCaucus:\n    case MotionType.IntroduceDraftResolution:\n    case MotionType.ExtendUnmoderatedCaucus:\n    case MotionType.ExtendModeratedCaucus:\n    case MotionType.CloseModeratedCaucus:\n    case MotionType.IntroduceAmendment:\n    case MotionType.ProposeStrawpoll:\n    case MotionType.VoteOnResolution:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst hasSpeakers = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.OpenModeratedCaucus:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst hasSeconder = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.IntroduceDraftResolution:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst hasDetail = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.OpenModeratedCaucus:\n    case MotionType.IntroduceDraftResolution:\n    case MotionType.IntroduceAmendment:\n    case MotionType.GeneralNoteToDAIS:\n    case MotionType.ProposeStrawpoll:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst hasTextArea = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.IntroduceAmendment:\n      return true;\n    case MotionType.GeneralNoteToDAIS:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst detailLabel = (motionType: MotionType): string => {\n  switch (motionType) {\n    case MotionType.OpenModeratedCaucus:\n      return 'Topic';\n    case MotionType.IntroduceDraftResolution:\n      return 'Name';\n    case MotionType.IntroduceAmendment:\n    case MotionType.GeneralNoteToDAIS:\n      return 'Text';\n    case MotionType.ProposeStrawpoll:\n      return 'Question';\n    default:\n      return '';\n  }\n};\n\nconst hasDuration = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.ExtendUnmoderatedCaucus:\n    case MotionType.ExtendModeratedCaucus:\n    case MotionType.OpenModeratedCaucus:\n    case MotionType.OpenUnmoderatedCaucus:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst interpolateTime = (motionType: MotionType, time: string): string => {\n  switch (motionType) {\n    case MotionType.ExtendUnmoderatedCaucus:\n      return `Extend unmoderated caucus by ${time}`;\n    case MotionType.ExtendModeratedCaucus:\n      return `Extend moderated caucus by ${time}`;\n    case MotionType.OpenModeratedCaucus:\n      return `${time} Moderated Caucus`;\n    case MotionType.OpenUnmoderatedCaucus:\n      return `${time} Unmoderated Caucus`;\n    default:\n      return motionType.toString();\n  }\n};\n\nconst hasCaucusTarget = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.ExtendModeratedCaucus:\n    case MotionType.CloseModeratedCaucus:\n      return true;\n    default:\n      return false;\n  }\n};\n\nconst hasResolutionTarget = (motionType: MotionType): boolean => {\n  switch (motionType) {\n    case MotionType.IntroduceAmendment:\n    case MotionType.SuspendDraftResolutionSpeakersList:\n    case MotionType.VoteOnResolution:\n      return true;\n    default:\n      return false;\n  }\n};\n\nexport interface MotionData {\n  proposal: string;\n  proposer?: string;\n  seconder?: string;\n  speakerDuration?: number;\n  speakerUnit: Unit;\n  caucusDuration?: number;\n  caucusUnit: Unit;\n  type: MotionType;\n  caucusTarget?: CaucusID;\n  resolutionTarget?: ResolutionID;\n  deleted?: boolean;\n  timestamp?:number;\n}\n\ninterface Props extends RouteComponentProps<URLParameters> {\n}\n\ninterface State {\n  newMotion: MotionData;\n  committee?: CommitteeData;\n  committeeFref: firebase.database.Reference;\n}\n\nconst MOTION_TYPE_OPTIONS = [\n  MotionType.AddToListRequest,\n  MotionType.GeneralNoteToDAIS\n  // MotionType.OpenUnmoderatedCaucus, // implemented\n  // MotionType.OpenModeratedCaucus, // implemented\n  // MotionType.ExtendUnmoderatedCaucus, // partially implemented\n  // MotionType.ExtendModeratedCaucus, // partially implemented\n  // MotionType.CloseModeratedCaucus, // implemented\n  // MotionType.IntroduceDraftResolution, // implemented\n  // MotionType.IntroduceAmendment, // implemented\n  // MotionType.VoteOnResolution,\n  // MotionType.ProposeStrawpoll,\n  // MotionType.SuspendDraftResolutionSpeakersList,\n  // MotionType.OpenDebate,\n  // MotionType.SuspendDebate,\n  // MotionType.ResumeDebate,\n  // MotionType.CloseDebate,\n  // MotionType.ReorderDraftResolutions,\n].map(makeDropdownOption);\n\nconst DEFAULT_MOTION: MotionData = {\n  proposal: '',\n  speakerDuration: 60,\n  speakerUnit: Unit.Seconds,\n  caucusDuration: 10,\n  caucusUnit: Unit.Minutes,\n  type: MotionType.OpenUnmoderatedCaucus // this will force it to the top of the list\n};\n\nexport default class MotionsAdmin extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const { match } = props;\n\n    this.state = {\n      committeeFref: firebase.database().ref('committees').child(match.params.committeeID),\n      newMotion: DEFAULT_MOTION\n    };\n  }\n\n  firebaseCallback = (committee: firebase.database.DataSnapshot | null) => {\n    if (committee) {\n      this.setState({ committee: committee.val() });\n    }\n  }\n\n  componentDidMount() {\n    this.state.committeeFref.on('value', this.firebaseCallback);\n  }\n\n  componentWillUnmount() {\n    this.state.committeeFref.off('value', this.firebaseCallback);\n  }\n\n  handlePushMotion = (): void => {\n    const { newMotion } = this.state;\n\n    this.state.committeeFref.child('motions').push().set(newMotion);\n\n    const duration = newMotion.caucusUnit === 'min'\n      ? (newMotion.caucusDuration || 0) + 1\n      : newMotion.caucusDuration;\n\n    this.setState(prevState => {\n      const { proposer, seconder, ...rest } = {\n        ...prevState.newMotion,\n        caucusDuration: duration,\n        proposal: ''\n      };\n\n      return {\n        newMotion: rest\n      };\n    });\n  }\n\n  handleClearMotions = (): void => {\n    const { committee } = this.state;\n\n    const { committeeFref } = this.state;\n\n    const motions = committee\n      ? committee.motions || {} as Dictionary<string, MotionData>\n      : {} as Dictionary<string, MotionData>;\n\n    Object.keys(motions).forEach(key => {\n      committeeFref\n        .child('motions')\n        .child(key)\n        .child('deleted')\n        .set(true)\n    })\n  }\n\n  handleClearAdder = () => {\n    this.setState({\n      newMotion: DEFAULT_MOTION\n    });\n  }\n\n  handleApproveMotion = (\n      motionFref: firebase.database.Reference,\n      motionData: MotionData\n  ): void => {\n    const committeeID: CommitteeID = this.props.match.params.committeeID;\n    const { committee } = this.state;\n\n    const { proposer, speakerDuration, speakerUnit,\n      caucusDuration, caucusUnit, seconder, proposal } = motionData;\n\n    const caucusID = motionData.caucusTarget;\n    const resolutionID = motionData.resolutionTarget;\n\n    motionFref.child('deleted').set(true);\n\n    if (motionData.type === MotionType.OpenModeratedCaucus && speakerDuration && caucusDuration && proposer) {\n\n      const speakerSeconds = getSeconds(speakerDuration, speakerUnit);\n      const caucusSeconds = getSeconds(caucusDuration, caucusUnit);\n\n      const newCaucus: CaucusData = {\n        ...DEFAULT_CAUCUS,\n        name: proposal,\n        speakerTimer: {\n          ...DEFAULT_CAUCUS.speakerTimer,\n          remaining: speakerSeconds\n        },\n        caucusTimer: {\n          ...DEFAULT_CAUCUS.caucusTimer,\n          remaining: caucusSeconds\n        },\n        speaking: {\n          who: proposer,\n          stance: Stance.For,\n          duration: speakerSeconds\n        },\n        speakerDuration: speakerDuration,\n        speakerUnit: speakerUnit\n      };\n\n      const caucusRef = putCaucus(committeeID, newCaucus);\n\n      this.props.history\n        .push(`/committees/${committeeID}/caucuses/${caucusRef.key}`);\n\n    } else if (motionData.type === MotionType.OpenUnmoderatedCaucus && caucusDuration) {\n      this.props.history\n        .push(`/committees/${committeeID}/unmod`);\n\n      const caucusSeconds = getSeconds(caucusDuration, caucusUnit);\n\n      const newTimer: TimerData = {\n        ...DEFAULT_COMMITTEE.timer,\n        remaining: caucusSeconds\n      };\n\n      putUnmodTimer(committeeID, newTimer);\n\n    } else if (motionData.type === MotionType.IntroduceDraftResolution && proposer && seconder) {\n      const newResolution: ResolutionData = {\n        ...DEFAULT_RESOLUTION,\n        name: proposal,\n        proposer: proposer,\n        seconder: seconder\n      };\n\n      const resolutionRef = putResolution(committeeID, newResolution);\n\n      this.props.history\n        .push(`/committees/${committeeID}/resolutions/${resolutionRef.key}`);\n\n    } else if (motionData.type === MotionType.ExtendUnmoderatedCaucus && caucusDuration) {\n      this.props.history\n        .push(`/committees/${committeeID}/unmod`);\n\n      const caucusSeconds = getSeconds(caucusDuration, caucusUnit);\n\n      // TODO: Do I wait a second before extending so it looks sexy?\n\n      // FIXME: This has an obvious bug, in that we don't have the actual timer value\n      // when this gets fired off\n      extendUnmodTimer(committeeID, caucusSeconds);\n\n    } else if (motionData.type === MotionType.ExtendModeratedCaucus && caucusDuration && caucusID && proposer && committee) {\n      this.props.history\n        .push(`/committees/${committeeID}/caucuses/${caucusID}`);\n\n      const caucusSeconds = getSeconds(caucusDuration, caucusUnit);\n\n      extendModTimer(committeeID, caucusID, caucusSeconds);\n\n      // @ts-ignore Assert that this exists\n      const caucus: CaucusData = committee.caucuses[caucusID];\n      const speakerSeconds = !caucus.speakerDuration || !caucus.speakerUnit ?\n        DEFAULT_SPEAKER_TIME_SECONDS\n        : getSeconds(caucus.speakerDuration, caucus.speakerUnit);\n\n      putSpeaking(committeeID, caucusID, {\n        who: proposer,\n        stance: Stance.For,\n        duration: speakerSeconds\n      });\n\n    } else if (motionData.type === MotionType.CloseModeratedCaucus && caucusID) {\n      this.props.history\n        .push(`/committees/${committeeID}/caucuses/${caucusID}`);\n\n      closeCaucus(committeeID, caucusID);\n    } else if (motionData.type === MotionType.IntroduceAmendment && resolutionID && proposer) {\n      this.props.history\n        .push(`/committees/${committeeID}/resolutions/${resolutionID}`);\n\n      const newAmendment: AmendmentData = {\n        ...DEFAULT_AMENDMENT,\n        text: proposal,\n        proposer: proposer\n      };\n\n      putAmendment(committeeID, resolutionID, newAmendment);\n    } else if (motionData.type === MotionType.VoteOnResolution && resolutionID) {\n      this.props.history\n        .push(`/committees/${committeeID}/resolutions/${resolutionID}/voting`);\n\n    } else if (motionData.type === MotionType.ProposeStrawpoll) {\n      const strawpollRef = putStrawpoll(committeeID, {\n        ...DEFAULT_STRAWPOLL,\n        question: proposal\n      });\n\n      this.props.history\n        .push(`/committees/${committeeID}/strawpolls/${strawpollRef.key}`);\n    }\n  }\n\n  renderMotion = (id: MotionID, motionData: MotionData, motionFref: firebase.database.Reference) => {\n    const { handleApproveMotion } = this;\n    const { committee } = this.state;\n    const { proposer, proposal, type, caucusUnit, caucusDuration, speakerUnit,\n      speakerDuration, seconder, caucusTarget, resolutionTarget } = motionData;\n\n    const caucus = recoverCaucus(committee, caucusTarget || '');\n    const caucusTargetText = caucus ? caucus.name : caucusTarget;\n\n    const resolution = recoverResolution(committee, resolutionTarget || '');\n    const resolutionTargetText = resolution ? resolution.name : resolutionTarget;\n\n    const descriptionTree = (\n      <Card.Description>\n        <Label horizontal>\n          {detailLabel(type)}\n        </Label>\n        {proposal}\n      </Card.Description>\n    );\n\n    //TODO: we definately can add links here\n    const proposerTree = (\n      <div>\n        <Label horizontal>\n          Proposer\n        </Label>\n        <Flag name={parseFlagName(proposer || '')} /> {proposer}\n      </div>\n    );\n\n    const seconderTree = (\n      <div>\n        <Label horizontal>\n          Seconder\n        </Label>\n        <Flag name={parseFlagName(seconder || '')} /> {seconder}\n      </div>\n    );\n\n    const caucusTargetTree = (\n      <div>\n        <Label horizontal>\n          Target Caucus\n        </Label>\n        {caucusTargetText}\n      </div>\n    );\n\n    const resolutionTargetTree = (\n      <div>\n        <Label horizontal>\n          Target Resolution\n        </Label>\n        {resolutionTargetText}\n      </div>\n    );\n\n    const time = hasDuration(type) ?\n      hasSpeakers(type)\n        ? `${caucusDuration || 0} ${caucusUnit} / ${speakerDuration || 0} ${speakerUnit} `\n        : `${caucusDuration || 0} ${caucusUnit} `\n      : '';\n\n    return (\n      <Card\n        className=\"motion\"\n        key={id}\n      >\n        <Card.Content>\n          <Card.Header>\n            {interpolateTime(type, time)}\n          </Card.Header>\n          <Card.Meta>\n            {proposerTree}\n            {hasSeconder(type) && seconderTree}\n            {hasCaucusTarget(type) && caucusTargetTree}\n            {hasResolutionTarget(type) && resolutionTargetTree}\n          </Card.Meta>\n          {hasDetail(type) && descriptionTree}\n        </Card.Content>\n        <Button.Group fluid attached=\"bottom\">\n          <Button\n            basic\n            negative\n            onClick={() => motionFref.child('deleted').set(true)}\n          >\n            Delete\n          </Button>\n          {approvable(type) && <Button\n            disabled={motionData.proposer === ''}\n            basic\n            positive\n            onClick={() => handleApproveMotion(motionFref, motionData)}\n          >\n            {actionName(type)}\n          </Button>}\n        </Button.Group>\n      </Card>\n    );\n  }\n\n  hasDivisiblityError = () => {\n    const { type, caucusDuration, caucusUnit, speakerDuration, speakerUnit} = this.state.newMotion;\n\n    const caucusSeconds = getSeconds(caucusDuration || 0, caucusUnit);\n    const speakerSeconds = getSeconds(speakerDuration || 0, speakerUnit);\n\n    const doesNotEvenlyDivide = (caucusSeconds % speakerSeconds) !== 0;\n\n    return hasSpeakers(type) && hasDuration(type) && doesNotEvenlyDivide;\n  }\n\n  hasIdenticalProposerSeconder = () => {\n    const { proposer, seconder } = this.state.newMotion;\n\n    return proposer && seconder ? proposer === seconder : false;\n  }\n\n  renderAdder = (committee?: CommitteeData): JSX.Element => {\n    const { newMotion } = this.state;\n    const { proposer, proposal, type, caucusUnit, caucusDuration, speakerUnit,\n      speakerDuration, seconder, caucusTarget, resolutionTarget } = newMotion;\n\n    const boxForAmmendments = (\n      <Form.TextArea\n        value={proposal}\n        autoHeight\n        onChange={stateTextAreaHandler<Props, State>(this, 'newMotion', 'proposal')}\n        rows={2}\n        label={detailLabel(newMotion.type)}\n        placeholder={detailLabel(newMotion.type)}\n      />\n    );\n\n    const boxForNames = (\n      <Form.Input\n        label=\"Name\"\n        placeholder=\"Name\"\n        value={proposal}\n        onChange={stateFieldHandler<Props, State>(this, 'newMotion', 'proposal')}\n        fluid\n      />\n    );\n\n    const description = (\n      <Form.Group widths=\"equal\">\n        {hasTextArea(newMotion.type)\n          ? boxForAmmendments\n          : boxForNames\n        }\n      </Form.Group>\n    );\n\n    const speakerSetter = (\n      <TimerSetter\n        error={this.hasDivisiblityError()}\n        unitValue={speakerUnit}\n        durationValue={speakerDuration ? speakerDuration.toString() : undefined}\n        onUnitChange={stateDropdownHandler<Props, State>(this, 'newMotion', 'speakerUnit')}\n        onDurationChange={stateValidatedNumberFieldHandler<Props, State>(this, 'newMotion', 'speakerDuration')}\n        label=\"Speaking Time\"\n      />\n    );\n\n    const durationSetter = (\n      <TimerSetter\n        error={this.hasDivisiblityError()}\n        unitValue={caucusUnit}\n        durationValue={caucusDuration ? caucusDuration.toString() : undefined}\n        onUnitChange={stateDropdownHandler<Props, State>(this, 'newMotion', 'caucusUnit')}\n        onDurationChange={stateValidatedNumberFieldHandler<Props, State>(this, 'newMotion', 'caucusDuration')}\n        label=\"Duration\"\n      />\n    );\n\n    const { caucuses, resolutions } = this.state.committee || { caucuses:  {}, resolutions: {} };\n\n    // BADCODE: Filter predicate shared with menu in Committee, also update when changing\n    // Prioritize recency\n    const caucusOptions = Object.keys(caucuses || {}).filter(key =>\n      caucuses![key].status === CaucusStatus.Open.toString()\n    ).map(key =>\n      ({ key: key, value: key, text: caucuses![key].name })\n    );\n\n    // Prioritize recency\n    const resolutionOptions = Object.keys(resolutions || {}).map(key =>\n      ({ key: key, value: key, text: resolutions![key].name })\n    );\n\n    const caucusTargetSetter = (\n      <Form.Dropdown\n        key=\"caucusTarget\"\n        value={caucusTarget}\n        search\n        selection\n        fluid\n        error={!caucusTarget}\n        loading={!committee}\n        onChange={stateDropdownHandler<Props, State>(this, 'newMotion', 'caucusTarget')}\n        options={caucusOptions}\n        icon=\"search\"\n        label=\"Target Caucus\"\n      />\n    );\n\n    const resolutionTargetSetter = (\n      <Form.Dropdown\n        key=\"resolutionTarget\"\n        value={resolutionTarget}\n        search\n        selection\n        fluid\n        error={!resolutionTarget}\n        loading={!committee}\n        onChange={stateDropdownHandler<Props, State>(this, 'newMotion', 'resolutionTarget')}\n        options={resolutionOptions}\n        icon=\"search\"\n        label=\"Target Resolution\"\n      />\n    );\n\n    const setters = (\n      <Form.Group widths=\"equal\">\n        {hasCaucusTarget(type) && caucusTargetSetter}\n        {hasResolutionTarget(type) && resolutionTargetSetter}\n        {hasDuration(type) && durationSetter}\n        {hasSpeakers(type) && speakerSetter}\n      </Form.Group>\n    );\n\n    const memberOptions = recoverMemberOptions(this.state.committee);\n\n    const proposerTree = (\n      <Form.Dropdown\n        icon=\"search\"\n        key=\"proposer\"\n        value={proposer ? nameToMemberOption(proposer).key : undefined}\n        search\n        error={!proposer || this.hasIdenticalProposerSeconder()}\n        loading={!committee}\n        selection\n        fluid\n        onChange={stateMemberDropdownHandler<Props, State>(this, 'newMotion', 'proposer', memberOptions)}\n        options={memberOptions}\n        label=\"Proposer\"\n      />\n    );\n\n    const seconderTree = (\n      <Form.Dropdown\n        icon=\"search\"\n        key=\"seconder\"\n        error={!seconder || this.hasIdenticalProposerSeconder()}\n        value={seconder ? nameToMemberOption(seconder).key : undefined}\n        loading={!committee}\n        search\n        selection\n        fluid\n        onChange={stateMemberDropdownHandler<Props, State>(this, 'newMotion', 'seconder', memberOptions)}\n        options={memberOptions}\n        label=\"Seconder\"\n      />\n    );\n\n    const hasError = this.hasDivisiblityError() || this.hasIdenticalProposerSeconder();\n\n    return (\n        <Form\n          error={hasError}\n        >\n          <Form.Dropdown\n            placeholder=\"Select type\"\n            search\n            selection\n            fluid\n            label=\"Type\"\n            icon=\"search\"\n            options={MOTION_TYPE_OPTIONS}\n            onChange={stateDropdownHandler<Props, State>(this, 'newMotion', 'type')}\n            value={type}\n          />\n          {hasDetail(type) && description}\n          <Form.Group widths=\"equal\">\n            {proposerTree}\n            {hasSeconder(type) && seconderTree}\n          </Form.Group>\n          {(hasSpeakers(type)\n            || hasDuration(type)\n            || hasCaucusTarget(type)\n            || hasResolutionTarget(type)\n            ) && setters}\n          {this.hasDivisiblityError() && DIVISIBILITY_ERROR}\n          {this.hasIdenticalProposerSeconder() && IDENTITCAL_PROPOSER_SECONDER}\n          <Button\n            icon=\"plus\"\n            basic\n            primary\n            fluids\n            disabled={!proposer\n              || !implies(hasSeconder(type), !!seconder)\n              || !implies(hasCaucusTarget(type), !!caucusTarget)\n              || !implies(hasResolutionTarget(type), !!resolutionTarget)\n              || hasError\n            }\n            onClick={this.handlePushMotion}\n          />\n        </Form>\n    );\n  }\n\n  renderMotions = (motions: Dictionary<MotionID, MotionData>) => {\n    const { renderMotion } = this;\n    const { committeeFref } = this.state;\n\n    return Object.keys(motions)\n      .filter(key => !motions[key].deleted)\n      .sort((a, b) => {\n      const ma: MotionData = motions[a];\n      const mb: MotionData = motions[b];\n      const ca = disruptiveness(ma.type);\n      const cb = disruptiveness(mb.type);\n\n      if (ca < cb) {\n        return -1;\n      } else if (ca === cb) {\n\n        const sa = (ma.caucusDuration || 0) * (ma.caucusUnit === Unit.Minutes ? 60 : 1);\n        const sb = (mb.caucusDuration || 0) * (mb.caucusUnit === Unit.Minutes ? 60 : 1);\n\n        // FIXME: Could be replaced by some sort of comapre function that I know exists\n        if (sa < sb) {\n          return 1;\n        } else if (sa === sb) {\n          return 0;\n        } else {\n          return -1;\n        }\n      } else {\n        return 1;\n      }\n    }).map(key => {\n      return renderMotion(key, motions[key], committeeFref.child('motions').child(key));\n    });\n  }\n\n  render() {\n    const { renderMotions, renderAdder } = this;\n\n    const { committee } = this.state;\n\n    const { operative } = makeCommitteeStats(this.state.committee);\n\n    const renderedMotions = committee\n      ? renderMotions(committee.motions || {} as Dictionary<string, MotionData>)\n      : []; // TODO: This could probably do with a nice spinner\n\n    return (\n      <Container text style={{ padding: '1em 0em' }}>\n        {renderAdder(committee)}\n        <Divider />\n\n        <Divider />\n        <Card.Group\n          itemsPerRow={1}\n        >\n          {renderedMotions}\n        </Card.Group>\n      </Container>\n    );\n  }\n}\n","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport { Card, Button, Form, Message, Modal, Icon, List, Segment } from 'semantic-ui-react';\nimport { CommitteeID, CommitteeData } from './Committee';\nimport _ from 'lodash';\nimport Loading from './Loading';\nimport { Dictionary } from '../types';\n\nenum Mode {\n  Login = 'Login',\n  ForgotPassword = 'ForgotPassword'\n}\n\ninterface State {\n  user?: firebase.User | null;\n  email: string;\n  password: string;\n  error?: Error;\n  success?: { name?: string, message?: string }; // like Error\n  loggingIn: boolean;\n  creating: boolean;\n  mode: Mode;\n  resetting: boolean;\n  unsubscribe?: () => void;\n  committees?: Dictionary<CommitteeID, CommitteeData>;\n  isAdmin?: boolean;\n}\n\ninterface Props {\n  allowSignup?: boolean;\n  allowNewCommittee?: boolean;\n}\n\nexport class Login extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      email: '',\n      password: '',\n      mode: Mode.Login,\n      loggingIn: false,\n      creating: false,\n      resetting: false\n    };\n  }\n\n  authStateChangedCallback = (user: firebase.User | null) => {\n    this.setState({ loggingIn: false, creating: false, user: user });\n\n    if (user) {\n      firebase.database()\n        .ref('committees')\n        .orderByChild('creatorUid')\n        .equalTo(user.uid)\n        .once('value').then(committees => {\n          // we need to || {} because this returns undefined when it can't find anything\n          this.setState({ committees: committees.val() || {} });\n        });\n    }\n  }\n\n  componentDidMount() {\n    const unsubscribe = firebase.auth().onAuthStateChanged(\n      this.authStateChangedCallback,\n    );\n\n    this.setState({ unsubscribe });\n  }\n\n  componentWillUnmount() {\n    if (this.state.unsubscribe) {\n      this.state.unsubscribe();\n    }\n  }\n\n  handleLogout = () => {\n    firebase.auth().signOut().catch(err => {\n      this.setState({ error: err });\n    });\n  }\n\n  handleLogin = () => {\n    const { email, password } = this.state;\n\n    this.setState({ loggingIn: true });\n\n    firebase.auth().signInWithEmailAndPassword(email, password).then(() => {\n      this.setState({ loggingIn: false });\n    }).catch(err => {\n      this.setState({ loggingIn: false, error: err });\n    });\n  }\n\n  handleCreate = () => {\n    const { email, password } = this.state;\n    this.setState({ creating: true });\n\n    firebase.auth().createUserWithEmailAndPassword(email, password).then(() => {\n      const success = {\n        name: 'Account created',\n        message: 'Your account was successfully created'\n      };\n\n      this.setState({ creating: false, success });\n    }).catch(err => {\n      this.setState({ creating: false, error: err });\n    });\n  }\n\n  handlePasswordReset = () => {\n    const { email } = this.state;\n    this.setState({ resetting: true });\n\n    firebase.auth().sendPasswordResetEmail(email).then(() => {\n      const success = {\n        name: 'Password reset',\n        message: `Check your inbox at ${email} for further instructions`\n      };\n\n      this.setState({ resetting: false, success });\n    }).catch(err => {\n      this.setState({ resetting: false, error: err });\n    });\n  }\n\n  handleDismissError = () => {\n    this.setState({ error: undefined });\n  }\n\n  handleDismissSuccess = () => {\n    this.setState({ success: undefined });\n  }\n\n  handleForgotPassword = () => {\n    this.setState({ mode: Mode.ForgotPassword });\n  }\n\n  handleResetPasswordCancel = () => {\n    this.setState( { mode: Mode.Login });\n  }\n\n  setEmail = (e: React.FormEvent<HTMLInputElement>) =>\n    this.setState({ email: e.currentTarget.value })\n\n  setPassword = (e: React.FormEvent<HTMLInputElement>) =>\n    this.setState({ password: e.currentTarget.value })\n\n  renderCommittees = () => {\n    const { renderCommittee } = this;\n    const { committees } = this.state;\n\n    const defaulted = committees || {} as Dictionary<CommitteeID, CommitteeData>;\n    const owned = _.keys(defaulted);\n\n    return (\n      <List relaxed>\n        {owned.map(k => renderCommittee(k, defaulted[k]))}\n      </List>\n    );\n  }\n\n  renderCommittee = (committeeID: CommitteeID, committee: CommitteeData) => {\n    const target = `/committees/${committeeID}`;\n\n    return (\n      <List.Item key={committeeID}>\n        <List.Content>\n          <List.Header as=\"a\" href={target}>{committee.name}</List.Header>\n          <List.Description>{committee.topic}</List.Description>\n        </List.Content>\n      </List.Item>\n    );\n  }\n\n  renderError = () => {\n    const { handleDismissError } = this;\n\n    const err = this.state.error;\n\n    return (\n      <Message\n        key=\"error\"\n        error\n        onDismiss={handleDismissError}\n      >\n        <Message.Header>{err ? err.name : ''}</Message.Header>\n        <Message.Content>{err ? err.message : ''}</Message.Content>\n      </Message>\n    );\n  }\n\n  renderSuccess = () => {\n    const { handleDismissSuccess } = this;\n\n    const succ = this.state.success;\n\n    return (\n      <Message\n        key=\"success\"\n        success\n        onDismiss={handleDismissSuccess}\n      >\n        <Message.Header>{succ ? succ.name : ''}</Message.Header>\n        <Message.Content>{succ ? succ.message : ''}</Message.Content>\n      </Message>\n    );\n  }\n\n  renderNotice = () => {\n    const list = [\n      'Login to access your previously created committees, or to create a new committee',\n      'Multiple directors may use the same account concurrently from different computers - use a password you\\'re willing to share'\n    ];\n\n    return (\n      <Message attached=\"top\" info list={list} />\n    );\n  }\n\n  renderLoggedIn = (u: firebase.User) => {\n    const { handleLogout, renderCommittees, renderSuccess } = this;\n    const { committees } = this.state;\n    const { allowNewCommittee } = this.props;\n\n    return (\n      <Card centered>\n        <Card.Content key=\"main\">\n          <Card.Header>\n            {u.email}\n          </Card.Header>\n          <Card.Meta>\n            Logged in\n          </Card.Meta>\n        </Card.Content>\n        <Card.Content key=\"committees\">\n          {committees ? renderCommittees() : <Loading />}\n          {allowNewCommittee && <List.Item key={'add'}>\n            <List.Content>\n                <List.Header as=\"a\" href={'/onboard'}>\n                <Icon name=\"plus\" />Create new committee\n              </List.Header>\n            </List.Content>\n          </List.Item>}\n        </Card.Content>\n        <Card.Content extra key=\"extra\">\n          <Button basic color=\"red\" fluid onClick={handleLogout}>Logout</Button>\n        </Card.Content>\n      </Card>\n    );\n  }\n\n  renderLogin = () => {\n    const { setEmail, setPassword, handleCreate,\n      handleLogin, handlePasswordReset, handleForgotPassword, handleResetPasswordCancel } = this;\n    const { loggingIn, creating, user, resetting, email, password, mode } = this.state;\n    const { allowSignup } = this.props;\n\n    const signupButton = <Button onClick={handleCreate} loading={creating} >Create Account</Button>;\n\n    const cancelButton = <Button onClick={handleResetPasswordCancel}>Cancel</Button>;\n\n    const usernameInput = <input autoComplete=\"email\" />;\n\n    const passwordInput = <input autoComplete=\"current-password\" />;\n\n    const err = this.state.error;\n    const succ = this.state.success;\n\n    return (\n      <Segment attached=\"bottom\">\n        <Form error={!!err} success={!!succ} loading={user === undefined}>\n          <Form.Input\n            key=\"email\"\n            label=\"Email\"\n            placeholder=\"joe@schmoe.com\"\n            value={email}\n            onChange={setEmail}\n          >\n            {usernameInput}\n          </Form.Input>\n          {mode === Mode.Login && <Form.Input\n            key=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            placeholder=\"Enter your password\"\n            value={password}\n            onChange={setPassword}\n          >\n            {passwordInput}\n          </Form.Input>}\n          {this.renderSuccess()}\n          {this.renderError()}\n          <Button.Group fluid>\n            {mode === Mode.Login &&\n              <Button\n                primary\n                onClick={handleLogin}\n                loading={loggingIn}\n              >\n                Login\n              </Button>\n            }\n            {mode === Mode.ForgotPassword &&\n              <Button\n                primary\n                onClick={handlePasswordReset}\n                loading={resetting}\n                disabled={!email}\n              >\n                Reset Password\n              </Button>\n            }\n          {allowSignup && mode === Mode.Login && <Button.Or />}\n          {allowSignup && mode === Mode.Login && signupButton}\n          {mode === Mode.ForgotPassword && cancelButton}\n          </Button.Group>\n          {mode === Mode.Login &&\n            <a\n              onClick={handleForgotPassword}\n              style={{'cursor': 'pointer'}}\n            >\n              Forgot password?\n            </a>}\n        </Form>\n      </Segment>\n    );\n  }\n\n  render() {\n    const { user, success } = this.state;\n\n    return (\n      <React.Fragment>\n        {success && this.renderSuccess()}\n        {!user && this.renderNotice()}\n        {user ? this.renderLoggedIn(user) : this.renderLogin()}\n      </React.Fragment>\n    );\n  }\n}\n\nexport class ModalLogin extends React.Component<{},\n  { user?: firebase.User | null\n    unsubscribe?: () => void\n  }> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  renderModalTrigger() {\n    const { user } = this.state;\n\n    const text = user ? user.email : 'Login';\n\n    return (\n      <Button loading={user === undefined} className=\"nav__auth-status\">\n        <Icon name=\"lock\" />\n        {text}\n      </Button>\n    );\n  }\n\n  authStateChangedCallback = (user: firebase.User | null) => {\n    this.setState({ user: user });\n  }\n\n  componentDidMount() {\n    const unsubscribe = firebase.auth().onAuthStateChanged(\n      this.authStateChangedCallback,\n    );\n\n    this.setState({ unsubscribe });\n  }\n\n  componentWillUnmount() {\n    if (this.state.unsubscribe) {\n      this.state.unsubscribe();\n    }\n  }\n\n  render() {\n    return (\n      <Modal\n        trigger={this.renderModalTrigger()}\n        size=\"tiny\"\n        dimmer\n        basic={true} // strip out the outer window\n      >\n        <Modal.Content>\n          <Login allowSignup={false} allowNewCommittee={true}/>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import * as React from 'react';\nimport * as firebase from 'firebase/app';\nimport { CommitteeData } from './Committee';\nimport { RouteComponentProps } from 'react-router';\nimport { URLParameters } from '../types';\nimport { Header, Segment, Checkbox, Container } from 'semantic-ui-react';\nimport { checkboxHandler } from '../actions/handlers';\n\ninterface Props extends RouteComponentProps<URLParameters> {\n}\n\ninterface State {\n  committee?: CommitteeData;\n  committeeFref: firebase.database.Reference;\n}\n\nexport interface SettingsData {\n  moveQueueUp: boolean;\n  timersInSeparateColumns: boolean;\n  autoNextSpeaker: boolean;\n}\n\nexport const DEFAULT_SETTINGS: SettingsData = {\n  moveQueueUp: false,\n  timersInSeparateColumns: false,\n  autoNextSpeaker: false\n};\n\nexport default class Settings extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const { match } = props;\n\n    this.state = {\n      committeeFref: firebase.database().ref('committees')\n        .child(match.params.committeeID)\n    };\n  }\n\n  firebaseCallback = (committee: firebase.database.DataSnapshot | null) => {\n    if (committee) {\n      this.setState({ committee: committee.val() });\n    }\n  }\n\n  componentDidMount() {\n    this.state.committeeFref.on('value', this.firebaseCallback);\n  }\n\n  componentWillUnmount() {\n    this.state.committeeFref.off('value', this.firebaseCallback);\n  }\n\n  renderSetting = (setting: keyof SettingsData, label: string) => {\n    const { committee, committeeFref } = this.state;\n\n    const settingsFref = committeeFref.child('settings');\n\n    const value = committee ? committee.settings[setting] : DEFAULT_SETTINGS[setting];\n\n    return (\n      <Checkbox \n        slider \n        indeterminate={value === undefined}\n        checked={value || false}\n        onChange={checkboxHandler<SettingsData>(settingsFref, setting)}\n        label={label}\n      />\n    );\n  }\n\n  render() {\n    const { renderSetting } = this;\n    const { committee } = this.state;\n\n    return (\n      <Container text style={{ padding: '1em 0em' }}>\n        <Header as=\"h3\" attached=\"top\">Settings</Header>\n        <Segment attached=\"bottom\" loading={!committee}>\n          {renderSetting('moveQueueUp', '\\'Queue\\' should appear above \\'Next Speaking\\'')}\n          {renderSetting(\n            'timersInSeparateColumns',\n            'Alternate arrangement with \\'Speaker Timer\\' and \\'Caucus Timer\\' in separate columns'\n          )}\n          {/* {renderSetting(\n            'autoNextSpeaker',\n            'The next speaker will automatically be moved to the \\'Now Speaking\\' position after the time has elapsed for the current speaker'\n          )} */}\n        </Segment>\n      </Container>\n    );\n  }\n}","import * as React from 'react';\nimport * as firebase from 'firebase/app';\nimport * as _ from 'lodash';\nimport { TransitionablePortal, Button, Card } from 'semantic-ui-react';\nimport { State as ConnectionStatusState } from './ConnectionStatus';\n\ninterface Props {\n}\n\ninterface State extends ConnectionStatusState {\n  notifications: Notification[];\n}\n\ninterface Notification {\n  message?: string;\n  header: string;\n  disposition: 'positive' | 'negative';\n}\n\nconst PERMISSION_DENIED_NOTIFICATION: Notification =  {\n  header: 'Permission denied',\n  message: 'Please login as the owner of this committee in order to perform that action',\n  disposition: 'negative'\n};\n\nconst CONNECTION_LOST_NOTIFICATION: Notification =  {\n  header: 'Connection lost',\n  message: 'The connection to the server was lost. You may have been logged out',\n  disposition: 'negative'\n};\n\nconst CONNECTION_REGAINED_NOTIFICATION: Notification =  {\n  header: 'Connection regained',\n  message: 'The connection to the server was regained',\n  disposition: 'positive'\n};\n\nexport default class Notifications extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      notifications: [],\n      connected: false,\n      hasConnectedBefore: false,\n      fref: firebase.database().ref('.info/connected')\n    };\n  }\n\n  computeNewNotificationState = \n  (prevState: Pick<State, 'notifications'>, notification: Notification): Pick<State, 'notifications'> => {\n      // Debounce unique\n      if (!_.some(prevState.notifications, notification)) {\n        console.info(notification);\n\n        return {\n          notifications: [...prevState.notifications, notification]\n        };\n      } else {\n        return { notifications: prevState.notifications };\n      }\n  }\n\n  firebaseCallback = (status: firebase.database.DataSnapshot | null) => {\n    const { computeNewNotificationState } = this;\n\n    if (status) {\n      this.setState((prevState: State) => { \n\n        const connected = status.val();\n\n        let acc: Pick<State, | 'notifications'> = prevState;\n\n        acc = (!connected && prevState.hasConnectedBefore)\n            ?  computeNewNotificationState(acc, CONNECTION_LOST_NOTIFICATION)\n            : acc;\n\n        acc = (!prevState.connected && connected && prevState.hasConnectedBefore)\n            ?  computeNewNotificationState(acc, CONNECTION_REGAINED_NOTIFICATION)\n            : acc;\n\n        return {\n          ...acc,\n          hasConnectedBefore: connected || prevState.hasConnectedBefore\n        };\n      });\n    }\n  }\n\n  listener: EventListener = (event: Event) => {\n    const { computeNewNotificationState } = this;\n    // @ts-ignore\n    const reason = event.reason as { code: string, message: string } | undefined; \n\n    if (reason && reason.code === 'PERMISSION_DENIED') {\n      this.setState(prevState => {\n        return computeNewNotificationState(prevState, PERMISSION_DENIED_NOTIFICATION);\n      });\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('unhandledrejection', this.listener);\n    this.state.fref.on('value', this.firebaseCallback);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('unhandledrejection', this.listener);\n    this.state.fref.off('value', this.firebaseCallback);\n  }\n\n  dismiss = (key: number) => () => {\n    const target = [...this.state.notifications];\n\n    target.splice(key, 1);\n\n    this.setState({notifications: target});\n  }\n\n  renderNotification = (notification: Notification, key: number) => {\n    return (\n      <Card style={{ 'maxWidth': 275 }} key={key} raised>\n        <Card.Content>\n          <Card.Header>{notification.header}</Card.Header>\n          {notification.message && <Card.Description>{notification.message}</Card.Description>}\n        </Card.Content>\n        <Card.Content extra>\n          <Button \n            basic \n            fluid \n            positive={notification.disposition === 'positive'} \n            negative={notification.disposition === 'negative'} \n            onClick={this.dismiss(key)}\n          >\n              Dismiss\n          </Button>\n        </Card.Content>\n      </Card>\n    );\n  }\n\n  render() {\n    const { renderNotification } = this;\n    const { notifications } = this.state;\n\n    const renderedNotifications = notifications.map(renderNotification);\n\n    return (\n      <TransitionablePortal\n        open={notifications.length > 0}\n        transition={{ animation: 'fly left', duration: 500 }}\n      >\n        <Card.Group \n          itemsPerRow={1} \n          style={{ right: 5, position: 'fixed', top: '7%', zIndex: 1000 }}\n        >\n          {renderedNotifications}\n        </Card.Group>\n      </TransitionablePortal>\n    );\n  }\n}","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport { Message, Icon } from 'semantic-ui-react';\n\ninterface Props {\n}\n\nexport interface State {\n  connected: boolean;\n  hasConnectedBefore: boolean;\n  fref: firebase.database.Reference;\n}\n\nexport default class ConnectionStatus extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      hasConnectedBefore: false,\n      connected: false,\n      fref: firebase.database().ref('.info/connected')\n    };\n  }\n\n  firebaseCallback = (status: firebase.database.DataSnapshot | null) => {\n    if (status) {\n      this.setState((prevState: State) => { \n\n        const connected = status.val();\n\n        if (!connected) {\n          console.info('Firebase connection lost');\n        }\n\n        return {\n          connected: connected,\n          hasConnectedBefore: connected || prevState.hasConnectedBefore\n        };\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.state.fref.on('value', this.firebaseCallback);\n  }\n\n  componentWillUnmount() {\n    this.state.fref.off('value', this.firebaseCallback);\n  }\n\n  render() {\n    const { connected, hasConnectedBefore } = this.state;\n\n    return (!connected && hasConnectedBefore) ? (\n      <Message icon negative>\n        <Icon name=\"circle notched\" loading />\n        <Message.Content>\n          <Message.Header>Connection Lost</Message.Header>\n          Changes are no longer being committed to the server. Either wait for a reconnection\n          or refresh the page. If you refresh the page, you will need to login again.\n        </Message.Content>\n      </Message>\n    ) : <div />;\n  }\n}","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport { CaucusData, recoverUnit, recoverDuration } from '../Caucus';\nimport { TimerData, toggleTicking } from '../Timer';\nimport { Segment, Button, Icon, Label, Popup } from 'semantic-ui-react';\nimport { runLifecycle, Lifecycle } from '../../actions/caucus-actions';\nimport { SpeakerEvent, Stance } from './SpeakerFeed';\nimport { SpeakerFeed } from './SpeakerFeed';\nimport _ from 'lodash';\nimport { Unit } from '../TimerSetter';\nimport { useObjectVal } from 'react-firebase-hooks/database';\nimport { useAuthState } from 'react-firebase-hooks/auth';\n\ninterface Props {\n  caucus?: CaucusData;\n  speakerTimer: TimerData;\n  fref: firebase.database.Reference;\n  autoNextSpeaker: boolean;\n}\n\nexport function SpeakersListVisual(props: Props) {\n  const [user] = useAuthState(firebase.auth());\n  console.log(\"allo la gagne\")\n  const handleKeyDown = (ev: KeyboardEvent) => {\n    // if changing this, update Help\n    if (ev.keyCode === 78 && ev.altKey) {\n      nextSpeaker();\n    }\n  };\n\n  const interlace = () => {\n    if (!props.caucus) {\n      return;\n    }\n\n    if (!user) {\n      return;\n    }\n\n    const q = props.caucus.queue || {};\n\n    const vs: SpeakerEvent[] = _.values(q);\n\n    const fors     = vs.filter((se) => se.stance === Stance.For);\n    const againsts = vs.filter((se) => se.stance === Stance.Against);\n    const neutrals = vs.filter((se) => se.stance === Stance.Neutral);\n\n    const interlaced = _.flatten(_.zip(fors, againsts, neutrals));\n\n    props.fref.child('queue').set({});\n\n    interlaced.forEach((se: SpeakerEvent | undefined) => {\n      if (se) {\n        props.fref.child('queue').push().set(se);\n      }\n    });\n  };\n\n  const nextSpeaker = () => {\n    if (!props.caucus) {\n      return;\n    }\n\n    const q = props.caucus.queue || {};\n\n    const queueHeadKey = Object.keys(q)[0];\n\n    let queueHeadDetails = {};\n\n    if (queueHeadKey) {\n      queueHeadDetails = {\n        queueHeadData: q[queueHeadKey],\n        queueHead: props.fref.child('queue').child(queueHeadKey)\n      };\n    }\n\n    const duration = recoverDuration(props.caucus);\n\n    const speakerSeconds: number = duration\n      ? duration * (recoverUnit(props.caucus) === Unit.Minutes ? 60 : 1)\n      : 60;\n\n    const lifecycle: Lifecycle = {\n      history: props.fref.child('history'),\n      speakingData: props.caucus.speaking,\n      speaking: props.fref.child('speaking'),\n      timerData: props.speakerTimer,\n      timer: props.fref.child('speakerTimer'),\n      yielding: false,\n      timerResetSeconds: speakerSeconds\n    };\n\n    runLifecycle({ ...lifecycle, ...queueHeadDetails });\n  };\n\n  // TODO: Improve this dirty fix\n  let skew: any\n  skew = useObjectVal<number>(firebase.database().ref('/.info/serverTimeOffset'));\n\n  const startTimer = () => {\n    toggleTicking({\n      timerFref: props.fref.child('speakerTimer'),\n      timer: props.speakerTimer,\n      skew: skew.value\n    });\n  };\n\n  const { caucus } = props;\n  const { ticking } = props.speakerTimer;\n\n  const queue = caucus ? caucus.queue : {};\n  const hasNowSpeaking = caucus ? !!caucus.speaking : false;\n  const queueLength = _.values(queue).length;\n  const hasNextSpeaking = queueLength > 0;\n  const interlaceable = queueLength > 1;\n  const nextable = hasNowSpeaking || hasNextSpeaking;\n\n  const stageButton = (\n    <p></p>\n  );\n\n  const startButton = (\n    <p></p>\n  )\n\n  const nextButton = (\n    <Button\n      basic\n      icon\n      primary\n      disabled={!nextable}\n      onClick={nextSpeaker}\n    >\n      <Icon name=\"arrow up\" />\n      Next\n    </Button>\n  );\n\n  const stopButton = (\n    <p></p>\n  );\n\n  const interlaceButton = (\n    <p></p>\n  );\n\n  let button = nextButton;\n\n  if (!hasNowSpeaking) {\n    button = stageButton;\n  } else if (hasNowSpeaking && !ticking) {\n    button = startButton;\n  } else if (hasNowSpeaking && ticking && hasNextSpeaking) {\n    button = nextButton;\n  } else if (hasNowSpeaking && ticking && !hasNextSpeaking) {\n    button = stopButton;\n  }\n\n  React.useEffect(() => {\n    document.addEventListener<'keydown'>('keydown', handleKeyDown);\n\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  });\n\n  return (\n    <Segment textAlign=\"center\" loading={!caucus}>\n      <Label attached=\"top left\" size=\"large\">Next Speaking</Label>\n      {button}\n      <Popup\n        trigger={interlaceButton}\n        content=\"Orders the list so that speakers are\n        'For', then 'Against', then 'Neutral', then 'For', etc.\"\n      />\n      <SpeakerFeed\n        data={caucus ? caucus.queue : undefined}\n        queueFref={props.fref.child('queue')}\n        speaking={caucus ? caucus.speaking : undefined}\n        speakerTimer={props.speakerTimer}\n      />\n    </Segment>\n  );\n}\n","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport _ from 'lodash';\nimport {\n  Segment, Dropdown, TextArea, Input, Grid, Feed,\n  Label, Form, Container\n} from 'semantic-ui-react';\nimport Timer, { TimerData, DEFAULT_TIMER } from './Timer';\nimport { RouteComponentProps } from 'react-router';\nimport { CommitteeData, recoverMembers, recoverSettings, recoverCaucus } from './Committee';\nimport CaucusQueuer from './caucus/CaucusQueuer';\nimport { textAreaHandler, dropdownHandler, fieldHandler } from '../actions/handlers';\nimport { makeDropdownOption } from '../utils';\nimport { URLParameters, Dictionary } from '../types';\nimport { SpeakersListVisual } from './caucus/SpeakersListVisual';\nimport { SpeakerEvent, SpeakerFeedEntry } from './caucus/SpeakerFeed';\nimport { NotFound } from './NotFound';\nimport { Unit } from './TimerSetter';\n\nexport const DEFAULT_CAUCUS_TIME_SECONDS = 10 * 60;\nexport const DEFAULT_SPEAKER_TIME_SECONDS = 1 * 60;\n\nexport function recoverUnit(caucus?: CaucusData): Unit {\n  return caucus ? (caucus.speakerUnit || Unit.Seconds) : Unit.Seconds;\n}\n\nexport function recoverDuration(caucus?: CaucusData): number | undefined {\n  return caucus\n    ? caucus.speakerDuration\n      ? caucus.speakerDuration\n      : undefined\n    : undefined;\n}\n\ninterface Props extends RouteComponentProps<URLParameters> {\n}\n\ninterface State {\n  speakerTimer: TimerData;\n  caucusTimer: TimerData;\n  committee?: CommitteeData;\n  committeeFref: firebase.database.Reference;\n  loading: boolean;\n}\n\nexport type CaucusID = string;\n\nexport enum CaucusStatus {\n  Open = 'Open',\n  Closed = 'Closed'\n}\n\nexport interface CaucusData {\n  name: string;\n  topic: string;\n  status: CaucusStatus;\n  speakerTimer: TimerData;\n  speakerDuration?: number; // TODO: Migrate\n  speakerUnit?: Unit; // TODO: Migrate\n  caucusTimer: TimerData;\n  queueIsPublic?: boolean; // TODO: Migrate\n  speaking?: SpeakerEvent;\n  queue?: Dictionary<string, SpeakerEvent>;\n  history?: Dictionary<string, SpeakerEvent>;\n}\n\nconst CAUCUS_STATUS_OPTIONS = [\n  CaucusStatus.Open,\n  CaucusStatus.Closed\n].map(makeDropdownOption);\n\nexport const DEFAULT_CAUCUS: CaucusData = {\n  name: 'untitled caucus',\n  topic: '',\n  status: CaucusStatus.Open,\n  speakerTimer: { ...DEFAULT_TIMER, remaining: DEFAULT_SPEAKER_TIME_SECONDS },\n  speakerDuration: DEFAULT_SPEAKER_TIME_SECONDS,\n  speakerUnit: Unit.Seconds,\n  caucusTimer: { ...DEFAULT_TIMER, remaining: DEFAULT_CAUCUS_TIME_SECONDS },\n  queueIsPublic: false,\n  queue: {} as Dictionary<string, SpeakerEvent>,\n  history: {} as Dictionary<string, SpeakerEvent>,\n};\n\nexport default class SpeakersList extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const { match } = props;\n\n    this.state = {\n      committeeFref: firebase.database().ref('committees').child(match.params.committeeID),\n      caucusTimer: DEFAULT_CAUCUS.caucusTimer,\n      speakerTimer: DEFAULT_CAUCUS.speakerTimer,\n      loading: true\n    };\n  }\n\n  firebaseCallback = (committee: firebase.database.DataSnapshot | null) => {\n    if (committee) {\n      this.setState({ committee: committee.val(), loading: false });\n    }\n  }\n\n  // XXX: I'm worried that this might be the source of a bug that I'm yet to observe\n  // Say our route changes the committeeID, _but does not unmount the caucus component_\n  // Will these listeners be purged?\n  componentDidMount() {\n    this.state.committeeFref.on('value', this.firebaseCallback);\n  }\n\n  componentWillUnmount() {\n    this.state.committeeFref.off('value', this.firebaseCallback);\n  }\n\n  recoverCaucusFref = () => {\n    const caucusID: CaucusID = this.props.match.params.caucusID;\n\n    return this.state.committeeFref\n      .child('caucuses')\n      .child(caucusID);\n  }\n\n  renderHeader = (caucus?: CaucusData) => {\n    const caucusFref = this.recoverCaucusFref();\n\n    const statusDropdown = (\n      <Dropdown\n        value={caucus ? caucus.status : CaucusStatus.Open}\n        options={CAUCUS_STATUS_OPTIONS}\n        onChange={dropdownHandler<CaucusData>(caucusFref, 'status')}\n      />\n    );\n\n    return (\n      <Segment loading={!caucus}>\n        <Input\n          label={statusDropdown}\n          labelPosition=\"right\"\n          value={caucus ? caucus.name : ''}\n          onChange={fieldHandler<CaucusData>(caucusFref, 'name')}\n          attatched=\"top\"\n          size=\"massive\"\n          fluid\n          placeholder=\"Set caucus name\"\n        />\n      </Segment>\n    );\n  }\n\n  renderNowSpeaking =  (caucus?: CaucusData) => {\n    const { speakerTimer } = this.state;\n\n    const caucusFref = this.recoverCaucusFref();\n\n    const entryData = caucus ? caucus.speaking : undefined;\n\n    return (\n      <Segment loading={!caucus}>\n        <Label attached=\"top left\" size=\"large\">Now Speaking</Label>\n        <Feed size=\"large\">\n          <SpeakerFeedEntry data={entryData} fref={caucusFref.child('speaking')} speakerTimer={speakerTimer}/>\n        </Feed>\n      </Segment>\n    );\n  }\n\n  setSpeakerTimer = (timer: TimerData) => {\n    this.setState({ speakerTimer: timer });\n  }\n\n  setCaucusTimer = (timer: TimerData) => {\n    this.setState({ caucusTimer: timer });\n  }\n\n  renderCaucus = (caucus?: CaucusData) => {\n    const { renderNowSpeaking, renderHeader, recoverCaucusFref } = this;\n    const { speakerTimer, committee } = this.state;\n\n    const { caucusID } = this.props.match.params;\n    const caucusFref = recoverCaucusFref();\n\n    const members = recoverMembers(committee);\n\n    const renderedSpeakerTimer = (\n      <Timer\n        name=\"Speaker Timer\"\n        timerFref={caucusFref.child('speakerTimer')}\n        key={caucusID + 'speakerTimer'}\n        onChange={this.setSpeakerTimer}\n        toggleKeyCode={83} // S - if changing this, update Help\n        defaultUnit={recoverUnit(caucus)}\n        defaultDuration={recoverDuration(caucus) || 60}\n      />\n    );\n\n    const renderedCaucusTimer = (\n      <Timer\n        name=\"Caucus Timer\"\n        timerFref={caucusFref.child('caucusTimer')}\n        key={caucusID + 'caucusTimer'}\n        onChange={this.setCaucusTimer}\n        toggleKeyCode={67} // C - if changing this, update Help\n        defaultUnit={Unit.Minutes}\n        defaultDuration={10}\n      />\n    );\n\n    const {\n      autoNextSpeaker,\n      timersInSeparateColumns,\n      moveQueueUp\n    } = recoverSettings(committee);\n\n    const header = (\n      <Grid.Row>\n        <Grid.Column>\n          {renderHeader(caucus)}\n        </Grid.Column>\n      </Grid.Row>\n    );\n\n    const renderedCaucusQueuer = (\n      <p></p>\n    );\n\n    const renderedCaucusNextSpeaking = (\n      <SpeakersListVisual\n        caucus={caucus}\n        fref={caucusFref}\n        speakerTimer={speakerTimer}\n        autoNextSpeaker={autoNextSpeaker}\n      />\n    );\n\n    const body = !timersInSeparateColumns ? (\n      <Grid.Row>\n        <Grid.Column>\n          {renderNowSpeaking(caucus)}\n          {moveQueueUp && renderedCaucusQueuer}\n          {renderedCaucusNextSpeaking}\n          {!moveQueueUp && renderedCaucusQueuer}\n        </Grid.Column>\n      </Grid.Row>\n    ) : (\n      <Grid.Row>\n        <Grid.Column>\n          {renderedSpeakerTimer}\n          {renderNowSpeaking(caucus)}\n          {renderedCaucusNextSpeaking}\n        </Grid.Column>\n        <Grid.Column>\n          {renderedCaucusTimer}\n        </Grid.Column>\n      </Grid.Row>\n    );\n\n    return (\n      <Container>\n        <Grid columns=\"equal\" stackable>\n          {header}\n          {body}\n        </Grid >\n      </Container>\n    );\n  }\n\n  render() {\n    const { committee, loading } = this.state;\n    const caucusID: CaucusID = this.props.match.params.caucusID;\n\n    const caucus = recoverCaucus(committee, caucusID);\n\n    if (!loading && !caucus) {\n      return (\n        <Container text>\n          <NotFound item=\"caucus\" id={caucusID} />\n        </Container>\n      );\n    } else {\n      return this.renderCaucus(caucus);\n    }\n  }\n}\n","import * as React from 'react';\nimport firebase from 'firebase/app';\nimport { RouteComponentProps } from 'react-router';\nimport { Route } from 'react-router-dom';\nimport { MemberData, MemberID } from './Member';\nimport Caucus, { CaucusData, CaucusID, DEFAULT_CAUCUS, DEFAULT_CAUCUS_TIME_SECONDS, CaucusStatus } from './Caucus';\nimport Resolution, { ResolutionData, ResolutionID, DEFAULT_RESOLUTION } from './Resolution';\nimport Admin from './Admin';\nimport { Icon, Menu, SemanticICONS, Dropdown, Container, Responsive, Sidebar, Header, Label, Divider,\n  List, Input, Button, Segment } from 'semantic-ui-react';\nimport Stats from './Stats';\nimport { MotionID, MotionData } from './Motions';\nimport { TimerData, DEFAULT_TIMER } from './Timer';\nimport Unmod from './Unmod';\nimport Notes from './Notes';\nimport Help, { KEYBOARD_SHORTCUT_LIST } from './Help';\nimport Motions from './Motions';\nimport MotionsAdmin from './MotionsAdmin';\nimport { putCaucus } from '../actions/caucus-actions';\nimport { URLParameters, Dictionary } from '../types';\nimport Loading from './Loading';\nimport Footer from './Footer';\nimport Settings, { SettingsData, DEFAULT_SETTINGS } from './Settings';\nimport Files, { PostID, PostData } from './Files';\nimport { ModalLogin } from './Auth';\nimport { CommitteeShareHint } from './ShareHint';\nimport Notifications from './Notifications';\nimport { putResolution } from '../actions/resolution-actions';\nimport ConnectionStatus from './ConnectionStatus';\nimport { membersToOptions } from '../utils';\nimport { fieldHandler } from '../actions/handlers';\nimport { MemberOption } from '../constants';\nimport { putStrawpoll } from '../actions/strawpoll-actions';\nimport Strawpoll, { DEFAULT_STRAWPOLL, StrawpollID, StrawpollData } from './Strawpoll';\nimport SpeakersList from './SpeakersList';\nimport { SpeakerFeed } from './caucus/SpeakerFeed'\n// import { CaucusNextSpeaking } from './caucus/CaucusNextSpeaking'\n\nexport function recoverMemberOptions(committee?: CommitteeData): MemberOption[] {\n  if (committee) {\n    return membersToOptions(committee.members);\n  } else {\n    return [];\n  }\n}\n\nexport function recoverMembers(committee?: CommitteeData): Dictionary<MemberID, MemberData> | undefined {\n  return committee ? (committee.members || {} as Dictionary<MemberID, MemberData>) : undefined;\n}\n\nexport function recoverSettings(committee?: CommitteeData): SettingsData {\n  let timersInSeparateColumns: boolean = DEFAULT_SETTINGS.timersInSeparateColumns;\n  let moveQueueUp: boolean = DEFAULT_SETTINGS.moveQueueUp;\n  let autoNextSpeaker: boolean = DEFAULT_SETTINGS.autoNextSpeaker;\n\n  if (committee) {\n    if (committee.settings.timersInSeparateColumns !== undefined) {\n      timersInSeparateColumns = committee.settings.timersInSeparateColumns;\n    }\n\n    if (committee.settings.moveQueueUp !== undefined) {\n      moveQueueUp = committee.settings.moveQueueUp;\n    }\n\n    if (committee.settings.autoNextSpeaker !== undefined) {\n      autoNextSpeaker = committee.settings.autoNextSpeaker;\n    }\n  }\n\n  return {\n    timersInSeparateColumns, moveQueueUp, autoNextSpeaker\n  };\n}\n\nexport function recoverCaucus(committee: CommitteeData | undefined, caucusID: CaucusID): CaucusData | undefined {\n  const caucuses = committee ? committee.caucuses : {};\n\n  return (caucuses || {})[caucusID];\n}\n\nexport function recoverResolution(committee: CommitteeData | undefined, resolutionID: ResolutionID): ResolutionData | undefined {\n  const resolutions = committee ? committee.resolutions : {};\n\n  return (resolutions || {})[resolutionID];\n}\n\ninterface DesktopContainerProps {\n  menu?: React.ReactNode;\n  body?: React.ReactNode;\n}\n\ninterface DesktopContainerState {\n}\n\ninterface MobileContainerProps {\n  menu?: React.ReactNode;\n  body?: React.ReactNode;\n}\n\ninterface MobileContainerState {\n  sidebarOpened: boolean;\n}\n\ninterface Props extends RouteComponentProps<URLParameters> {\n}\n\ninterface State {\n  committee?: CommitteeData;\n  committeeFref: firebase.database.Reference;\n}\n\nexport type CommitteeID = string;\n\nexport interface CommitteeData {\n  name: string;\n  chair: string;\n  topic: string;\n  conference?: string; // TODO: Migrate\n  creatorUid: firebase.UserInfo['uid'];\n  members?: Dictionary<MemberID, MemberData>;\n  caucuses?: Dictionary<CaucusID, CaucusData>;\n  resolutions?: Dictionary<ResolutionID, ResolutionData>;\n  strawpolls?: Dictionary<StrawpollID, StrawpollData>;\n  motions?: Dictionary<MotionID, MotionData>;\n  files?: Dictionary<PostID, PostData>;\n  timer: TimerData;\n  notes: string;\n  settings: SettingsData;\n}\n\nconst GENERAL_SPEAKERS_LIST: CaucusData = {\n   ...DEFAULT_CAUCUS, name: 'General Speakers List'\n};\n\nexport const DEFAULT_COMMITTEE: CommitteeData = {\n  name: '',\n  chair: '',\n  topic: '',\n  conference: '',\n  creatorUid: '',\n  members: {} as Dictionary<MemberID, MemberData>,\n  caucuses: {\n    'gsl': GENERAL_SPEAKERS_LIST\n  } as Dictionary<string, CaucusData>,\n  resolutions: {} as Dictionary<ResolutionID, ResolutionData>,\n  files: {} as Dictionary<PostID, PostData>,\n  strawpolls: {} as Dictionary<StrawpollID, StrawpollData>,\n  timer: { ...DEFAULT_TIMER, remaining: DEFAULT_CAUCUS_TIME_SECONDS },\n  notes: '',\n  settings: DEFAULT_SETTINGS\n};\n\nclass DesktopContainer extends React.Component<DesktopContainerProps, DesktopContainerState> {\n  render() {\n    const { body, menu } = this.props;\n\n    // Semantic-UI-React/src/addons/Responsive/Responsive.js\n    return (\n      <Responsive {...{ minWidth: Responsive.onlyMobile.maxWidth as number + 1 }}>\n        <Menu fluid size=\"small\">\n          {menu}\n        </Menu>\n        {body}\n      </Responsive>\n    );\n  }\n}\n\nclass MobileContainer extends React.Component<MobileContainerProps, MobileContainerState> {\n  constructor(props: MobileContainerProps) {\n    super(props);\n\n    this.state = {\n      sidebarOpened: false\n    };\n  }\n\n  handlePusherClick = () => {\n    const { sidebarOpened } = this.state;\n\n    if (sidebarOpened) {\n      this.setState({ sidebarOpened: false });\n    }\n  }\n\n  handleToggle = () => {\n    this.setState({ sidebarOpened: !this.state.sidebarOpened });\n  }\n\n  render() {\n    const { body, menu } = this.props;\n    const { sidebarOpened } = this.state;\n\n    return (\n      <Responsive {...Responsive.onlyMobile}>\n        <Sidebar.Pushable>\n          <Sidebar as={Menu} animation=\"uncover\" stackable visible={sidebarOpened}>\n            {menu}\n          </Sidebar>\n\n          <Sidebar.Pusher dimmed={sidebarOpened} onClick={this.handlePusherClick} style={{ minHeight: '100vh' }}>\n            <Menu size=\"large\">\n              <Menu.Item onClick={this.handleToggle}>\n                <Icon name=\"sidebar\" />\n              </Menu.Item>\n            </Menu>\n            {body}\n          </Sidebar.Pusher>\n        </Sidebar.Pushable>\n      </Responsive>\n    );\n  }\n}\n\ninterface ResponsiveContainerProps extends RouteComponentProps<URLParameters> {\n  children?: React.ReactNode;\n  committee?: CommitteeData;\n}\n\nfunction ResponsiveNav(props: ResponsiveContainerProps) {\n  const committeeID: CommitteeID = props.match.params.committeeID;\n\n  const makeMenuItem = (name: string, icon: SemanticICONS) => {\n    const destination = `/committees/${committeeID}/${name.toLowerCase()}`;\n\n    return (\n      <Menu.Item\n        key={name}\n        name={name.toLowerCase()}\n        active={props.location.pathname === destination}\n        onClick={() => props.history.push(destination)}\n        text={name}\n        icon={icon}\n      />\n    );\n  }\n\n  const makeSubmenuButton = (name: string, icon: SemanticICONS, f: () => void) => {\n    return (\n      <Dropdown.Item\n        key={name}\n        name={name.toLowerCase()}\n        active={false}\n        onClick={f}\n        icon={icon}\n        text={name}\n      />\n    );\n  }\n\n  const makeMenuIcon = (name: string, icon: SemanticICONS) => {\n    const destination = `/committees/${committeeID}/${name.toLowerCase()}`;\n\n    return (\n      <Menu.Item\n        key={name}\n        active={props.location.pathname === destination}\n        position=\"right\"\n        onClick={() => props.history.push(destination)}\n        icon={icon}\n      />\n    );\n  }\n\n  const makeSubmenuItem = (id: string, name: string, description: string | undefined, type: 'caucuses' | 'resolutions' | 'strawpolls') => {\n    const destination = `/committees/${committeeID}/${type}/${id}`;\n\n    return (\n      <Dropdown.Item\n        key={id}\n        name={name}\n        active={props.location.pathname === destination}\n        onClick={() => props.history.push(destination)}\n        text={name}\n      />\n    );\n  }\n\n  const pushCaucus = () => {\n    const ref = putCaucus(committeeID, DEFAULT_CAUCUS);\n\n    props.history\n      .push(`/committees/${committeeID}/caucuses/${ref.key}`);\n  }\n\n  const pushResolution = () => {\n    const ref = putResolution(committeeID, DEFAULT_RESOLUTION);\n\n    props.history\n      .push(`/committees/${committeeID}/resolutions/${ref.key}`);\n  }\n\n  const pushStrawpoll = () => {\n    const ref = putStrawpoll(committeeID, DEFAULT_STRAWPOLL);\n\n    props.history\n      .push(`/committees/${committeeID}/strawpolls/${ref.key}`);\n  }\n\n  /*\n   *{makeMenuItem('Notes', 'sticky note outline')}\n   {makeMenuItem('Posts', 'file outline')}\n   *\n   *\n   */\n\n  const renderMenuItems = () => {\n    const { committee } = props;\n\n    const caucuses = committee ? committee.caucuses : undefined;\n    const resolutions = committee ? committee.resolutions : undefined;\n    const strawpolls = committee ? committee.strawpolls : undefined;\n\n    const caucusItems = Object.keys(caucuses || {})\n      .filter(key => caucuses![key].status !== CaucusStatus.Closed)\n      .map(key => makeSubmenuItem(key, caucuses![key].name, caucuses![key].topic, 'caucuses')\n    );\n\n    const resolutionItems = Object.keys(resolutions || {}).map(key =>\n      makeSubmenuItem(key, resolutions![key].name, undefined, 'resolutions')\n    );\n\n    const strawpollItems = Object.keys(strawpolls || {}).map(key =>\n      makeSubmenuItem(key, strawpolls![key].question, undefined, 'strawpolls')\n    );\n\n    return (\n      <React.Fragment>\n        <Menu.Item\n          header\n          key=\"header\"\n          onClick={() => props.history.push(`/committees/${committeeID}`)}\n          active={props.location.pathname === `/committees/${committeeID}`}\n        >\n          {committee ? committee.name : <Loading small />}\n        </Menu.Item>\n        {makeMenuItem('Setup', 'users')}\n        {makeMenuItem('Motions', 'discussions')}\n        <Dropdown key=\"caucuses\" item text=\"Formal Session\" loading={!committee}>\n          <Dropdown.Menu>\n            {makeSubmenuButton('New caucus', 'add', pushCaucus)}\n            {caucusItems}\n          </Dropdown.Menu>\n        </Dropdown>\n        <Dropdown key=\"resolutions\" item text=\"Resolutions\" loading={!committee}>\n          <Dropdown.Menu>\n            {makeSubmenuButton('New resolution', 'add', pushResolution)}\n            {resolutionItems}\n          </Dropdown.Menu>\n        </Dropdown>\n        <Menu.Menu key=\"icon-submenu\" position=\"right\">\n          {makeMenuIcon('Settings', 'settings')}\n          {makeMenuIcon('Help', 'help')}\n        </Menu.Menu>\n        <Menu.Item key=\"login\">\n          <ModalLogin />\n        </Menu.Item>\n      </React.Fragment>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      <DesktopContainer body={props.children} menu={renderMenuItems()} />\n      <MobileContainer body={props.children} menu={renderMenuItems()} />\n    </React.Fragment>\n  );\n}\n\nexport default class Committee extends React.Component<Props, State> {\n\n  constructor(props: Props) {\n    super(props);\n\n    const committeeID: CommitteeID = this.props.match.params.committeeID;\n    this.state = {\n\n      committeeFref: firebase.database().ref('committees').child(committeeID),\n    };\n  }\n\n  firebaseCallback = (committee: firebase.database.DataSnapshot | null) => {\n    if (committee) {\n      this.setState({ committee: committee.val() });\n    }\n  }\n\n  componentDidMount() {\n    console.log('Mounted');\n    this.state.committeeFref.on('value', this.firebaseCallback);\n  }\n\n  componentWillUnmount() {\n    console.log('Unmounting');\n    this.state.committeeFref.off('value', this.firebaseCallback);\n  }\n\n  gotoSetup = () => {\n    const { committeeID } = this.props.match.params;\n\n    this.props.history\n      .push(`/committees/${committeeID}/setup`);\n  }\n\n  renderAdmin = () => {\n    return (\n      <Admin\n        {...this.props}\n        committee={this.state.committee || DEFAULT_COMMITTEE}\n        fref={this.state.committeeFref}\n      />\n    );\n  }\n\n  renderWelcome = () => {\n    const { committee, committeeFref } = this.state;\n\n    return (\n      <Container text style={{ padding: '1em 0em' }}>\n        <Header as=\"h1\">\n          <Input\n            value={committee ? committee.name : ''}\n            onChange={fieldHandler<CommitteeData>(committeeFref, 'name')}\n            fluid\n            error={committee ? !committee.name : false}\n            placeholder=\"Committee name\"\n          />\n        </Header>\n        <List>\n          <List.Item>\n            <Input\n              label=\"Topic\"\n              value={committee ? committee.topic : ''}\n              onChange={fieldHandler<CommitteeData>(committeeFref, 'topic')}\n              fluid\n              loading={!committee}\n              placeholder=\"Committee topic\"\n            />\n          </List.Item>\n          <List.Item>\n            <Input\n              label=\"Chairpeople\"\n              value={committee ? committee.chair : ''}\n              onChange={fieldHandler<CommitteeData>(committeeFref, 'chair')}\n              fluid\n              loading={!committee}\n              placeholder=\"Name(s) of chairperson or chairpeople\"\n            />\n          </List.Item>\n          <List.Item>\n            <Input\n              label=\"Conference\"\n              value={committee ? (committee.conference || '') : ''}\n              onChange={fieldHandler<CommitteeData>(committeeFref, 'conference')}\n              fluid\n              loading={!committee}\n              placeholder=\"Conference name\"\n            />\n          </List.Item>\n        </List>\n        <Segment>\n          <CommitteeShareHint committeeID={this.props.match.params.committeeID} />\n        </Segment>\n        <Segment>\n          <Label attached=\"top left\" size=\"large\">Keyboard Shorcuts</Label>\n          {KEYBOARD_SHORTCUT_LIST}\n        </Segment>\n        <Segment textAlign=\"center\" basic>\n          <Button as=\"a\" primary size=\"large\" onClick={this.gotoSetup}>\n            Setup committee\n            <Icon name=\"arrow right\" />\n          </Button>\n        </Segment>\n      </Container>\n    );\n  }\n\n  render() {\n    const { renderAdmin, renderWelcome } = this;\n\n    return (\n      <React.Fragment>\n        <Notifications {...this.props} />\n        <ResponsiveNav {...this.props} committee={this.state.committee} >\n          <Container text>\n            <ConnectionStatus />\n          </Container>\n          <Route exact={true} path=\"/committees/:committeeID\" render={renderWelcome} />\n          <Route exact={true} path=\"/committees/:committeeID/setup\" render={renderAdmin} />\n          <Route exact={true} path=\"/committees/:committeeID/speakers\" component={SpeakersList} />\n          <Route exact={true} path=\"/committees/:committeeID/:caucusID/speakerslist\" component={SpeakersList} />\n          <Route exact={true} path=\"/committees/:committeeID/motions\" component={Motions} />\n          <Route exact={true} path=\"/committees/:committeeID/motions-admin\" component={MotionsAdmin} />\n          <Route exact={true} path=\"/committees/:committeeID/notes\" component={Notes} />\n          <Route exact={true} path=\"/committees/:committeeID/posts\" component={Files} />\n          <Route exact={true} path=\"/committees/:committeeID/settings\" component={Settings} />\n          <Route exact={true} path=\"/committees/:committeeID/help\" component={Help} />\n          <Route path=\"/committees/:committeeID/caucuses/:caucusID\" component={Caucus} />\n\n          <Route path=\"/committees/:committeeID/resolutions/:resolutionID/:tab?\" component={Resolution} />\n          <Footer />\n        </ResponsiveNav>\n      </React.Fragment>\n    );\n  }\n}\n","import * as React from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport * as firebase from 'firebase/app';\nimport { CommitteeData, DEFAULT_COMMITTEE } from './Committee';\nimport { Form, Grid, Header, InputOnChangeData, Divider,\n  Message, Container, List, Segment, Icon } from 'semantic-ui-react';\nimport { Login } from './Auth';\nimport { URLParameters, Dictionary } from '../types';\nimport ConnectionStatus from './ConnectionStatus';\n\ninterface Props extends RouteComponentProps<URLParameters> {\n}\n\ninterface State {\n  name: string;\n  topic: string;\n  chair: string;\n  conference: string;\n  user: firebase.User | null;\n  committeesFref: firebase.database.Reference;\n  unsubscribe?: () => void;\n}\n\nexport default class Onboard extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      name: '',\n      topic: '',\n      chair: '',\n      conference: '',\n      user: null,\n      committeesFref: firebase.database().ref('committees')\n    };\n  }\n\n  authStateChangedCallback = (user: firebase.User | null) => {\n    this.setState({ user: user });\n  }\n\n  componentDidMount() {\n    const unsubscribe = firebase.auth().onAuthStateChanged(\n      this.authStateChangedCallback,\n    );\n\n    this.setState({ unsubscribe });\n  }\n\n  componentWillUnmount() {\n    if (this.state.unsubscribe) {\n      this.state.unsubscribe();\n    }\n  }\n\n  handleInput = (event: React.SyntheticEvent<HTMLInputElement>, data: InputOnChangeData): void => {\n    // XXX: Don't do stupid shit and choose form input names that don't\n    // map to valid state properties\n    // @ts-ignore\n    this.setState({ [data.name]: data.value });\n  }\n\n  handleSubmit = () => {\n    if (this.state.user) {\n      const newCommittee: CommitteeData = {\n        ...DEFAULT_COMMITTEE,\n        name: this.state.name,\n        topic: this.state.topic,\n        chair: this.state.chair,\n        conference: this.state.conference,\n        creatorUid: this.state.user.uid\n      };\n\n      const newCommitteeRef = this.state.committeesFref.push();\n      newCommitteeRef.set(newCommittee);\n\n      this.props.history.push(`/committees/${newCommitteeRef.key}`);\n    }\n  }\n\n  renderNewCommitteeForm = () => {\n    const { user } = this.state;\n\n    return (\n      <React.Fragment>\n        {!user && <Message\n          error\n          attached=\"top\"\n          content=\"Please login or create an account before creating a committee\"\n        />}\n        <Segment attached={!user ? 'bottom' : undefined} >\n          <Form onSubmit={this.handleSubmit}>\n            <Form.Input\n              label=\"Name\"\n              name=\"name\"\n              fluid\n              required\n              error={this.state.name === ''}\n              placeholder=\"Committee name\"\n              onChange={this.handleInput}\n            />\n            <Form.Input\n              label=\"Topic\"\n              name=\"topic\"\n              fluid\n              placeholder=\"Committee topic\"\n              onChange={this.handleInput}\n            />\n            <Form.Input\n              label=\"Chairpeople\"\n              name=\"chair\"\n              fluid\n              placeholder=\"Name(s) of chairperson or chairpeople\"\n              onChange={this.handleInput}\n            />\n            <Form.Input\n              label=\"Conference\"\n              name=\"conference\"\n              fluid\n              placeholder=\"Conference name\"\n              onChange={this.handleInput}\n            />\n            <Form.Button\n                primary\n                fluid\n                disabled={!this.state.user || this.state.name === ''}\n              >\n                Create committee\n                <Icon name=\"arrow right\" />\n                </Form.Button>\n          </Form>\n\n\n        </Segment>\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <Container style={{ padding: '1em 0em' }}>\n        <ConnectionStatus />\n        <Grid\n          columns=\"equal\"\n          stackable\n        >\n          <Grid.Row>\n            <Grid.Column>\n              <Header as=\"h1\" dividing>\n              Muncoordinated\n              </Header>\n              <Divider hidden/>\n              Muncoordinated officially supports recent versions of Google Chrome.\n                Use of older and other browsers has been known to cause bugs and data loss.\n            </Grid.Column>\n          </Grid.Row>\n          <Divider />\n          <Grid.Row>\n            <Grid.Column>\n              <Login allowSignup={false} allowNewCommittee={true}/>\n            </Grid.Column>\n            <Grid.Column>\n              {this.renderNewCommitteeForm()}\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n      </Container>\n    );\n  }\n}\n","import * as React from 'react';\nimport {\n  Button,\n  Container,\n  Divider,\n  Grid,\n  Header,\n  Icon,\n  Image,\n  List,\n  Menu,\n  Responsive,\n  Segment,\n  Statistic,\n  Sidebar,\n  Visibility,\n  Popup\n} from 'semantic-ui-react';\nimport Loading from './Loading';\n\ninterface HomepageHeadingProps {\n  mobile: boolean;\n}\n\nconst REPO_LINK = 'https://github.com/MaxwellBo/Muncoordinated-2';\nconst logo = '../../logo.png'\n\n/* eslint-disable react/no-multi-comp */\n/* Heads up! HomepageHeading uses inline styling, however it's not the best practice. Use CSS or styled components for\n * such things.\n */\nconst HomepageHeading = ({ mobile }: HomepageHeadingProps) => (\n  <Container text>\n    <Header\n      as=\"h1\"\n      content=\"QMUN 2022\"\n      inverted\n      style={{\n        fontSize: mobile ? '2em' : '4em',\n        fontWeight: 'bold',\n        marginBottom: 0,\n        marginTop: mobile ? '1.5em' : '3em',\n      }}\n    />\n    <br />\n    <Image\n      centered\n      size=\"small\"\n      rounded\n      src=\"/images/logo.png\"\n    />\n    <Header\n      as=\"h2\"\n      content=\"Quebec Model United Nations Conference 2022\"\n      inverted\n      style={{\n        fontSize: mobile ? '1.5em' : '1.7em',\n        fontWeight: 'normal',\n        marginTop: mobile ? '0.5em' : '1.5em',\n      }}\n    />\n\n    <br />\n    <Button as=\"a\" primary size=\"huge\" href=\"/committees/-MEZXMLXacUeaJyXM4zR\">\n      Hub UNEA-A\n    </Button>\n    <Button as=\"a\" primary size=\"huge\" href=\"/committees/-MT2m3_0wvJdSHeKrk4-\">\n      Hub UNEA-B\n    </Button>\n    <br />\n    <br />\n    <Button as=\"a\" primary size=\"huge\" href=\"https://bdeb.zoom.us/j/86958002348?pwd=YS9CbmlFMk5EZEt3dzV4dlBCUWNaQT09\">\n      Zoom UNEA-A\n    </Button>\n    <Button as=\"a\" primary size=\"huge\" href=\"https://bdeb.zoom.us/j/89929697341?pwd=VDUxdXp2N2pIWnVKbVU2UzBHaVpSUT09\">\n      Zoom UNEA-B\n    </Button>\n    <br />\n    <br />\n    <br />\n    <br />\n    <br />\n  </Container>\n);\n\ninterface DesktopContainerProps {\n  children?: React.ReactNode;\n}\n\ninterface DesktopContainerState {\n  fixed: boolean;\n}\n\n/* Heads up!\n * Neither Semantic UI nor Semantic UI React offer a responsive navbar, however, it can be implemented easily.\n * It can be more complicated, but you can create really flexible markup.\n */\n\nclass DesktopContainer extends React.Component<DesktopContainerProps, DesktopContainerState> {\n  constructor(props: DesktopContainerProps) {\n    super(props);\n\n    this.state = {\n      fixed: false\n    };\n  }\n\n  hideFixedMenu = () => {\n    this.setState({ fixed: false });\n  }\n\n  showFixedMenu = () => {\n    this.setState({ fixed: true });\n  }\n\n  render() {\n    const { children } = this.props;\n    const { fixed } = this.state;\n\n    // Semantic-UI-React/src/addons/Responsive/Responsive.js\n    return (\n      // @ts-ignore\n      <Responsive {...{ minWidth: Responsive.onlyMobile.maxWidth + 1 }}>\n        <Visibility once={false} onBottomPassed={this.showFixedMenu} onBottomPassedReverse={this.hideFixedMenu}>\n          <Segment inverted textAlign=\"center\" style={{ minHeight: 700, padding: '1em 0em' }} vertical>\n            <Menu\n              fixed={fixed ? 'top' : undefined}\n              inverted={!fixed}\n              pointing={!fixed}\n              secondary={!fixed}\n              size=\"large\"\n            >\n              <Container>\n                <Menu.Item as=\"a\" active>Home</Menu.Item>\n                <Menu.Item as=\"a\" href=\"/committees/-MEZXMLXacUeaJyXM4zR\">QMUN Hub</Menu.Item>\n\n                <Menu.Item as=\"a\" href=\"/guides\">Background Guides</Menu.Item>\n\n              </Container>\n            </Menu>\n            <HomepageHeading mobile={false} />\n          </Segment>\n        </Visibility>\n\n        {children}\n      </Responsive>\n    );\n  }\n}\n//<Menu.Item as=\"a\" href=\"/faq\">FAQ</Menu.Item>\n\ninterface MobileContainerProps {\n  children?: React.ReactNode;\n}\n\ninterface MobileContainerState {\n  sidebarOpened: boolean;\n}\n\nclass MobileContainer extends React.Component<MobileContainerProps, MobileContainerState> {\n  constructor(props: MobileContainerProps) {\n    super(props);\n\n    this.state = {\n      sidebarOpened: false\n    };\n  }\n\n  handlePusherClick = () => {\n    const { sidebarOpened } = this.state;\n\n    if (sidebarOpened) {\n      this.setState({ sidebarOpened: false });\n    }\n  }\n\n  handleToggle = () => {\n    this.setState({ sidebarOpened: !this.state.sidebarOpened });\n  }\n\n  render() {\n    const { children } = this.props;\n    const { sidebarOpened } = this.state;\n\n    return (\n      <Responsive {...Responsive.onlyMobile}>\n        <Sidebar.Pushable>\n          <Sidebar as={Menu} animation=\"uncover\" inverted vertical visible={sidebarOpened}>\n            <Menu.Item as=\"a\" active>Home</Menu.Item>\n            <Menu.Item as=\"a\" href=\"/committees/-MEZXMLXacUeaJyXM4zR\">QMUN Hub</Menu.Item>\n            <Menu.Item as=\"a\" href=\"/guides\">Background Guides</Menu.Item>\n          </Sidebar>\n\n          <Sidebar.Pusher dimmed={sidebarOpened} onClick={this.handlePusherClick} style={{ minHeight: '100vh' }}>\n            <Segment inverted textAlign=\"center\" style={{ minHeight: 350, padding: '1em 0em' }} vertical>\n              <Container>\n                <Menu inverted pointing secondary size=\"large\">\n                  <Menu.Item onClick={this.handleToggle}>\n                    <Icon name=\"sidebar\" />\n                  </Menu.Item>\n                </Menu>\n              </Container>\n              <HomepageHeading mobile={true} />\n            </Segment>\n\n            {children}\n          </Sidebar.Pusher>\n        </Sidebar.Pushable>\n      </Responsive>\n    );\n  }\n}\n\ninterface ResponsiveContainerProps {\n  children?: React.ReactNode;\n}\n\nconst ResponsiveContainer = ({ children }: ResponsiveContainerProps) => (\n  <React.Fragment>\n    <DesktopContainer>{children}</DesktopContainer>\n    <MobileContainer>{children}</MobileContainer>\n  </React.Fragment>\n);\n\nexport default class Homepage extends React.Component<{}, {\n  committeeNo?: number,\n  delegateNo?: number\n}> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {};\n  }\n\n  renderStatistics() {\n    return (\n      <Statistic.Group textAlign=\"center\">\n        <Statistic>\n          <Statistic.Value>{this.state.committeeNo || <Loading small />}</Statistic.Value>\n          <Statistic.Label>Committees created</Statistic.Label>\n        </Statistic>\n        <Statistic>\n          <Statistic.Value>{this.state.delegateNo || <Loading small />}</Statistic.Value>\n          <Statistic.Label>Delegates participating</Statistic.Label>\n        </Statistic>\n      </Statistic.Group>\n    );\n  }\n\n  render() {\n    return (\n      <ResponsiveContainer>\n\n        {/* <Segment style={{ padding: '8em 0em' }} vertical>\n          <Container text>\n            <Header as=\"h3\" style={{ fontSize: '2em' }}>Breaking The Grid, Grabs Your Attention</Header>\n            <p style={{ fontSize: '1.33em' }}>\n              Instead of focusing on content creation and hard work, we have learned how to master the art of doing\n              nothing by providing massive amounts of whitespace and generic content that can seem massive, monolithic\n              and worth your attention.\n          </p>\n            <Button as=\"a\" size=\"large\">Read More</Button>\n            <Divider\n              as=\"h4\"\n              className=\"header\"\n              horizontal\n              style={{ margin: '3em 0em', textTransform: 'uppercase' }}\n            >\n              Case Studies\n            </Divider>\n            <Header as=\"h3\" style={{ fontSize: '2em' }}>Did We Tell You About Our Bananas?</Header>\n            <p style={{ fontSize: '1.33em' }}>\n              Yes I know you probably disregarded the earlier boasts as non-sequitur filler content, but it's really\n              true.\n              It took years of gene splicing and combinatory DNA research, but our bananas can really dance.\n          </p>\n            <Button as=\"a\" size=\"large\">I'm Still Quite Interested</Button>\n          </Container>\n        </Segment> */}\n        <Segment inverted vertical style={{ padding: '5em 0em' }}>\n          <Container>\n            <Grid divided inverted stackable>\n              <Grid.Row>\n                <Grid.Column width={3}>\n                  <Header inverted as=\"h4\" content=\"About\" />\n                  <List link inverted>\n                  <List.Item\n                    as=\"a\"\n                    href=\"https://www.facebook.com/unyc.contact\"\n                  >\n                    Facebook Page\n                  </List.Item>\n                    <List.Item as=\"a\" href={REPO_LINK}>Source</List.Item>\n                    <List.Item\n                      as=\"a\"\n                      href=\"https://github.com/MaxwellBo/Muncoordinated-2/blob/master/LICENSE\"\n                    >\n                      License\n                    </List.Item>\n\n                  </List>\n                </Grid.Column>\n                <Grid.Column width={7}>\n                  <Header as=\"h4\" inverted>Info</Header>\n                  <p>Made by <a href=\"https://github.com/vicbab\">Victor Babin</a>,\n                  adapted from Muncoordinated by <a href=\"https://github.com/MaxwellBo\">Max Bo</a>\n                  </p>\n                  <p>Copyright © 2022 - Published under the GNU license.</p>\n                </Grid.Column>\n              </Grid.Row>\n            </Grid>\n          </Container>\n        </Segment>\n      </ResponsiveContainer>\n    );\n  }\n}\n","import * as React from 'react';\nimport {\n  Button,\n  Container,\n  Divider,\n  Grid,\n  Header,\n  Icon,\n  Image,\n  List,\n  Menu,\n  Responsive,\n  Segment,\n  Statistic,\n  Sidebar,\n  Visibility,\n  Popup\n} from 'semantic-ui-react';\nimport Loading from './Loading';\n\ninterface GuidesHeadingProps {\n  mobile: boolean;\n}\n\nconst REPO_LINK = 'https://github.com/MaxwellBo/Muncoordinated-2';\n\n/* eslint-disable react/no-multi-comp */\n/* Heads up! GuidesHeading uses inline styling, however it's not the best practice. Use CSS or styled components for\n * such things.\n <Header\n   as=\"h2\"\n   content=\"Download your background guide\"\n   inverted\n   style={{\n     fontSize: mobile ? '1.5em' : '1.7em',\n     fontWeight: 'normal',\n     marginTop: mobile ? '0.5em' : '1.5em',\n   }}\n />\n */\nconst GuidesHeading = ({ mobile }: GuidesHeadingProps) => (\n  <Container text>\n    <Header\n      as=\"h1\"\n      content=\"Background Guides for QMUN 2022\"\n      inverted\n      style={{\n        fontSize: mobile ? '2em' : '4em',\n        fontWeight: 'normal',\n        marginBottom: 0,\n        marginTop: mobile ? '1.5em' : '3em',\n      }}\n    />\n    <br />\n    <Button as=\"a\" primary size=\"huge\" href=\"/UNEA-QMUN-2022.pdf\" target=\"_blank\">\n      Click to download your Background Guide\n    </Button>\n    <br />\n  </Container>\n);\n\ninterface DesktopContainerProps {\n  children?: React.ReactNode;\n}\n\ninterface DesktopContainerState {\n  fixed: boolean;\n}\n\n/* Heads up!\n * Neither Semantic UI nor Semantic UI React offer a responsive navbar, however, it can be implemented easily.\n * It can be more complicated, but you can create really flexible markup.\n */\n\nclass DesktopContainer extends React.Component<DesktopContainerProps, DesktopContainerState> {\n  constructor(props: DesktopContainerProps) {\n    super(props);\n\n    this.state = {\n      fixed: false\n    };\n  }\n\n  hideFixedMenu = () => {\n    this.setState({ fixed: false });\n  }\n\n  showFixedMenu = () => {\n    this.setState({ fixed: true });\n  }\n\n  render() {\n    const { children } = this.props;\n    const { fixed } = this.state;\n\n    // Semantic-UI-React/src/addons/Responsive/Responsive.js\n    return (\n      // @ts-ignore\n      <Responsive {...{ minWidth: Responsive.onlyMobile.maxWidth + 1 }}>\n        <Visibility once={false} onBottomPassed={this.showFixedMenu} onBottomPassedReverse={this.hideFixedMenu}>\n          <Segment inverted textAlign=\"center\" style={{ minHeight: 700, padding: '1em 0em' }} vertical>\n            <Menu\n              fixed={fixed ? 'top' : undefined}\n              inverted={!fixed}\n              pointing={!fixed}\n              secondary={!fixed}\n              size=\"large\"\n            >\n              <Container>\n                <Menu.Item as=\"a\" href=\"/\">Home</Menu.Item>\n                <Menu.Item as=\"a\" href=\"/committees/-MEZXMLXacUeaJyXM4zR\">QMUN Hub</Menu.Item>\n                <Menu.Item as=\"a\" href=\"/guides\" active>Background Guides</Menu.Item>\n              </Container>\n            </Menu>\n            <GuidesHeading mobile={false} />\n          </Segment>\n        </Visibility>\n\n        {children}\n      </Responsive>\n    );\n  }\n}\n\ninterface MobileContainerProps {\n  children?: React.ReactNode;\n}\n\ninterface MobileContainerState {\n  sidebarOpened: boolean;\n}\n\nclass MobileContainer extends React.Component<MobileContainerProps, MobileContainerState> {\n  constructor(props: MobileContainerProps) {\n    super(props);\n\n    this.state = {\n      sidebarOpened: false\n    };\n  }\n\n  handlePusherClick = () => {\n    const { sidebarOpened } = this.state;\n\n    if (sidebarOpened) {\n      this.setState({ sidebarOpened: false });\n    }\n  }\n\n  handleToggle = () => {\n    this.setState({ sidebarOpened: !this.state.sidebarOpened });\n  }\n\n  render() {\n    const { children } = this.props;\n    const { sidebarOpened } = this.state;\n\n    return (\n      <Responsive {...Responsive.onlyMobile}>\n        <Sidebar.Pushable>\n          <Sidebar as={Menu} animation=\"uncover\" inverted vertical visible={sidebarOpened}>\n            <Menu.Item as=\"a\" >Home</Menu.Item>\n            <Menu.Item as=\"a\" href=\"/committees/-MEZXMLXacUeaJyXM4zR\">Hub A</Menu.Item>\n            <Menu.Item as=\"a\" href=\"#\">Hub B</Menu.Item>\n            <Menu.Item as=\"a\" href=\"/guides\" active>Background Guides</Menu.Item>\n          </Sidebar>\n\n          <Sidebar.Pusher dimmed={sidebarOpened} onClick={this.handlePusherClick} style={{ minHeight: '100vh' }}>\n            <Segment inverted textAlign=\"center\" style={{ minHeight: 350, padding: '1em 0em' }} vertical>\n              <Container>\n                <Menu inverted pointing secondary size=\"large\">\n                  <Menu.Item onClick={this.handleToggle}>\n                    <Icon name=\"sidebar\" />\n                  </Menu.Item>\n                </Menu>\n              </Container>\n              <GuidesHeading mobile={true} />\n            </Segment>\n\n            {children}\n          </Sidebar.Pusher>\n        </Sidebar.Pushable>\n      </Responsive>\n    );\n  }\n}\n\ninterface ResponsiveContainerProps {\n  children?: React.ReactNode;\n}\n\nconst ResponsiveContainer = ({ children }: ResponsiveContainerProps) => (\n  <React.Fragment>\n    <DesktopContainer>{children}</DesktopContainer>\n    <MobileContainer>{children}</MobileContainer>\n  </React.Fragment>\n);\n\nexport default class Guides extends React.Component<{}, {\n  committeeNo?: number,\n  delegateNo?: number\n}> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {};\n  }\n\n  renderStatistics() {\n    return (\n      <Statistic.Group textAlign=\"center\">\n        <Statistic>\n          <Statistic.Value>{this.state.committeeNo || <Loading small />}</Statistic.Value>\n          <Statistic.Label>Committees created</Statistic.Label>\n        </Statistic>\n        <Statistic>\n          <Statistic.Value>{this.state.delegateNo || <Loading small />}</Statistic.Value>\n          <Statistic.Label>Delegates participating</Statistic.Label>\n        </Statistic>\n      </Statistic.Group>\n    );\n  }\n\n  render() {\n    return (\n      <ResponsiveContainer>\n        <Segment inverted vertical style={{ padding: '5em 0em' }}>\n          <Container>\n            <Grid divided inverted stackable>\n              <Grid.Row>\n                <Grid.Column width={3}>\n                  <Header inverted as=\"h4\" content=\"About\" />\n                  <List link inverted>\n                    <List.Item as=\"a\" href={REPO_LINK}>Source</List.Item>\n                    <List.Item\n                      as=\"a\"\n                      href=\"https://github.com/MaxwellBo/Muncoordinated-2/blob/master/LICENSE\"\n                    >\n                      License\n                    </List.Item>\n                    {/* <List.Item as=\"a\">Contact Us</List.Item> TODO */}\n                  </List>\n                </Grid.Column>\n                <Grid.Column width={7}>\n                  <Header as=\"h4\" inverted>Info</Header>\n                  <p>Made by <a href=\"https://github.com/vicbab\">Vic SB</a>,\n                  adapted from Muncoordinated by <a href=\"https://github.com/MaxwellBo\">Max Bo</a>\n                  </p>\n                  <p>Copyright © 2020</p>\n                </Grid.Column>\n              </Grid.Row>\n            </Grid>\n          </Container>\n        </Segment>\n      </ResponsiveContainer>\n    );\n  }\n}\n","import * as React from 'react';\nimport {\n  Button,\n  Container,\n  Divider,\n  Grid,\n  Header,\n  Icon,\n  Image,\n  List,\n  Menu,\n  Responsive,\n  Segment,\n  Statistic,\n  Sidebar,\n  Visibility,\n  Popup\n} from 'semantic-ui-react';\nimport Loading from './Loading';\n\ninterface GuidesHeadingProps {\n  mobile: boolean;\n}\n\nconst REPO_LINK = 'https://github.com/MaxwellBo/Muncoordinated-2';\n\n/* eslint-disable react/no-multi-comp */\n/* Heads up! GuidesHeading uses inline styling, however it's not the best practice. Use CSS or styled components for\n * such things.\n */\nconst GuidesHeading = ({ mobile }: GuidesHeadingProps) => (\n  <Container text>\n    <Header\n      as=\"h1\"\n      content=\"FAQ\"\n      inverted\n      style={{\n        fontSize: mobile ? '2em' : '4em',\n        fontWeight: 'normal',\n        marginBottom: 0,\n        marginTop: mobile ? '1.5em' : '3em',\n      }}\n    />\n    <Header\n      as=\"h2\"\n      content=\"Frequently Asked Questions\"\n      inverted\n      style={{\n        fontSize: mobile ? '1.5em' : '1.7em',\n        fontWeight: 'normal',\n        marginTop: mobile ? '0.5em' : '1.5em',\n      }}\n    />\n  </Container>\n);\n\ninterface DesktopContainerProps {\n  children?: React.ReactNode;\n}\n\ninterface DesktopContainerState {\n  fixed: boolean;\n}\n\n/* Heads up!\n * Neither Semantic UI nor Semantic UI React offer a responsive navbar, however, it can be implemented easily.\n * It can be more complicated, but you can create really flexible markup.\n */\n\nclass DesktopContainer extends React.Component<DesktopContainerProps, DesktopContainerState> {\n  constructor(props: DesktopContainerProps) {\n    super(props);\n\n    this.state = {\n      fixed: false\n    };\n  }\n\n  hideFixedMenu = () => {\n    this.setState({ fixed: false });\n  }\n\n  showFixedMenu = () => {\n    this.setState({ fixed: true });\n  }\n\n  render() {\n    const { children } = this.props;\n    const { fixed } = this.state;\n\n    // Semantic-UI-React/src/addons/Responsive/Responsive.js\n    return (\n      // @ts-ignore\n      <Responsive {...{ minWidth: Responsive.onlyMobile.maxWidth + 1 }}>\n        <Visibility once={false} onBottomPassed={this.showFixedMenu} onBottomPassedReverse={this.hideFixedMenu}>\n          <Segment inverted textAlign=\"center\" style={{ minHeight: 700, padding: '1em 0em' }} vertical>\n            <Menu\n              fixed={fixed ? 'top' : undefined}\n              inverted={!fixed}\n              pointing={!fixed}\n              secondary={!fixed}\n              size=\"large\"\n            >\n              <Container>\n                <Menu.Item as=\"a\" href=\"/\">Home</Menu.Item>\n                <Menu.Item as=\"a\" href=\"/committees/-MEZXMLXacUeaJyXM4zR\">QMUN Hub</Menu.Item>\n                <Menu.Item as=\"a\" href=\"/guides\">Background Guides</Menu.Item>\n                <Menu.Item as=\"a\" href=\"/faq\"  active>FAQ</Menu.Item>\n              </Container>\n            </Menu>\n            <GuidesHeading mobile={false} />\n          </Segment>\n        </Visibility>\n\n        {children}\n      </Responsive>\n    );\n  }\n}\n\ninterface MobileContainerProps {\n  children?: React.ReactNode;\n}\n\ninterface MobileContainerState {\n  sidebarOpened: boolean;\n}\n\nclass MobileContainer extends React.Component<MobileContainerProps, MobileContainerState> {\n  constructor(props: MobileContainerProps) {\n    super(props);\n\n    this.state = {\n      sidebarOpened: false\n    };\n  }\n\n  handlePusherClick = () => {\n    const { sidebarOpened } = this.state;\n\n    if (sidebarOpened) {\n      this.setState({ sidebarOpened: false });\n    }\n  }\n\n  handleToggle = () => {\n    this.setState({ sidebarOpened: !this.state.sidebarOpened });\n  }\n\n  render() {\n    const { children } = this.props;\n    const { sidebarOpened } = this.state;\n\n    return (\n      <Responsive {...Responsive.onlyMobile}>\n        <Sidebar.Pushable>\n          <Sidebar as={Menu} animation=\"uncover\" inverted vertical visible={sidebarOpened}>\n            <Menu.Item as=\"a\" >Home</Menu.Item>\n            <Menu.Item as=\"a\" href=\"/committees/-MEZXMLXacUeaJyXM4zR\">QMUN Hub</Menu.Item>\n            <Menu.Item as=\"a\" href=\"/guides\">Background Guides</Menu.Item>\n            <Menu.Item as=\"a\" href=\"/faq\"  active>FAQ</Menu.Item>\n          </Sidebar>\n\n          <Sidebar.Pusher dimmed={sidebarOpened} onClick={this.handlePusherClick} style={{ minHeight: '100vh' }}>\n            <Segment inverted textAlign=\"center\" style={{ minHeight: 350, padding: '1em 0em' }} vertical>\n              <Container>\n                <Menu inverted pointing secondary size=\"large\">\n                  <Menu.Item onClick={this.handleToggle}>\n                    <Icon name=\"sidebar\" />\n                  </Menu.Item>\n                </Menu>\n              </Container>\n              <GuidesHeading mobile={true} />\n            </Segment>\n\n            {children}\n          </Sidebar.Pusher>\n        </Sidebar.Pushable>\n      </Responsive>\n    );\n  }\n}\n\ninterface ResponsiveContainerProps {\n  children?: React.ReactNode;\n}\n\nconst ResponsiveContainer = ({ children }: ResponsiveContainerProps) => (\n  <React.Fragment>\n    <DesktopContainer>{children}</DesktopContainer>\n    <MobileContainer>{children}</MobileContainer>\n  </React.Fragment>\n);\n\nexport default class Guides extends React.Component<{}, {\n  committeeNo?: number,\n  delegateNo?: number\n}> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {};\n  }\n\n  renderStatistics() {\n    return (\n      <Statistic.Group textAlign=\"center\">\n        <Statistic>\n          <Statistic.Value>{this.state.committeeNo || <Loading small />}</Statistic.Value>\n          <Statistic.Label>Committees created</Statistic.Label>\n        </Statistic>\n        <Statistic>\n          <Statistic.Value>{this.state.delegateNo || <Loading small />}</Statistic.Value>\n          <Statistic.Label>Delegates participating</Statistic.Label>\n        </Statistic>\n      </Statistic.Group>\n    );\n  }\n\n  render() {\n    return (\n      <ResponsiveContainer>\n        <Segment style={{ padding: '3em 0em' }} vertical>\n      <Grid container stackable verticalAlign=\"middle\">\n        <Grid.Row>\n          <Grid.Column width={8}>\n            <Header as=\"h3\" style={{ fontSize: '2em' }}>How are you?</Header>\n            <p style={{ fontSize: '1.33em' }}>\n              Pretty good, you?\n          </p>\n          </Grid.Column>\n\n        </Grid.Row>\n        {/* <Grid.Row>\n          <Grid.Column textAlign=\"center\">\n            <Button size=\"huge\">Check Them Out</Button>\n          </Grid.Column>\n        </Grid.Row> */}\n      </Grid>\n    </Segment>\n        {/* <Segment style={{ padding: '8em 0em' }} vertical>\n          <Container text>\n            <Header as=\"h3\" style={{ fontSize: '2em' }}>Breaking The Grid, Grabs Your Attention</Header>\n            <p style={{ fontSize: '1.33em' }}>\n              Instead of focusing on content creation and hard work, we have learned how to master the art of doing\n              nothing by providing massive amounts of whitespace and generic content that can seem massive, monolithic\n              and worth your attention.\n          </p>\n            <Button as=\"a\" size=\"large\">Read More</Button>\n            <Divider\n              as=\"h4\"\n              className=\"header\"\n              horizontal\n              style={{ margin: '3em 0em', textTransform: 'uppercase' }}\n            >\n              Case Studies\n            </Divider>\n            <Header as=\"h3\" style={{ fontSize: '2em' }}>Did We Tell You About Our Bananas?</Header>\n            <p style={{ fontSize: '1.33em' }}>\n              Yes I know you probably disregarded the earlier boasts as non-sequitur filler content, but it's really\n              true.\n              It took years of gene splicing and combinatory DNA research, but our bananas can really dance.\n          </p>\n            <Button as=\"a\" size=\"large\">I'm Still Quite Interested</Button>\n          </Container>\n        </Segment> */}\n        <Segment inverted vertical style={{ padding: '5em 0em' }}>\n          <Container>\n            <Grid divided inverted stackable>\n              <Grid.Row>\n                <Grid.Column width={3}>\n                  <Header inverted as=\"h4\" content=\"About\" />\n                  <List link inverted>\n                    <List.Item as=\"a\" href={REPO_LINK}>Source</List.Item>\n                    <List.Item\n                      as=\"a\"\n                      href=\"https://github.com/MaxwellBo/Muncoordinated-2/blob/master/LICENSE\"\n                    >\n                      License\n                    </List.Item>\n                    {/* <List.Item as=\"a\">Contact Us</List.Item> TODO */}\n                  </List>\n                </Grid.Column>\n                <Grid.Column width={7}>\n                  <Header as=\"h4\" inverted>Info</Header>\n                  <p>Made by <a href=\"https://github.com/vicbab\">Vic SB</a>,\n                  adapted from Muncoordinated by <a href=\"https://github.com/MaxwellBo\">Max Bo</a>\n                  </p>\n                  <p>Copyright © 2020</p>\n                </Grid.Column>\n              </Grid.Row>\n            </Grid>\n          </Container>\n        </Segment>\n      </ResponsiveContainer>\n    );\n  }\n}\n","import * as React from 'react';\n\n// This import loads the firebase namespace along with all its type information.\nimport * as firebase from 'firebase/app';\n\n// These imports load individual services into the firebase namespace.\nimport 'firebase/auth';\nimport 'firebase/database';\nimport 'firebase/firestore';\nimport 'firebase/storage';\n\nimport { Route } from 'react-router-dom';\nimport './App.css';\n\nimport Onboard from './components/Onboard';\nimport Homepage from './components/Homepage';\nimport Guides from './components/Guides'\nimport FAQ from './components/FAQ';\nimport Committee from './components/Committee';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCK_r3i6bZvRVW_dNOMXKhS563Pf_aqEps\",\n  authDomain: \"qmun2021.firebaseapp.com\",\n  databaseURL: \"https://qmun2021.firebaseio.com\",\n  projectId: \"qmun2021\",\n  storageBucket: \"qmun2021.appspot.com\",\n  messagingSenderId: \"776859144464\",\n  appId: \"1:776859144464:web:e2ecaa3903a21416edd595\",\n  measurementId: \"G-8S18Z87KZ6\"\n};\n\nfirebase.initializeApp(firebaseConfig);\n\n\n\nclass App extends React.Component {\n  render() {\n    return (\n      <React.Fragment>\n        <Route exact path=\"/\" component={Homepage} />\n        <Route exact path=\"/onboard\" component={Onboard} />\n        <Route exact path=\"/guides\" component={Guides} />\n        <Route exact path=\"/faq\" component={FAQ} />\n        <Route exact path=\"/committees\" component={Onboard} />\n        <Route path=\"/committees/:committeeID\" component={Committee} />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Router } from 'react-router-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport createHistory from 'history/createBrowserHistory';\nimport * as ReactGA from 'react-ga';\nimport * as Sentry from '@sentry/browser';\nimport 'semantic-ui-css/semantic.min.css';\n\nSentry.init({ dsn: 'https://1e4f23a087974ab482cacf50699c6dbd@sentry.io/1296285' });\n\nReactGA.initialize('UA-122177622-1');\nReactGA.pageview(window.location.pathname + window.location.search);\n\nconst history = createHistory();\n\nhistory.listen((location, action) => {\n  ReactGA.set({ page: location.pathname });\n  ReactGA.pageview(location.pathname);\n});\n\nReactDOM.render(\n// @ts-ignore\n  <Router history={history}>\n    <App />\n  </Router>,\n  document.getElementById('root') as HTMLElement\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}